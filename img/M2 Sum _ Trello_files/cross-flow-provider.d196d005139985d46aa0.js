/*! For license information please see cross-flow-provider.d196d005139985d46aa0.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{"./app/gamma/src/util/cross-flow-essentials.ts":function(e,n,t){"use strict";t.d(n,"c",(function(){return u})),t.d(n,"g",(function(){return d})),t.d(n,"f",(function(){return p})),t.d(n,"e",(function(){return f})),t.d(n,"b",(function(){return m})),t.d(n,"a",(function(){return v})),t.d(n,"d",(function(){return b}));var r=t("./packages/config/index.ts"),a=t("./packages/atlassian-analytics/index.ts"),o=t("./node_modules/@atlassiansox/cross-flow-support/dist/esm/index.js");function i(e,n,t,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,a)}function s(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,n){if(!e)return;if("string"==typeof e)return c(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(e,n)}(e))){var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var u;!function(e){e.ATLASSIAN_SWITCHER="atlassian_switcher",e.PRODUCT_STORE="product_store",e.CROSSFLOW_ESSENTIALS="cross_flow_essentials_v2",e.TOUCHPOINTS_JSW_BOARD="trello_jsw_touchpoints_board",e.TOUCHPOINTS_JSW_POWERUPS="trello_jsw_touchpoints_powerups",e.TOUCHPOINTS_JSW_SWITCHER="trello_jsw_touchpoints_switcher",e.TOUCHPOINTS_CONFLUENCE_SWITCHER="trello_confluence_touchpoints_switcher",e.TOUCHPOINTS_CONFLUENCE_POWERUPS="trello_confluence_touchpoints_powerups"}(u||(u={}));var l=function(e){var n=e.campaign;return"utm_source=trello&utm_medium=in_product_ad&utm_campaign=".concat(n)},d=function(e){var n=l(e);window.open("".concat(r.wacUrl,"/software?").concat(n),"_blank")},p=function(e,n){var t=l(n);if(e!==o.a.OPSGENIE){var a={[o.a.JIRA_SOFTWARE]:"jira-software",[o.a.JIRA_SERVICE_DESK]:"jira-service-desk",[o.a.CONFLUENCE]:"confluence"}[e];a?window.open("".concat(r.wacUrl,"/try/cloud/signup?bundle=").concat(a,"&edition=free&").concat(t),"_blank"):d(n)}else window.open("".concat(r.wacUrl,"/software/opsgenie/try?").concat(t),"_blank")},f=function(e,n,t){var r=[];function a(e){r.length<5&&r.push(e)}var o,i=s(e);try{var c=function(){var e=o.value;if(5===r.length)return"break";r.push(e.displayName);var t=n.filter((function(n){return n.idEnterprise===e.id}));t.forEach((function(n){a("".concat(e.displayName,"-").concat(n.displayName))})),t.forEach((function(e){a(e.displayName)}))};for(i.s();!(o=i.n()).done;){if("break"===c())break}}catch(e){i.e(e)}finally{i.f()}return n.forEach((function(e){e.idEnterprise||a(e.displayName)})),t&&t.name&&a(t.name),r},m="".concat(r.atlassianApiGateway,"gateway/api/available-products/api/available-products"),v="".concat(r.siteDomain,"/proxy/experiment-api/trello-cross-product-join/available-sites"),b=function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var t,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n?m:v,e.next=4,fetch(t,{method:"GET",credentials:"include",headers:{"X-Trello-Client-Version":r.clientVersion}});case 4:if(!(o=e.sent).ok){e.next=7;break}return e.abrupt("return",o.json());case 7:throw new Error("unauthorized");case 10:return e.prev=10,e.t0=e.catch(0),a.Analytics.sendOperationalEvent({action:"errored",actionSubject:"fetchAvailableSites",source:"crossFlowEssentials"}),e.abrupt("return",{sites:[]});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function s(e){i(o,r,a,s,c,"next",e)}function c(e){i(o,r,a,s,c,"throw",e)}s(void 0)}))});return function(e){return n.apply(this,arguments)}}()},"./app/src/components/CrossFlowProvider/CrossFlowProvider.tsx":function(e,n,t){"use strict";t.r(n),t.d(n,"CrossFlowProvider",(function(){return k}));var r=t("./node_modules/react/index.js"),a=t.n(r),o=t("./app/gamma/src/util/cross-flow-essentials.ts"),i=t("./packages/config/index.ts"),s=t("./node_modules/@atlassiansox/cross-flow-support/dist/esm/trello.js"),c=t("./packages/atlassian-analytics/index.ts"),u="GetSuggestedSiteNames",l="GetAvailableSites",d=t("./packages/error-reporting/index.ts"),p=t("./node_modules/@apollo/react-hooks/lib/react-hooks.esm.js"),f={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CrossFlowProvider"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"memberId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"member"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"memberId"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idPremOrgsAdmin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isAaMastered"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"prefs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locale"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"enterprises"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"organizations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idEnterprise"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]};function m(e,n,t,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,a)}function v(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){m(o,r,a,i,s,"next",e)}function s(e){m(o,r,a,i,s,"throw",e)}i(void 0)}))}}var b="prod"===i.environment?"production":"staging",w=i.atlassianApiGateway.endsWith("/")?i.atlassianApiGateway.substr(0,i.atlassianApiGateway.length-1):i.atlassianApiGateway,k=function(e){var n,t,r,i,m=e.children,k=(i={variables:{memberId:"me"}},p.c(f,i)).data,y=k&&(null==k?void 0:k.member),g=null!==(n=null==y?void 0:y.enterprises)&&void 0!==n?n:[],O=null!==(t=null==y?void 0:y.organizations)&&void 0!==t?t:[],E=Boolean(null==y?void 0:y.isAaMastered),_={id:(null==y?void 0:y.id)||"",idPremOrgsAdmin:(null==y?void 0:y.idPremOrgsAdmin)||[],isAaMastered:E,name:(null==y?void 0:y.fullName)||"",enterprises:g},h=(null==y||null===(r=y.prefs)||void 0===r?void 0:r.locale)||"en",j=function(e){return[u,e]}(v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o.e)(g,O,_));case 1:case"end":return e.stop()}}),e)})))),S=function(e){return[l,e]}(v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o.d)(E));case 1:case"end":return e.stop()}}),e)}))));return a.a.createElement(s.a,{analyticsClient:c.Analytics.dangerouslyGetAnalyticsWebClient(),locale:h,edgePrefix:w,isAaMastered:E,env:b,plugins:[j,S],onError:function(e){Object(d.sendErrorEvent)(e,{tags:{ownershipArea:"trello-workflowers"},extraData:{component:"CrossFlowProvider"}})}},m)}},"./node_modules/@atlaskit/analytics-gas-types/dist/esm/index.js":function(e,n,t){"use strict";t.d(n,"e",(function(){return r})),t.d(n,"d",(function(){return a})),t.d(n,"c",(function(){return o})),t.d(n,"b",(function(){return i})),t.d(n,"a",(function(){return s}));var r="ui",a="track",o="screen",i="operational",s="unknown"},"./node_modules/@atlassiansox/cross-flow-api-internals/dist/esm/index.js":function(e,n,t){"use strict";t.d(n,"a",(function(){return d})),t.d(n,"d",(function(){return p})),t.d(n,"b",(function(){return i})),t.d(n,"c",(function(){return s}));Object.create;Object.create;var r=t("./node_modules/react/index.js"),a=t.n(r),o=function(e){return{open:function(n){return e(n)}}},i={GET_STARTED:"get-started",DECIDE:"decide",DISCOVER:"discover"},s={CONFLUENCE:"confluence.ondemand",JIRA_CORE:"jira-core.ondemand",JIRA_SERVICE_DESK:"jira-servicedesk.ondemand",JIRA_SOFTWARE:"jira-software.ondemand",BITBUCKET:"bitbucket.ondemand",TRELLO:"trello",OPSGENIE:"opsgenie",STATUSPAGE:"statuspage"},c="Could not provide requested API version",u="Provider not found",l=Object(r.createContext)((function(){return{isEnabled:!1,reason:u}})),d=function(e){var n=e.onOpen,t=e.children,i=Object(r.useMemo)((function(){return function(e){return function(n){switch(n){case 0:return{isEnabled:!0,api:o(e)};default:return{isEnabled:!1,reason:c}}}}(n)}),[n]);return a.a.createElement(l.Provider,{value:i},t)},p=function(){return Object(r.useContext)(l)(0)}},"./node_modules/@atlassiansox/cross-flow-support/dist/esm/index.js":function(e,n,t){"use strict";var r=t("./node_modules/@atlassiansox/cross-flow-api-internals/dist/esm/index.js");t.d(n,"b",(function(){return r.d})),t.d(n,"a",(function(){return r.c}))},"./node_modules/@atlassiansox/cross-flow-support/dist/esm/lib/redirects-helpers/redirectsHelpers.js":function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var r,a=t("./node_modules/@atlassiansox/cross-flow-api-internals/dist/esm/index.js");!function(e){e["atlassian-switcher"]="atlassian_switcher"}(r||(r={}));var o={"atlassian-switcher":r["atlassian-switcher"]},i=function(e,n){var t="";return e&&function(e){return Boolean(o[e])}(e)&&(t=t+"utm_campaign="+o[e]+"&utm_medium=in_product_ad",n&&(t=t+"&utm_source="+n)),t},s=function(e,n,t,r){var o="staging"===n?"https://qa-wac.internal.atlassian.com":"https://www.atlassian.com",s=i(t,r),c="",u="",l="/software";return!function(e){return[a.c.JIRA_SOFTWARE,a.c.JIRA_SERVICE_DESK,a.c.JIRA_CORE,a.c.CONFLUENCE].includes(e)}(e)?function(e){return[a.c.OPSGENIE].includes(e)}(e)&&(l=function(e){var n;return((n={})[a.c.OPSGENIE]="/software/opsgenie/try",n)[e]}(e)):(l="/try/cloud/signup",u=function(e){var n;return"bundle="+((n={})[a.c.JIRA_SOFTWARE]="jira-software",n[a.c.JIRA_SERVICE_DESK]="jira-service-desk",n[a.c.JIRA_CORE]="jira-core",n[a.c.CONFLUENCE]="confluence",n)[e]+"&edition=free"}(e)),u&&(c=c+"?"+u),s&&(c=c+(c?"&":"?")+s),o+l+c},c=function(e,n,t,r){void 0===n&&(n="production");var a=s(e,n,t,r);window.open(a,"_blank")}},"./node_modules/@atlassiansox/cross-flow-support/dist/esm/trello.js":function(e,n,t){"use strict";t.d(n,"b",(function(){return E.b}));var r,a=t("./node_modules/@atlassiansox/cross-flow-support/node_modules/tslib/tslib.es6.js"),o=t("./node_modules/react/index.js"),i=t.n(o),s=t("./node_modules/@atlassiansox/cross-flow-api-internals/dist/esm/index.js"),c=t("./node_modules/@atlaskit/analytics-gas-types/dist/esm/index.js"),u=function(e){return function(e,n){return n.reduce((function(n,t){return e.forEach((function(e){var r=t?t[e]:null;n.push(r||t[e])})),n}),[]).filter(Boolean)}(["source"],e)},l=function(e){return e[e.length-1]},d=function(e){var n=e.context,t=e.payload;if(!t)return null;var r=u(n),o=l(r)||c.a,i=function(e){return e.reduce((function(e,n){var t=n.attributes,r=Object(a.d)(n,["attributes"]),o=Object(a.a)(Object(a.a)({},e),r);return t?Object(a.a)(Object(a.a)({},o),t):o}),{})}(n),s=l(function(e){return e.map((function(e){return{packageName:e.packageName,packageVersion:e.packageVersion}})).filter((function(e){return e.packageName}))}(n))||{},d=s.packageName,p=void 0===d?void 0:d,f=s.packageVersion,m=void 0===f?void 0:f,v=t.eventType,b=void 0===v?c.e:v,w=t.action,k=t.actionSubject,y=t.actionSubjectId,g=t.attributes,O=t.name,E=Object(a.a)(Object(a.a)({packageName:p,packageVersion:m},i),g),_=t.tags||[];switch(_.push("growth"),b){case c.e:case c.b:case c.d:return{eventType:b,source:o,actionSubject:k,action:w,actionSubjectId:y,attributes:E,tags:_.slice(0)};case c.c:return{eventType:b,name:O,attributes:E,source:o,tags:_.slice(0)}}return null},p=t("./node_modules/@atlassiansox/cross-flow-support/dist/esm/lib/redirects-helpers/redirectsHelpers.js"),f="crossFlowProvider",m="crossFlowSupport",v=t("./node_modules/@atlassiansox/cross-flow-support/dist/esm/version.json"),b={eventType:c.b,action:"errorCaught",actionSubject:"errorBoundary"},w=[{source:f},{packageName:v.name,packageVersion:v.version}],k=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={hasError:!1},n}return Object(a.b)(n,e),n.getDerivedStateFromError=function(){return{hasError:!0}},n.prototype.componentDidCatch=function(e){this.props.onAnalyticsEvent({payload:b,context:w}),this.props.onError&&this.props.onError(e)},n.prototype.render=function(){return this.state.hasError?null:this.props.children},n}(o.Component),y={version:v.version},g=i.a.lazy((function(){return t.e(33).then(t.bind(null,"./node_modules/@atlassiansox/cross-flow-support/dist/esm/lib/view/index.js"))})),O=(r=g,function(e){var n=e.children,t=e.analyticsClient,u=e.originProduct,l=e.redirectToWac,v=e.env,b=e.plugins,w=void 0===b?[]:b,g=e.onError,O=Object(a.d)(e,["children","analyticsClient","originProduct","redirectToWac","env","plugins","onError"]),E=Object(o.useRef)(),_=Object(a.c)(Object(o.useState)(!1),2),h=_[0],j=_[1],S=Object(o.useMemo)((function(){return function(e){return function(n){return Promise.resolve(e).then((function(e){switch(n.eventType){case c.e:e.sendUIEvent(n);break;case c.d:e.sendTrackEvent(n);break;case c.b:e.sendOperationalEvent(n);break;case c.c:e.sendScreenEvent(n)}}))}}(t)}),[t]),N=Object(a.c)(Object(o.useState)(),2),C=N[0],x=N[1],A=Object(o.useCallback)((function(e){var n,t,r=d(e);if(r){var o=function(e,n){if(!n)return e;var t=Object(a.a)(Object(a.a)({},e.attributes||{}),{sourceComponent:n.sourceComponent,sourceContext:n.sourceContext});return Object(a.a)(Object(a.a)({},e),{attributes:t})}((n=r,t=Object(a.a)(Object(a.a)({},n.attributes||{}),{crossFlowSupport:y}),Object(a.a)(Object(a.a)({},n),{attributes:t})),C);S(o)}}),[S,C]),T=Object(o.useCallback)((function(e){h||(A({payload:{eventType:c.b,action:"uiInitialized",actionSubject:m,appName:e},context:[{source:f}]}),j(!0))}),[h,A]),I=Object(o.useCallback)((function(e){return j(!1),A({payload:{eventType:c.b,action:"openInvoked",actionSubject:m,attributes:{sourceComponent:e.sourceComponent,sourceContext:e.sourceContext}},context:[{source:f}]}),e.journey===s.b.GET_STARTED&&l?(Object(p.a)(e.targetProduct,v,e.sourceComponent,e.sourceContext),Promise.resolve({})):(x(e),new Promise((function(e){E.current=e})))}),[A,v,l]),P=Object(o.useCallback)((function(e){j(!1),x(void 0),E.current&&E.current(e)}),[]);return i.a.createElement(s.a,{onOpen:I},n,C&&i.a.createElement(k,{onAnalyticsEvent:A,onError:g},i.a.createElement(o.Suspense,{fallback:null},i.a.createElement(r,Object(a.a)({},O,C,{onAnalyticsEvent:A,originProduct:u,onClose:P,onHandShake:T,plugins:w,env:v,redirectToWac:l})))))}),E=t("./node_modules/@atlassiansox/cross-flow-support/dist/esm/index.js");n.a=function(e){var n=!e.isAaMastered;return i.a.createElement(O,Object(a.a)({},e,{shouldUseCFFEOverride:function(){return!0},originProduct:"trello",redirectToWac:n}))}},"./node_modules/@atlassiansox/cross-flow-support/dist/esm/version.json":function(e,n){e.exports={name:"@atlassiansox/cross-flow-support",version:"0.26.0"}},"./node_modules/@atlassiansox/cross-flow-support/node_modules/tslib/tslib.es6.js":function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"a",(function(){return o})),t.d(n,"d",(function(){return i})),t.d(n,"c",(function(){return s}));var r=function(e,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])})(e,n)};function a(e,n){function t(){this.constructor=e}r(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var o=function(){return(o=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)};function i(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t}Object.create;function s(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i}Object.create}},0,[33]]);
//# sourceMappingURL=cross-flow-provider.d196d005139985d46aa0.js.map