/*! For license information please see board-sidebar-view.bb875ada4035bc6a808a.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"./app/common/lib/util/print.ts":function(e,t,r){"use strict";r.r(t),t.default=function(){navigator.vendor.includes("Apple")?document.execCommand("print"):window.print()}},"./app/scripts/data/latest-power-ups-message.js":function(e,t,r){var n=r("./node_modules/underscore/underscore.js"),i=r("./app/scripts/data/new-power-ups.js"),o=n.chain(i).values().max().value();e.exports=o>Date.now()?"NewPowerUps_".concat(o.toISOString().substr(0,10)):void 0},"./app/scripts/data/new-power-ups.js":function(e,t,r){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=r("./node_modules/underscore/underscore.js");e.exports=o.chain({"55a5d917446f51777421000d":"2016-08-07","56d5e249a98895a9797bebb9":"2016-08-23","570262ea1100fa611d7e200a":"2016-08-23","56cdf5f7071f133a93eb2363":"2016-08-23","57b47fb862d25a30298459b1":"2016-08-23"}).pairs().map((function(){var e=Array.from(arguments.length<=0?void 0:arguments[0]),t=n(e,2),r=t[0],i=t[1];return[r,new Date(Date.parse(i))]})).object().value()},"./app/scripts/data/stickers.js":function(e,t,r){e.exports={standard:{premium:!1,stickers:[{image:"check",url:r("./resources/images/stickers/check.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/check.png")},{width:200,height:200,url:r("./resources/images/stickers/check@2x.png")}]},{image:"heart",url:r("./resources/images/stickers/heart.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/heart.png")},{width:200,height:200,url:r("./resources/images/stickers/heart@2x.png")}]},{image:"warning",url:r("./resources/images/stickers/warning.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/warning.png")},{width:200,height:200,url:r("./resources/images/stickers/warning@2x.png")}]},{image:"clock",url:r("./resources/images/stickers/clock.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/clock.png")},{width:200,height:200,url:r("./resources/images/stickers/clock@2x.png")}]},{image:"smile",url:r("./resources/images/stickers/smile.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/smile.png")},{width:200,height:200,url:r("./resources/images/stickers/smile@2x.png")}]},{image:"laugh",url:r("./resources/images/stickers/laugh.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/laugh.png")},{width:200,height:200,url:r("./resources/images/stickers/laugh@2x.png")}]},{image:"huh",url:r("./resources/images/stickers/huh.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/huh.png")},{width:200,height:200,url:r("./resources/images/stickers/huh@2x.png")}]},{image:"frown",url:r("./resources/images/stickers/frown.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/frown.png")},{width:200,height:200,url:r("./resources/images/stickers/frown@2x.png")}]},{image:"thumbsup",url:r("./resources/images/stickers/thumbsup.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/thumbsup.png")},{width:200,height:200,url:r("./resources/images/stickers/thumbsup@2x.png")}]},{image:"thumbsdown",url:r("./resources/images/stickers/thumbsdown.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/thumbsdown.png")},{width:200,height:200,url:r("./resources/images/stickers/thumbsdown@2x.png")}]},{image:"star",url:r("./resources/images/stickers/star.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/star.png")},{width:200,height:200,url:r("./resources/images/stickers/star@2x.png")}]},{image:"rocketship",url:r("./resources/images/stickers/rocketship.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/rocketship.png")},{width:200,height:200,url:r("./resources/images/stickers/rocketship@2x.png")}]}]},taco:{premium:!0,stickers:[{image:"taco-love",url:r("./resources/images/stickers/taco-love.png"),scaled:[{width:140,height:140,url:r("./resources/images/stickers/taco-love.png")},{width:280,height:280,url:r("./resources/images/stickers/taco-love@2x.png")}]},{image:"taco-confused",url:r("./resources/images/stickers/taco-confused.png"),scaled:[{width:140,height:140,url:r("./resources/images/stickers/taco-confused.png")},{width:280,height:280,url:r("./resources/images/stickers/taco-confused@2x.png")}]},{image:"taco-cool",url:r("./resources/images/stickers/taco-cool.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/taco-cool.png")},{width:200,height:200,url:r("./resources/images/stickers/taco-cool@2x.png")}]},{image:"taco-angry",url:r("./resources/images/stickers/taco-angry.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/taco-angry.png")},{width:200,height:200,url:r("./resources/images/stickers/taco-angry@2x.png")}]},{image:"taco-celebrate",url:r("./resources/images/stickers/taco-celebrate.png"),scaled:[{width:140,height:140,url:r("./resources/images/stickers/taco-celebrate.png")},{width:280,height:280,url:r("./resources/images/stickers/taco-celebrate@2x.png")}]},{image:"taco-robot",url:r("./resources/images/stickers/taco-robot.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/taco-robot.png")},{width:200,height:200,url:r("./resources/images/stickers/taco-robot@2x.png")}]},{image:"taco-alert",url:r("./resources/images/stickers/taco-alert.png"),scaled:[{width:140,height:140,url:r("./resources/images/stickers/taco-alert.png")},{width:280,height:280,url:r("./resources/images/stickers/taco-alert@2x.png")}]},{image:"taco-active",url:r("./resources/images/stickers/taco-active.png"),scaled:[{width:140,height:140,url:r("./resources/images/stickers/taco-active.png")},{width:280,height:280,url:r("./resources/images/stickers/taco-active@2x.png")}]},{image:"taco-money",url:r("./resources/images/stickers/taco-money.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/taco-money.png")},{width:200,height:200,url:r("./resources/images/stickers/taco-money@2x.png")}]},{image:"taco-reading",url:r("./resources/images/stickers/taco-reading.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/taco-reading.png")},{width:200,height:200,url:r("./resources/images/stickers/taco-reading@2x.png")}]},{image:"taco-trophy",url:r("./resources/images/stickers/taco-trophy.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/taco-trophy.png")},{width:200,height:200,url:r("./resources/images/stickers/taco-trophy@2x.png")}]},{image:"taco-sleeping",url:r("./resources/images/stickers/taco-sleeping.png"),scaled:[{width:140,height:140,url:r("./resources/images/stickers/taco-sleeping.png")},{width:280,height:280,url:r("./resources/images/stickers/taco-sleeping@2x.png")}]},{image:"taco-pixel",url:r("./resources/images/stickers/taco-pixel.png"),scaled:[{width:140,height:140,url:r("./resources/images/stickers/taco-pixel.png")},{width:280,height:280,url:r("./resources/images/stickers/taco-pixel@2x.png")}]},{image:"taco-proto",url:r("./resources/images/stickers/taco-proto.png"),scaled:[{width:140,height:140,url:r("./resources/images/stickers/taco-proto.png")},{width:280,height:280,url:r("./resources/images/stickers/taco-proto@2x.png")}]},{image:"taco-embarrassed",url:r("./resources/images/stickers/taco-embarrassed.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/taco-embarrassed.png")},{width:200,height:200,url:r("./resources/images/stickers/taco-embarrassed@2x.png")}]},{image:"taco-clean",url:r("./resources/images/stickers/taco-clean.png"),scaled:[{width:140,height:140,url:r("./resources/images/stickers/taco-clean.png")},{width:280,height:280,url:r("./resources/images/stickers/taco-clean@2x.png")}]}]},pete:{premium:!0,stickers:[{image:"pete-happy",url:r("./resources/images/stickers/pete-happy.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/pete-happy.png")},{width:200,height:200,url:r("./resources/images/stickers/pete-happy@2x.png")}]},{image:"pete-love",url:r("./resources/images/stickers/pete-love.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/pete-love.png")},{width:200,height:200,url:r("./resources/images/stickers/pete-love@2x.png")}]},{image:"pete-broken",url:r("./resources/images/stickers/pete-broken.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/pete-broken.png")},{width:200,height:200,url:r("./resources/images/stickers/pete-broken@2x.png")}]},{image:"pete-alert",url:r("./resources/images/stickers/pete-alert.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/pete-alert.png")},{width:200,height:200,url:r("./resources/images/stickers/pete-alert@2x.png")}]},{image:"pete-talk",url:r("./resources/images/stickers/pete-talk.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/pete-talk.png")},{width:200,height:200,url:r("./resources/images/stickers/pete-talk@2x.png")}]},{image:"pete-vacation",url:r("./resources/images/stickers/pete-vacation.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/pete-vacation.png")},{width:200,height:200,url:r("./resources/images/stickers/pete-vacation@2x.png")}]},{image:"pete-confused",url:r("./resources/images/stickers/pete-confused.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/pete-confused.png")},{width:200,height:200,url:r("./resources/images/stickers/pete-confused@2x.png")}]},{image:"pete-shipped",url:r("./resources/images/stickers/pete-shipped.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/pete-shipped.png")},{width:200,height:200,url:r("./resources/images/stickers/pete-shipped@2x.png")}]},{image:"pete-busy",url:r("./resources/images/stickers/pete-busy.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/pete-busy.png")},{width:200,height:200,url:r("./resources/images/stickers/pete-busy@2x.png")}]},{image:"pete-completed",url:r("./resources/images/stickers/pete-completed.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/pete-completed.png")},{width:200,height:200,url:r("./resources/images/stickers/pete-completed@2x.png")}]},{image:"pete-space",url:r("./resources/images/stickers/pete-space.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/pete-space.png")},{width:200,height:200,url:r("./resources/images/stickers/pete-space@2x.png")}]},{image:"pete-sketch",url:r("./resources/images/stickers/pete-sketch.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/pete-sketch.png")},{width:200,height:200,url:r("./resources/images/stickers/pete-sketch@2x.png")}]},{image:"pete-ghost",url:r("./resources/images/stickers/pete-ghost.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/pete-ghost.png")},{width:200,height:200,url:r("./resources/images/stickers/pete-ghost@2x.png")}]},{image:"pete-award",url:r("./resources/images/stickers/pete-award.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/pete-award.png")},{width:200,height:200,url:r("./resources/images/stickers/pete-award@2x.png")}]},{image:"pete-music",url:r("./resources/images/stickers/pete-music.png"),scaled:[{width:100,height:100,url:r("./resources/images/stickers/pete-music.png")},{width:200,height:200,url:r("./resources/images/stickers/pete-music@2x.png")}]}]}}},"./app/scripts/lib/util/selection/has-selection-in.js":function(e,t){e.exports=function(e){var t=window.getSelection(),r=t.toString(),n=t.anchorNode;return!!r&&!!e.find(n).length}},"./app/scripts/views/archive/archive-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r("./app/scripts/views/archive/archived-cards-view.js"),d=r("./app/scripts/views/archive/archived-lists-view.js"),p=r("./app/scripts/lib/util/index.js"),f=r("./app/scripts/views/internal/view.js"),m=r("./app/scripts/lib/localize.js"),h=r("./node_modules/react/index.js"),g=r("./app/src/components/ComponentWrapper/index.ts").renderComponent,v=r("./app/scripts/views/templates/BoardArchive.js").BoardArchive,b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(k,e);var t,r,f,b,y=(t=k,function(){var e,r=l(t);if(c()){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function k(){return n(this,k),y.apply(this,arguments)}return r=k,b=[{key:"initClass",value:function(){this.prototype.viewTitleKey="archive",this.prototype.className="board-menu-content-frame",this.prototype.events={"click .js-switch-section":"didClickSwitchSections","input .js-search":"searchChanged"}}}],(f=[{key:"initialize",value:function(){return this.searchText=this.slot(""),this.cardsView=this.subview(u,this.model,{searchText:this.searchText}).render(),this.listsView=this.subview(d,this.model,{searchText:this.searchText}).render(),this.activeSubview=this.slot(this.cardsView)}},{key:"searchChanged",value:function(){return this.searchText.set(this.$searchInput.val().trim())}},{key:"didClickSwitchSections",value:function(e){var t,r,n;return this.activeSubview.set((t=this.activeSubview.get(),r=this.cardsView,n=this.listsView,t===r?n:r)),this.$searchInput.focus(),p.stop(e)}},{key:"injectSubview",value:function(e){return this.$(".js-archive-content").append(e.el),e.didBecomeActive()}},{key:"remove",value:function(){return this.unmountBoardArchive&&this.unmountBoardArchive(),o(l(k.prototype),"remove",this).apply(this,arguments)}},{key:"renderOnce",value:function(){var e=this;return this.unmountBoardArchive||(this.unmountBoardArchive=g(h.createElement(v,null),this.$el[0])),this.$searchInput=this.$(".js-search"),this.subscribeChanges(this.activeSubview,{in:this.injectSubview,out:e=>e.$el.detach()}),this.watch("activeSubview",(function(t){var r=t===e.cardsView?"switch to archived lists":"switch to archived cards";return e.$(".js-switch-section").text(m(r))})),this.watch("activeSubview.isLoading",(function(t){return e.$(".js-loading-spinner").toggleClass("hide",!t),e.$(".js-archive-content").toggleClass("hide",t)})),this}}])&&i(r.prototype,f),b&&i(r,b),k}(f);b.initClass(),e.exports=b},"./app/scripts/views/archive/archived-card-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r("./packages/jquery/index.js"),d=r("./packages/atlassian-analytics/index.ts").Analytics,p=r("./app/scripts/views/card/card-view.js"),f=r("./app/scripts/views/card/card-limits-error.js").maybeDisplayLimitsErrorOnCardOpen,m=r("./app/scripts/views/lib/confirm.js"),h=r("./app/scripts/controller/index.js"),g=r("./app/scripts/views/lib/dialog.js"),v=r("./packages/feature-flag-client/index.ts").featureFlagClient,b=r("./app/scripts/lib/util/index.js"),y=r("./app/scripts/views/internal/view.js"),k=r("./packages/analytics/index.ts").track,w=r("./node_modules/react/index.js"),j=r("./app/src/components/ComponentWrapper/index.ts").renderComponent,x=r("./app/scripts/views/templates/ArchivedCardOptions.js").ArchivedCardOptions,_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(S,e);var t,r,y,_,O=(t=S,function(){var e,r=l(t);if(c()){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function S(){return n(this,S),O.apply(this,arguments)}return r=S,_=[{key:"initClass",value:function(){this.prototype.tagName="div",this.prototype.className="archived-list-card",this.prototype.events={"click .list-card":"openCard","click .js-delete":"deleteModel","click .js-reopen":"reopen"},this.prototype.vigor=this.VIGOR.NONE}}],(y=[{key:"initialize",value:function(){return null==this.$reactRoot&&(this.$reactRoot=u("<div></div>")),this.linkCardsEnabled=v.get("wildcard.link-cards",!1),this.sendGASEvent=v.get("dataeng.gasv3-event-tracking",!1)}},{key:"render",value:function(){var e=this.subview(p,this.model,{dontFilter:!0,quickEditHidden:!0});e.render(),this.$el.append(e.el);var t={editable:this.model.editable(),canDelete:this.options.canDelete,canReopen:null!=this.model.getList(),reOpenText:this.options.reOpenText};return this.$el.append(this.$reactRoot),this.unmountArchivedCardOptions||(this.unmountArchivedCardOptions=j(w.createElement(x,t),this.$reactRoot[0])),o(l(S.prototype),"render",this).call(this)}},{key:"remove",value:function(){return this.unmountArchivedCardOptions&&this.unmountArchivedCardOptions(),o(l(S.prototype),"remove",this).apply(this,arguments)}},{key:"openCard",value:function(e){"link"===this.model.get("cardRole")&&this.linkCardsEnabled||(b.stop(e),h.showCardDetail(this.model),g.calcPos())}},{key:"deleteModel",value:function(e){var t,r,n=this;b.stop(e),m.toggle("delete card",{elem:(t=u(e.target).closest(".js-delete"),r=function(e){return e[0]},null!=t?r(t):void 0),model:this.model,confirmBtnClass:"nch-button nch-button--danger",fxConfirm:function(){if(n.model.destroy(),n.unmountArchivedCardOptions&&n.unmountArchivedCardOptions(),k("Card","Delete","Via Archive"),n.sendGASEvent)return d.sendTrackEvent({action:"deleted",actionSubject:"card",source:"archiveScreen",containers:{card:{id:n.model.id},list:{id:n.model.getList().id},board:{id:n.model.getBoard().id}}})}})}},{key:"reopen",value:function(e){var t=this;b.preventDefault(e);var r={$elem:u(e.target),hasAttachments:this.model.attachmentList.length>0,destinationBoard:this.model.getBoard(),destinationList:this.model.getList()};if(!f(r)){var n=d.startTask({taskName:"edit-card",subTask:"closed",source:"archiveScreen"});return this.model.update({closed:!1,traceId:n},(function(e,r){if(e)throw d.taskFailed({taskName:"edit-card",subTask:"closed",traceId:n,source:"archiveScreen",error:e});if(d.sendUpdatedCardFieldEvent({field:"closed",source:"archiveScreen",containers:{card:{id:r.id},board:{id:r.idBoard},list:{id:r.idList}},attributes:{taskId:n}}),d.taskSucceeded({taskName:"edit-card",subTask:"closed",traceId:n,source:"archiveScreen"}),k("Card","Reopen","Via Archive"),t.unmountArchivedCardOptions&&t.unmountArchivedCardOptions(),t.sendGASEvent)return d.sendTrackEvent({action:"reopened",actionSubject:"card",source:"archiveScreen",containers:{card:{id:t.model.id},list:{id:t.model.getList().id},board:{id:t.model.getBoard().id}}})})),!1}}}])&&i(r.prototype,y),_&&i(r,_),S}(y);_.initClass(),e.exports=_},"./app/scripts/views/archive/archived-cards-view.js":function(e,t,r){function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=r("./packages/atlassian-analytics/index.ts").Analytics,f=r("./app/scripts/views/archive/archived-card-view.js"),m=r("./app/scripts/views/archive/search-help-view.js"),h=r("./app/scripts/lib/dates.js"),g=r("./packages/feature-flag-client/index.ts").featureFlagClient,v=r("./app/scripts/db/model-loader.js"),b=r("./app/scripts/views/internal/view.js"),y=r("./node_modules/underscore/underscore.js"),k=r("./app/scripts/lib/localize.js"),w=r("./node_modules/effing/lib/index.js"),j=r("./packages/analytics/index.ts").track,x=r("./app/scripts/views/lib/pop-over.js"),_=r("./app/scripts/lib/util/index.js"),O=r("./node_modules/react/index.js"),S=r("./app/src/components/ComponentWrapper/index.ts").renderComponent,C=r("./app/scripts/views/templates/ArchivedCards.js").ArchivedCards,E=void 0,P=void 0,T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(A,e);var t,r,i,b,T=(t=A,function(){var e,r=d(t);if(u()){var n=d(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return l(this,e)});function A(){return o(this,A),T.apply(this,arguments)}return r=A,b=[{key:"initClass",value:function(){this.prototype.CARDS_PER_PAGE=30,this.prototype.SEARCH_LIMIT=50,E={},P=function(e){var t=E;return{lease(){var r=function r(){t!==E&&r!==t||e.apply(this,arguments)};return t=r,r}}},this.prototype.events={"click .js-more-cards":"getMoreCards","click .js-show-search-tips":"showSearchTips"},this.prototype.vigor=this.VIGOR.SOME}}],(i=[{key:"initialize",value:function(e){var t=this,r=e.searchText;this.searchText=r,this.isLoadingInitialCards=this.slot(!1),this.isLoadingMoreCards=this.slot(!1),this.isLoadingSearchResults=this.slot(!1),this.tooManySearchResults=this.slot(!1),this.isLoading=this.using(this.isLoadingInitialCards.or(this.isLoadingSearchResults)),this.isSearching=this.using(this.searchText.map((function(e){return e.length>0})).distinct()),this.hasMoreCards=this.slot(!1),this.searchResults=this.slot([]),this.sortedContiguousCards=this.slot([]),this.sendGASEvent=g.get("dataeng.gasv3-event-tracking",!1),this.updateSearchCallback=P((function(e){var r=e.map((function(e){return t.modelCache.get("Card",e.id)}));return t.tooManySearchResults.set(r.length===t.SEARCH_LIMIT),t.searchResults.set(r),t.isLoadingSearchResults.set(!1)}));var i=function(e){return t.sortedContiguousCards.set(y.without(t.sortedContiguousCards.get(),e)),t.searchResults.set(y.without(t.searchResults.get(),e))};return this.listenTo(this.modelCache,{"remove:Card":i,"change:Card:closed":function(e){e.get("idBoard")===t.model.id&&(e.get("closed")?t.sortedContiguousCards.set([e].concat(n(Array.from(t.sortedContiguousCards.get())))):i(e))}}),this.cards=this.using(this.isSearching.if(this.searchResults,this.sortedContiguousCards))}},{key:"didBecomeActive",value:function(){var e=this;if(!this.hasBeenActiveBefore){this.hasBeenActiveBefore=!0;var t={limit:this.CARDS_PER_PAGE};return this.isLoadingInitialCards.set(!0),v.loadClosedCards(this.model.id,t).tap(w(this,"didLoadContiguousCards")).finally((function(){return e.isLoadingInitialCards.set(!1)})).done()}}},{key:"didLoadContiguousCards",value:function(e){var t=this;this.hasMoreCards.set(e.length===this.CARDS_PER_PAGE);var r=y.sortBy(e,(function(e){return-t.cardSortRank(e)})),i=[].concat(n(Array.from(this.sortedContiguousCards.get())),n(Array.from(r)));return this.sortedContiguousCards.set(y.uniq(i))}},{key:"cardSortRank",value:function(e){var t,r,n,i;return null!=(r=h.parse(e.get("dateLastActivity")),n="getTime",i=function(e){return e.getTime()},t=null!=r&&"function"==typeof r[n]?i(r,n):void 0)?t:null}},{key:"getMoreCards",value:function(){var e=this,t=y.last(this.sortedContiguousCards.get()),r={limit:this.CARDS_PER_PAGE,before:null!=t?this.cardSortRank(t):null};return this.isLoadingMoreCards.set(!0),v.loadClosedCards(this.model.id,r).tap(w(this,"didLoadContiguousCards")).finally((function(){return e.isLoadingMoreCards.set(!1)})).done()}},{key:"removeSubviews",value:function(e){return this.unmountArchivedCards&&this.unmountArchivedCards(),a(d(A.prototype),"removeSubviews",this).call(this,e)}},{key:"remove",value:function(){return this.unmountArchivedCards&&this.unmountArchivedCards(),a(d(A.prototype),"remove",this).apply(this,arguments)}},{key:"renderOnce",value:function(){this.unmountArchivedCards&&this.unmountArchivedCards(),this.unmountArchivedCards=S(O.createElement(C,null),this.$el[0]),this.watch("isLoadingMoreCards",(function(e){return this.$(".js-more-cards").attr("disabled",e)}));var e=this.hasMoreCards.and(this.isSearching.not());this.subscribe(e,(function(e){return this.$(".js-more-cards").toggleClass("hide",!e)})),this.$(".js-search-message").html(k("too many results",{limit:"<strong>".concat(this.SEARCH_LIMIT.toString(),"+</strong>"),learnMoreLink:'<a class="js-show-search-tips" href="#">'.concat(k("learn more"),"</a>")},{raw:!0}));var t=this.tooManySearchResults;this.subscribe(t,(function(e){return this.$(".js-search-message").toggleClass("hide",!e)})),this.watch("isSearching",(function(e){var t=e?"no results":"no archived cards";return this.$(".js-empty-message").text(k(t))})),this.watch("cards",(function(e){return this.$(".js-empty-message").toggleClass("hide",e.length>0)})),this.watch("isLoadingSearchResults",(function(e){return this.$(".js-search-loading").toggleClass("hide",!e)}));var r=this.debounce(this.loadSearchResults,400);return this.subscribe(this.searchText.filter((function(e){return e.length>0})),(function(){return this.isLoadingSearchResults.set(!0),r.call(this)})),this.subscribe(this.cards,this.frameDebounce(this.renderCards))}},{key:"loadSearchResults",value:function(){var e={query:"is:archived ".concat(this.searchText.get()),modelTypes:"cards",idBoards:this.model.id,card_stickers:!0,card_attachments:"cover",partial:!0,cards_limit:this.SEARCH_LIMIT};return v.loadSearchData(e).get("cards").then(this.updateSearchCallback.lease()).done()}},{key:"renderCards",value:function(){var e=this,t=this.$(".js-archive-items");t.children().detach();var r=Array.from(this.cards.get()).map((function(t){return e.subview(f,t,{reOpenText:k("unarchive card"),canDelete:!0})}));this.appendSubviews(r,t)}},{key:"showSearchTips",value:function(e){_.stop(e),j("Board Menu","Archived Cards Search","Learn More"),this.sendGASEvent&&p.sendClickedLinkEvent({linkName:"showSearchTipsLink",source:"archiveScreen",containers:{board:{id:this.model.id}}}),x.toggle({elem:e.target,view:m})}}])&&s(r.prototype,i),b&&s(r,b),A}(b);T.initClass(),e.exports=T},"./app/scripts/views/archive/archived-list-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("./packages/jquery/index.js"),u=r("./packages/analytics/index.ts").track,d=r("./app/scripts/lib/util/index.js"),p=r("./app/scripts/views/archive/archived-model-view.js"),f=r("./app/scripts/views/card/card-limits-error.js").maybeDisplayLimitsErrorOnCardOpen,m=r("./app/scripts/views/templates/archive_item.js"),h=r("./packages/atlassian-analytics/index.ts").Analytics,g=r("./packages/feature-flag-client/index.ts").featureFlagClient,v=r("./app/scripts/db/model-loader.js");e.exports=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(k,e);var t,r,p,b,y=(t=k,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function k(){return n(this,k),y.apply(this,arguments)}return r=k,(p=[{key:"initialize",value:function(){return this.sendGASEvent=g.get("dataeng.gasv3-event-tracking",!1)}},{key:"reopen",value:function(e){var t=this;return d.preventDefault(e),v.loadListCards(this.model.id).then((function(){var r=!1;t.model.cardList.forEach((function(e){var t,n,i,o=null!=(n=e.get("badges"),i=function(e){return e.attachments},t=null!=n?i(n):void 0)?t:0;return r=r||o>0}));var n={$elem:l(e.target),hasAttachments:r,destinationBoard:t.model.getBoard()};if(!f(n))return t.model.update({closed:!1},(function(e){if(null!=e)throw t.model.update({closed:!0}),u("List","Reopen","Via Archive","Failed"),t.sendGASEvent&&h.sendTrackEvent({action:"reopened",actionSubject:"list",source:"archiveScreen",containers:{list:{id:t.model.id},board:{id:t.model.getBoard().id}},attributes:{succeeded:!1}}),e;if(u("List","Reopen","Via Archive"),t.sendGASEvent)return h.sendTrackEvent({action:"reopened",actionSubject:"list",source:"archiveScreen",containers:{list:{id:t.model.id},board:{id:t.model.getBoard().id}},attributes:{succeeded:!0}})}))})),!1}},{key:"render",value:function(){return this.$el.html(m({name:this.model.get("name"),url:"function"==typeof this.model.getUrl?this.model.getUrl():void 0,reOpenText:this.options.reOpenText,canDelete:this.canDelete(),canReopen:this.canReopen(),canLeave:this.canLeave(),deleting:"function"==typeof this.model.isDeleting?this.model.isDeleting():void 0})),this}}])&&i(r.prototype,p),b&&i(r,b),k}(p)},"./app/scripts/views/archive/archived-lists-view.js":function(e,t,r){function n(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=r("./app/scripts/views/archive/archived-list-view.js"),h=r("./app/scripts/db/model-loader.js"),g=r("./app/scripts/lib/util/index.js"),v=r("./app/scripts/views/internal/view.js"),b=r("./node_modules/underscore/underscore.js"),y=r("./app/scripts/lib/localize.js"),k=r("./node_modules/react/index.js"),w=r("./app/src/components/ComponentWrapper/index.ts").renderComponent,j=r("./app/scripts/views/templates/ArchivedLists.js").ArchivedLists,x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(x,e);var t,r,o,s,v=(t=x,function(){var e,r=f(t);if(p()){var n=f(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return d(this,e)});function x(){return a(this,x),v.apply(this,arguments)}return r=x,s=[{key:"initClass",value:function(){this.prototype.hasBeenActiveBefore=!1,this.prototype.vigor=this.VIGOR.SOME}}],(o=[{key:"initialize",value:function(e){var t=this,r=e.searchText;return this.searchText=r,this.isLoading=this.slot(!0),this.allArchivedLists=this.slot([]),this.sortedFilteredLists=this.allArchivedLists.combine(this.searchText).map((function(){var e=Array.from(arguments.length<=0?void 0:arguments[0]),t=i(e,2),r=t[0],n=t[1];if(""===n)return r;var o=g.buildFuzzyMatcher(n);return b.filter(r,(function(e){return o(e.get("name"))}))})).map((function(e){return b.sortBy(e,(function(e){return e.get("name")}))})),this.using(this.sortedFilteredLists),this.listenTo(this.modelCache,"change:List:closed",(function(e){return e.get("closed")?t.allArchivedLists.set([e].concat(n(Array.from(t.allArchivedLists.get())))):t.allArchivedLists.set(b.without(t.allArchivedLists.get(),e))}))}},{key:"remove",value:function(){return this.unmountArchivedLists&&this.unmountArchivedLists(),l(f(x.prototype),"remove",this).apply(this,arguments)}},{key:"didBecomeActive",value:function(){var e=this;this.hasBeenActiveBefore||(this.hasBeenActiveBefore=!0,h.loadArchivedLists(this.model.id).then((function(t){var r=e.modelCache.find("List",(function(t){return t.get("idBoard")===e.model.id&&t.get("closed")}));return e.allArchivedLists.set(r),e.isLoading.set(!1)})))}},{key:"renderOnce",value:function(){return this.unmountArchivedLists&&this.unmountArchivedLists(),this.unmountArchivedLists=w(k.createElement(j,null),this.$el[0]),this.watch("searchText",(function(e){var t=0===e.length?"no archived lists":"no results";return this.$(".js-empty-message").text(y(t))})),this.watch("sortedFilteredLists",(function(e){return this.$(".js-empty-message").toggleClass("hide",e.length>0)})),this.watch("sortedFilteredLists",this.frameDebounce(this.renderLists))}},{key:"renderLists",value:function(){var e=this;this.$(".js-archive-items").children().detach();var t=Array.from(this.sortedFilteredLists.get()).map((function(t){return e.subview(m,t,{reOpenText:y("unarchive list"),canDelete:!1})}));return this.appendSubviews(t,this.$(".js-archive-items")),this}}])&&c(r.prototype,o),s&&c(r,s),x}(v);x.initClass(),e.exports=x},"./app/scripts/views/archive/archived-model-view.js":function(e,t,r){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=r("./packages/jquery/index.js"),p=r("./app/scripts/views/lib/confirm.js"),f=r("./app/scripts/views/lib/pop-over.js"),m=r("./app/scripts/views/board/reopen-board-popover-view.js"),h=r("./app/scripts/db/model-loader.js"),g=r("./node_modules/bluebird/js/browser/bluebird.js"),v=r("./app/scripts/lib/util/index.js"),b=r("./app/scripts/views/internal/view.js"),y=r("./packages/analytics/index.ts").track,k=r("./app/scripts/lib/localize.js"),w=r("./app/scripts/db/auth.js");p=r("./app/scripts/views/lib/confirm.js");var j=r("./app/scripts/views/templates/archive_item.js"),x=r("./packages/atlassian-analytics/index.ts").Analytics,_=r("./packages/feature-flag-client/index.ts").featureFlagClient,O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(S,e);var t,r,i,b,O=(t=S,function(){var e,r=u(t);if(l()){var n=u(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return c(this,e)});function S(){return o(this,S),O.apply(this,arguments)}return r=S,b=[{key:"initClass",value:function(){this.prototype.tagName="li",this.prototype.className="u-clearfix",this.prototype.events={"click .js-reopen":"reopen","click .js-delete":"delete","click .js-leave":"leaveConfirm"}}}],(i=[{key:"initialize",value:function(){if(this.sendGASEvent=_.get("dataeng.gasv3-event-tracking",!1),this.me=w.me(),this.listenTo(this.model,"deleting",this.render),null!=this.model.getBoard)return this.listenTo(this.model.getBoard(),"change:limits",this.render)}},{key:"_checkTargetCapacity",value:function(){var e=!0;return null!=this.model.getBoard&&(e=this.model.getBoard().hasCapacity(this.model)),e}},{key:"canReopen",value:function(){var e=this._checkTargetCapacity();return null!=this.model.owned?e&&this.model.owned():e&&this.model.editable()}},{key:"canDelete",value:function(){return"function"==typeof this.model.owned?this.model.owned():void 0}},{key:"canLeave",value:function(){return null!=this.model.owned&&!this.model.owned()}},{key:"render",value:function(){var e;return this.$el.html(j({name:this.model.get("name"),orgName:(e=this.model.getOrganization())?e.get("displayName"):this.model.hasOrganization()?k(["templates","board_header","private-team"]):k("personal"),url:"function"==typeof this.model.getUrl?this.model.getUrl():void 0,reOpenText:this.options.reOpenText,canDelete:this.canDelete(),canReopen:this.canReopen(),canLeave:this.canLeave(),deleting:"function"==typeof this.model.isDeleting?this.model.isDeleting():void 0,reopenDisabled:this.options.reopenDisabled})),this}},{key:"reopen",value:function(e){var t=this;v.stop(e);var r=this.model.getOrganization();if(!(null!=r?r.isAtOrOverFreeBoardLimit():void 0)){var i=[this.model.getNewBillableGuests()];return!r||r.adminList&&0!==r.adminList.length||i.push(h.loadOrganizationMembersMinimal(r.id)),g.all(i).then((function(){var e=Array.from(arguments.length<=0?void 0:arguments[0]),i=n(e,1),o=i[0],s=o.newBillableGuests,a=o.availableLicenseCount;return s.length>0?f.show({elem:t.$(".js-reopen"),view:new m({board:t.model,org:r,newBillableGuests:s,availableLicenseCount:a,onReopen:function(){if(y(t.model.typeName,"Reopen","Via Archive"),t.sendGASEvent)return x.sendTrackEvent({action:"reopened",actionSubject:"board",source:"closedBoardsScreen",containers:{board:{id:t.model.id}}})}})}):(t.model.reopen(),y(t.model.typeName,"Reopen","Via Archive"),t.sendGASEvent?x.sendTrackEvent({action:"reopened",actionSubject:"board",source:"closedBoardsScreen",containers:{board:{id:t.model.id}}}):void 0)}))}}},{key:"delete",value:function(e){var t=this;return v.stop(e),p.toggle("delete board",{elem:e.target,model:this.model,confirmBtnClass:"nch-button nch-button--danger",fxConfirm:function(e){return t.model.startDelete().then((function(){if(y("Board","Delete","Via Closed Boards List"),t.sendGASEvent)return x.sendTrackEvent({action:"deleted",actionSubject:"board",source:"closedBoardsScreen",containers:{board:{id:t.model.id}}})})).done()}})}},{key:"leaveConfirm",value:function(e){var t=this;v.stop(e),y("Closed Boards","Open Leave Menu"),this.sendGASEvent&&x.sendUIEvent({action:"clicked",actionSubject:"menu",source:"leaveBoardMenu",containers:{board:{id:this.model.id}}});var r=this.me.removeMembershipConfirmationKey(this.model);p.toggle(r,{elem:d(e.target).closest("a"),confirmBtnClass:"nch-button nch-button--danger",fxConfirm:function(e){if(t.model.removeMember(t.me),y("Board","Leave Board","Via Closed Boards List"),t.sendGASEvent)return x.sendTrackEvent({action:"left",actionSubject:"board",source:"closedBoardsScreen",containers:{board:{id:t.model.id}}})}})}}])&&s(r.prototype,i),b&&s(r,b),S}(b);O.initClass(),e.exports=O},"./app/scripts/views/archive/search-help-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("./app/scripts/views/internal/view.js"),u=r("./app/scripts/views/templates/search_help_popover.js"),d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,e);var t,r,l,d,p=(t=f,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function f(){return n(this,f),p.apply(this,arguments)}return r=f,d=[{key:"initClass",value:function(){this.prototype.viewTitleKey="help"}}],(l=[{key:"render",value:function(){return this.$el.html(u()),this}}])&&i(r.prototype,l),d&&i(r,d),f}(l);d.initClass(),e.exports=d},"./app/scripts/views/board-menu/BoardSidebarPuPUpsell.tsx":function(e,t,r){"use strict";r.r(t),r.d(t,"BoardSidebarPuPUpsell",(function(){return f}));var n=r("./node_modules/react/index.js"),i=r.n(n),o=r("./app/src/components/UpgradePrompts/index.ts"),s=r("./packages/test-ids/index.ts"),a=r("./app/common/lib/util/i18n/index.ts"),c=r("./packages/analytics/index.ts"),l=r("./packages/feature-flag-client/index.ts"),u=r("./packages/nachos/icons/power-up.tsx"),d=r("./packages/nachos/icons/private.tsx"),p=Object(a.forNamespace)("upgrade prompt"),f=function(e){var t=e.billingUrl,r=e.orgId,n=Object(l.useFeatureFlag)("btg.upgrade-prompt-audit",!1);return i.a.createElement("span",{className:"board-menu-navigation-item-link disabled"},i.a.createElement("span",{className:"board-menu-navigation-item-link-icon mod-upsell-slot"},i.a.createElement(d.a,{size:"small"})),n?i.a.createElement(o.UpgradeSmartComponent,{orgId:r||"",promptId:"boardMenuDrawerPromptFull"}):i.a.createElement(o.UpgradePromptFull,{content:p(["board menu","power ups","content"]),headline:p(["board menu","power ups","headline"]),cta:p("learn more"),orgId:r,ctaLink:t,ctaOnClick:function(){Object(c.trackUe)({category:c.Noun.BOARD_MENU,verb:c.Verb.OPENS,directObj:c.Noun.BC_MODAL,method:"by clicking full upgrade prompt in board menu pup section"})},icon:i.a.createElement(u.a,null),source:"boardMenuDrawer",testId:s.UpgradePromptTestIds.PuPsUpgradePrompt}))}},"./app/scripts/views/board-menu/about-this-board-admin-list-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("./app/scripts/views/internal/view.js"),u=r("./app/scripts/views/internal/templates.js"),d=r("./app/scripts/views/member-menu-profile/member-mini-profile-view.js"),p=r("./packages/atlassian-analytics/index.ts").Analytics,f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(g,e);var t,l,f,m,h=(t=g,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function g(){return n(this,g),h.apply(this,arguments)}return l=g,m=[{key:"initClass",value:function(){this.prototype.viewTitleKey="multi admin list"}}],(f=[{key:"initialize",value:function(){return this.listenTo(this.model)}},{key:"render",value:function(){var e=this.model.toJSON();return featureFlagClient.get("dataeng.gasv3-event-tracking",!1)&&p.sendScreenEvent({name:"aboutThisBoardAdminListInlineDialog",containers:{board:{id:this.model.id}}}),this.$el.html(u.fill(r("./app/scripts/views/templates/popover_about_this_board_admin_list.js"),e)),this.renderAdminList(),this}},{key:"renderAdminList",value:function(){var e=this,t=this.$(".js-show-all-admins"),r=this.model.orderedVisibleAdmins(),n=Array.from(r).map((function(t){return e.subview(d,t,{board:e.model})}));return this.ensureSubviews(n,t)}}])&&i(l.prototype,f),m&&i(l,m),g}(l);f.initClass(),e.exports=f},"./app/scripts/views/board-menu/board-collections-select-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r("./app/scripts/db/auth.js"),d=r("./app/scripts/views/organization/add-tag-view.js"),p=r("./app/scripts/views/lib/pop-over.js"),f=r("./app/scripts/lib/util/index.js"),m=r("./app/scripts/views/internal/view.js"),h=r("./app/scripts/controller/index.js"),g=r("./packages/analytics/index.ts").track,v=r("./node_modules/underscore/underscore.js"),b=r("./packages/jquery/index.js"),y=r("./packages/atlassian-analytics/index.ts"),k=y.Analytics,w=y.tracingCallback,j=r("./packages/feature-flag-client/index.ts").featureFlagClient,x=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_collections"),_=x.renderable((function(e,t){if(e)return x.ul(".select-tags-list",(function(){return Array.from(e).map((function(e){return x.li(".select-tags-list-item.js-tag-item",{"data-id-tag":e.id},(function(){return x.a(".select-tags-list-item-name-link.js-toggle-tag",(function(){return t&&x.icon("check",{class:"select-tags-list-item-name-link-check-icon"}),x.text(e.get("name"))}))}))}))}))})),O=x.renderable((function(e){return _(e.associated,!0),_(e.notAssociated,!1)})),S=x.renderable((function(e){e.board;var t=e.collectionsEnabled,n=e.billingUrl,i=e.orgUrl,o=e.hasTags,s=e.hideExplainer;return t?(s||x.div(".collections-info",(function(){return x.span(".collections-explainer-close.js-close-explainer",(function(){return x.icon("close")})),x.img(".collections-image",{src:r("./resources/images/collections/business-class-feature-roadmap.png")}),x.p((function(){return x.format("collections-let-you-group-and-filter")})),x.p(".js-learn-more",(function(){return x.format("learn-more-about-collections")}))})),x.div(".collections-select-lists",(function(){return o?(x.div(".has-collections",(function(){return x.p(".js-team-page",(function(){return x.format("visit-team-page-create-some",{orgUrl:i})})),x.a(".quiet-button.full.create-collection-btn.js-add-tag",{href:"#"},(function(){return x.format("create-collection")}))})),x.input(".js-collections-search",{type:"text",placeholder:x.l("search-collections"),autocomplete:"off"}),x.div(".js-filtered-collections")):x.div(".no-collections",(function(){return x.p((function(){return x.format("no-collections")})),x.p(".js-team-page",(function(){return x.format("visit-team-page-create-some",{orgUrl:i})})),x.a(".quiet-button.full.create-collection-btn.js-add-tag",{href:"#"},(function(){return x.format("create-collection")}))}))}))):void x.div(".collections-upsell.ads-layouts-experiment",(function(){return x.div(".collections-upsell-body",(function(){return x.h4(".collections-upsell-header",(function(){return x.format("ads-title")})),x.p((function(){return x.format("collections-let-you-group-and-filter")})),x.a(".js-learn-more",{href:"/business-class",target:"_blank"},(function(){return x.format("ads-learn-more")})),x.div(".collections-upgrade-action",(function(){return n?x.a(".nch-button.nch-button--primary.js-upgrade",{href:n},(function(){return x.format("ads-upgrade")})):x.a(".nch-button.nch-button--primary.js-add-team",{href:"#"},(function(){return x.format("ads-upgrade")}))}))}))}))})),C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(_,e);var t,r,m,y,x=(t=_,function(){var e,r=l(t);if(c()){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function _(){return n(this,_),x.apply(this,arguments)}return r=_,y=[{key:"initClass",value:function(){this.prototype.className="board-menu-collections-select",this.prototype.noPadding=!0,this.prototype.events={"click .js-add-tag":"addTag","keyup .js-collections-search":"renderFilteredCollections","click .js-toggle-tag"(e){return this.toggleTag(function(e){return b(e.target).closest(".js-tag-item")[0].getAttribute("data-id-tag")}(e))},"click .js-add-team":"addTeam","click .js-close-explainer":"closeExplainer","click .js-learn-more a"(e){if(g("Board Menu","Collections Menu","Clicks Learn More Link"),this.sendGASEvent)return k.sendClickedLinkEvent({linkName:"learnMoreLink",source:"boardMenuDrawerCollectionsScreen"})},"click .js-team-page a"(e){if(g("Board Menu","Collections Menu","Clicks Team Page Link"),this.sendGASEvent)return k.sendClickedLinkEvent({linkName:"orgPageLink",source:"boardMenuDrawerCollectionsScreen"})},"click .js-upgrade"(e){if(g("Board Menu","Collections Menu","Upgrade Button"),this.sendGASEvent)return k.sendClickedButtonEvent({buttonName:"upgradeButton",source:"boardMenuDrawerCollectionsScreen",containers:{board:{id:this.model.id},organization:{id:this.model.getOrganization().id}}})}},this.prototype.viewTitleKey="pick tags"}}],(m=[{key:"initialize",value:function(){return this.sidebarView=this.options.sidebarView,this.organization=(null!=this.options?this.options.org:void 0)||this.model.getOrganization(),this.collectionsEnabled=null!=this.organization&&this.organization.isFeatureEnabled("tags"),this.listenTo(this.model,"change:idOrganization",this.refereshOrganization),this.listenTo(this.model,"change:idTags",this.render),this.listenTo(u.me(),"change:oneTimeMessagesDismissed",this.render),this.collectionsEnabled&&this.listenTo(this.organization.tagList,"add remove reset change",this.render),this.sendGASEvent=j.get("dataeng.gasv3-event-tracking",!1),o(l(_.prototype),"initialize",this).apply(this,arguments)}},{key:"addTag",value:function(e){return f.stop(e),g("Board Menu","Collections Menu","Open Create Tag Menu"),this.sendGASEvent&&k.sendClickedLinkEvent({linkName:"createCollectionLink",source:"boardMenuDrawerCollectionsScreen",containers:{board:{id:this.model.id},organization:{id:this.model.getOrganization().id}}}),p.toggle({elem:e.target,view:d,options:{model:this.organization,modelCache:this.modelCache,boardView:!0}})}},{key:"toggleTag",value:function(e){var t=this;g("Board Menu","Collections Menu","Toggle Collections");var r=this.model.getIdTags().includes(e),n=k.startTask({taskName:"edit-board",subTask:"idTags",source:"boardMenuDrawerCollectionsScreen"});return this.model.toggleTag(e,n,w({taskName:"edit-board",subTask:"idTags",traceId:n,source:"boardMenuDrawerCollectionsScreen"},(function(i){var o=t.model.get("id"),s=t.model.get("idOrganization");i||k.sendTrackEvent({action:"toggled",actionSubject:"collection",source:"boardMenuDrawerCollectionsScreen",attributes:{taskId:n,idCollection:e,toggleOff:r},containers:{board:{id:o},organization:{id:s}}})})))}},{key:"addTeam",value:function(e){return f.stop(e),g("Board Menu","Collections Menu","Lets Add To Team"),this.sendGASEvent&&k.sendClickedButtonEvent({buttonName:"addTeamFromCollectionsButton",source:"boardMenuDrawerCollectionsScreen",containers:{board:{id:this.model.id},organization:{id:this.model.getOrganization().id}}}),this.model.trigger("add-to-team")}},{key:"closeExplainer",value:function(){if(u.me().dismiss("CollectionsExplainer"),g("Board Menu","Collections Menu","Dismiss Collections Explainer"),this.sendGASEvent)return k.sendDismissedComponentEvent({componentType:"overlay",componentName:"collectionsExplainerOverlay",source:"boardMenuDrawerCollectionsScreen"})}},{key:"filterTagsBySearch",value:function(e){var t=this._searchVal().toLowerCase();return v.isEmpty(t)?e:v.filter(e,(function(e){return E(e.get("name"),(function(e){return e.toLowerCase().indexOf(t)}))>-1}))}},{key:"filterTagsByAssociation",value:function(e,t){return v.groupBy(e,(function(e){return Array.from(t).includes(e.id)?"associated":"notAssociated"}))}},{key:"_searchVal",value:function(){var e;return null!=(e=E(this.$(".js-collections-search").val(),(function(e){return e.trim()})))?e:""}},{key:"renderFilteredCollections",value:function(){if(null!=this.organization?this.organization.tagList.models.length:void 0){var e=this.filterTagsByAssociation(this.filterTagsBySearch(this.organization.tagList.models),this.model.getIdTags());return this.$(".js-filtered-collections").empty().append(O(e))}}},{key:"refereshOrganization",value:function(){var e=this.modelCache.get("Organization",this.model.previous("idOrganization")),t=this.model.getOrganization();return null!=e&&this.stopListening(e.tagList),this.organization=t,this.collectionsEnabled=null!=this.organization&&this.organization.isFeatureEnabled("tags"),this.collectionsEnabled&&this.listenTo(this.organization.tagList,"add remove reset change",this.render),this.render()}},{key:"render",value:function(){var e,t,r=u.me().isDismissed("CollectionsExplainer"),n=null!=this.organization?this.organization.tagList.models.length:void 0;return this.organization&&(t=h.getOrganizationUrl(this.organization),e=h.getOrganizationBillingUrl(this.organization)),this.$el.html(S({board:this.model,collectionsEnabled:this.collectionsEnabled,billingUrl:e,orgUrl:t,hasTags:n,hideExplainer:r})),this.renderFilteredCollections(),this}}])&&i(r.prototype,m),y&&i(r,y),_}(m);function E(e,t){return null!=e?t(e):void 0}C.initClass(),e.exports=C},"./app/scripts/views/board-menu/board-collections-view.js":function(e,t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return function(){var t,r=f(e);if(p()){var n=f(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return u(this,t)}}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m,h=r("./app/scripts/views/board-menu/board-collections-select-view.js"),g=r("./app/scripts/views/board-menu/board-add-to-team-view.js"),v=r("./app/scripts/db/auth.js"),b=r("./app/scripts/db/model-loader.js"),y=r("./app/scripts/views/internal/view.js"),k=r("./app/scripts/debug/constants.ts").Feature,w=r("./packages/error-reporting/index.ts").sendErrorEvent,j=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_collections"),x=j.renderable((function(){j.div((function(){j.div(".spinner.loading")}))})),_=function(e){a(r,e);var t=l(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(){return this.$el.html(x())}}]),r}(y),O=function(e){a(r,e);var t=l(r);function r(){var e;i(this,r);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return n(d(e=t.call.apply(t,[this].concat(s))),"vigor",e.VIGOR.NONE),e}return s(r,[{key:"renderOnce",value:function(){return this.$el.html(j.render((function(){j.div(".count-explanation",(function(){j.p((function(){return j.format("only-team-members-can-enable-collections")}))}))})))}}]),r}(y);e.exports=((m=function(e){a(r,e);var t=l(r);function r(){var e;i(this,r);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return n(d(e=t.call.apply(t,[this].concat(s))),"viewTitleKey","collections"),e}return s(r,[{key:"className",value:function(){return"board-menu-content-frame board-collections-view"}},{key:"initialize",value:function(){var e=this;this.sidebarView=this.options.sidebarView,this.listenTo(this.model,"team-has-bc",(function(){e.redirecting=!1,e.addToTeam=!1,e.render()})),this.listenTo(this.model,"added-to-team",(function(){e.redirecting=!0,e.render()})),this.listenTo(this.model,"cancel-add-to-team",(function(){e.addToTeam=!1,e.render()})),this.listenTo(this.model,"cancel-upgrade",(function(){e.initialViewState=null,e.render()})),this.listenTo(this.model,"add-to-team",(function(){e.model.owned()?(e.initialViewState=null,e.addToTeam=!0,e.render()):window.location="/business-class"}))}},{key:"render",value:function(){try{this.$el.empty();var e=this.model,t=e.hasOrganization(),r=e.getOrganization(),n=v.me(),i=e.isMember(n),o=null==r?void 0:r.isMember(n),s=!i&&!o,a=e.isPublic()&&(null==r?void 0:r.isPublic()),c=t&&(i&&!o||s&&a);this.redirecting?this.renderSpinner():this.addToTeam?this.renderAddToTeam():c?this.renderOnlyForTeamMembers():this.renderTagSelect()}catch(e){w(e,{tags:{ownershipArea:"trello-remarkable",feature:k.Collections}})}}},{key:"renderOnlyForTeamMembers",value:function(){this.appendSubview(this.subview(O,this.model))}},{key:"renderSpinner",value:function(){this.appendSubview(this.subview(_,this.model))}},{key:"renderAddToTeam",value:function(){if(this.model.hasOrganization())return this.appendSubview(this.subview(O,this.model)),this;b.loadMyOrganizations(),this.appendSubview(this.subview(g,this.model,{menuType:"Collections"}))}},{key:"renderTagSelect",value:function(){this.appendSubview(this.subview(h,this.model,{modelCache:this.modelCache,sidebarView:this.sidebarView}))}}],[{key:"initClass",value:function(){this.prototype.noPadding=!0}}]),r}(y)).initClass(),m=m)},"./app/scripts/views/board-menu/board-labels-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("./app/scripts/views/label/labels-view.js"),u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,e);var t,r,u,d,p=(t=f,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function f(){return n(this,f),p.apply(this,arguments)}return r=f,d=[{key:"initClass",value:function(){this.prototype.viewTitleKey="labels"}}],(u=[{key:"el",value:function(){var e=this,t=this.subview(l,this.model,{board:this.model,popOverMethod:"toggle",className:"board-menu-content-frame",selectLabel:function(r){if(e.model.editable())return t.editLabel(r)}});return t.render().el}}])&&i(r.prototype,u),d&&i(r,d),f}(r("./app/scripts/views/internal/view.js"));u.initClass(),e.exports=u},"./app/scripts/views/board-menu/board-menu-about-this-board-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r("./app/scripts/db/auth.js"),d=r("./app/scripts/lib/util/index.js"),p=r("./app/scripts/views/internal/view.js"),f=r("./app/scripts/views/lib/pop-over.js"),m=r("./node_modules/react/index.js"),h=r("./app/scripts/lib/localize.js"),g=r("./app/scripts/views/templates/board_menu_about_this_board.js"),v=r("./packages/analytics/index.ts").trackUe,b=r("./app/src/components/ComponentWrapper/index.ts").renderComponent,y=r("./app/src/components/BoardMenuViewsAndCopies/BoardMenuViewsAndCopies.tsx").BoardMenuViewsAndCopies,k=r("./app/scripts/views/board-menu/about-this-board-admin-list-view.js"),w=r("./app/scripts/views/description/description-view.js"),j=r("./app/scripts/views/member-menu-profile/member-mini-profile-view.js"),x=r("./app/scripts/views/member-menu-profile/member-on-board-view.js"),_=r("./app/scripts/views/board-menu/search-input-view.js"),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(C,e);var t,r,p,O,S=(t=C,function(){var e,r=l(t);if(c()){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function C(){return n(this,C),S.apply(this,arguments)}return r=C,O=[{key:"initClass",value:function(){this.prototype.className="board-menu-content-frame",this.prototype.events={"click .js-change-permissions":"changePermissions","click .js-fill-board-admin-count":"openAllMembers"}}}],(p=[{key:"initialize",value:function(e){var t=e.sidebarView;return this.sidebarView=t,o(l(C.prototype),"initialize",this).apply(this,arguments),this.listenTo(this.model,{"change:memberships":this.renderDebounced,"change:prefs.voting":this.renderDebounced,"change:prefs.comments":this.renderDebounced,"change:desc":this.renderDebounced}),this.descView=this.subview(w,this.model,{maxDescLength:700,board:this.model,placeholderKey:this.getPlaceHolderText(),source:"boardMenuDrawerAboutScreen"}),this.makeDebouncedMethods("render")}},{key:"getPlaceHolderText",value:function(){var e=this.model.isTemplate(),t=u.me(),r=this.model.ownedByMember(t),n=this.model.isMember(t);return e?r||n?"about-this-template-description-admin":"about-this-template-description-visitor":"its-your-boards-time-to-shine"}},{key:"getViewTitle",value:function(){return this.model.isTemplate()?h(["view title","about-this-template"]):h(["view title","about-this-board"])}},{key:"render",value:function(){var e=u.isLoggedIn(),t=u.me(),r={};if(r.isLoggedIn=e,r.isAdmin=this.model.ownedByMember(t),r.isNonAdminMember=this.model.isMember(t)&&!r.isAdmin,r.isTemplate=this.model.isTemplate(),r.isAdmin){var n=this.model.getCommentPerm(),i=this.model.getPref("voting");r.canComment="disabled"!==n,r.canVote="disabled"!==i,r.commentHeader=this.getPermissionsLevelHeader(n),r.votingHeader=this.getPermissionsLevelHeader(i),r.permissionsHierarchy=this.getPermissionsHierarchy(n,i)}else e?(r.canComment=this.model.canComment(t),r.canVote=this.model.canVote(t)):(r.canComment="public"===this.model.getCommentPerm(),r.canVote="public"===this.model.getPref("voting"));this.$el.html(g(r));var o=1===this.model.adminList.length;return o?this.renderSingleAdminProfile():this.renderAdminFacepile(),this.$(".about-this-board-multi-admin").toggleClass("hide",o),this.$(".about-this-board-desc").toggleClass("visitor-single-admin",o&&!r.isAdmin),this.descView.placeholderKey=this.getPlaceHolderText(),this.appendSubview(this.descView,this.$(".js-fill-atb-desc")),this.renderSearchInputView(),this.renderViewCopyCount(),this}},{key:"renderSingleAdminProfile",value:function(){var e=this.model.adminList.models[0],t=e.toJSON();t.showEmail=!1,t.isMe=e===u.me();var r=this.$(".js-made-by"),n=this.subview(j,e);return this.ensureSubview(n,r)}},{key:"renderAdminFacepile",value:function(){var e=this,t=this.$(".js-made-by-facepile"),r=this.model.orderedVisibleAdmins(),n=r.length,i=r.slice(0,5),o=n-5;o>0?(this.$(".js-fill-board-admin-count").text("+".concat(o)),this.$(".js-fill-board-admin-count").toggleClass("pile",o<100),this.$(".js-fill-board-admin-count").toggleClass("pile-lg",o>=100)):this.$(".js-fill-board-admin-count").text("");var s=Array.from(i).map((function(t){return e.subview(x,t,{board:e.model})}));if(t.length)return this.ensureSubviews(s,t)}},{key:"openAllMembers",value:function(e){var t,r;return d.stop(e),v("board sidebar","toggles","admin list popover","from about view","","by clicking on admin count",{boardId:this.model.id,teamId:(t=this.model.getOrganization(),r=function(e){return e.id},null!=t?r(t):void 0)}),f.toggle({elem:this.$(".js-fill-board-admin-count"),maxWidth:304,view:k,options:{model:this.model,modelCache:this.modelCache}})}},{key:"getPermissionsLevelHeader",value:function(e){switch(e){case"members":return"members-can";case"observers":return"members-and-observers-can";case"org":return"team-members-can";case"public":return"any-trello-user-can"}}},{key:"getPermissionsHierarchy",value:function(e,t){if(e===t)return"equal";if("disabled"!==e&&"disabled"===t)return"comment";if("disabled"===e&&"disabled"!==t)return"voting";var r=["members","observers","org","public"];return r.indexOf(e)<r.indexOf(t)?"comment":"voting"}},{key:"changePermissions",value:function(e){d.stop(e),this.sidebarView.pushView("settings")}},{key:"showCardFilter",value:function(e){d.stop(e),this.sidebarView.pushView("filter")}},{key:"renderSearchInputView",value:function(){var e=this.$(".js-search-input-view");if(e.length){var t=this.subview(_,this.model.filter,{showCardFilter:this.showCardFilter.bind(this)});return this.appendSubview(t,e)}}},{key:"renderViewCopyCount",value:function(){return b(m.createElement(y,{idBoard:this.model.id,isTemplate:this.model.isTemplate(),showLabels:!1}),this.$(".js-view-copy-count")[0]),this}}])&&i(r.prototype,p),O&&i(r,O),C}(p);O.initClass(),e.exports=O},"./app/scripts/views/board-menu/board-menu-activity-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("./app/scripts/models/collections/action-list.js"),u=r("./app/scripts/views/action/action-list-view.js"),d=r("./packages/atlassian-analytics/index.ts").Analytics,p=r("./app/scripts/views/internal/view-with-actions.js"),f=r("./app/scripts/views/internal/view.js"),m=r("./app/scripts/views/internal/templates.js"),h=r("./packages/analytics/index.ts").track,g=r("./node_modules/underscore/underscore.js"),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(b,e);var t,p,f,g,v=(t=b,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function b(){return n(this,b),v.apply(this,arguments)}return p=b,g=[{key:"initClass",value:function(){this.prototype.viewTitleKey="activity",this.prototype.viewIcon="activity",this.prototype.className="board-menu-content-frame",this.prototype.events={"click .js-show-all":"showAll","click .js-show-comments":"showComments","click .js-more-actions":"loadMoreActions"}}}],(f=[{key:"initialize",value:function(){var e=this;this.mode="all",this.fullHistory=this.options.fullHistory,null==this.fullHistory&&(this.fullHistory=!1),this.actionListView=this.collectionSubview(u,new l(this.getActions(),{modelCache:this.modelCache}),{renderOpts:{compact:!this.fullHistory,key:"boardmenuactivity",context:this.model,source:"boardMenuDrawerActivityScreen"}}),this.makeDebouncedMethods("renderMoreActionsLink"),this.listenTo(this.modelCache,"add:Action:".concat(this.model.id),(function(){return e.actionListView.collection.reset(e.getActions()),e.renderMoreActionsLinkDebounced()})),this.listenTo(this.model.memberList,{"change:initials change:avatarUrl change:avatarSource change:fullName change:username":this.render}),this.loadMoreActions()}},{key:"render",value:function(){return this.$el.html(m.fill(r("./app/scripts/views/templates/board_menu_activity.js"),this.model.toJSON())),this.actionListView.setElement(this.$(".js-list-activity")[0]),this.renderActions(),this.renderMode(),this}},{key:"renderActions",value:function(){return this.actionListView.render(),this.renderMoreActionsLink()}},{key:"renderMoreActionsLink",value:function(){return this.$(".js-more-actions").toggle(this.hasMoreActions()),this}},{key:"renderMode",value:function(){return this.$(".js-control-option").removeClass("is-active"),"all"===this.mode?(this.$(".js-list-activity").removeClass("is-only-comments"),this.$(".js-show-all").addClass("is-active")):(this.$(".js-list-activity").addClass("is-only-comments"),this.$(".js-show-comments").addClass("is-active")),this}},{key:"showAll",value:function(e){this.mode="all",this.renderMode(),h("Board Menu","Activity","Show All"),this.sendGASEvent&&d.sendClickedButtonEvent({buttonName:"showAllActivityButton",source:"boardMenuDrawerActivityScreen"})}},{key:"showComments",value:function(e){this.mode="comments",this.renderMode(),h("Board Menu","Activity","Show Comments Only"),this.sendGASEvent&&d.sendClickedButtonEvent({buttonName:"showCommentsOnlyButton",source:"boardMenuDrawerActivityScreen"})}}])&&i(p.prototype,f),g&&i(p,g),b}(f);v.initClass(),g.extend(v.prototype,p),e.exports=v},"./app/scripts/views/board-menu/board-menu-more-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r("./packages/jquery/index.js"),d=r("./app/scripts/views/lib/alerts.js"),p=r("./app/scripts/db/auth.js"),f=r("./packages/atlassian-analytics/index.ts"),m=f.Analytics,h=f.tracingCallback,g=r("./app/scripts/views/internal/board-display-helpers.js"),v=r("./app/scripts/controller/index.js"),b=r("./app/scripts/views/lib/pop-over.js"),y=r("./app/scripts/lib/util/index.js"),k=r("./app/scripts/views/internal/view.js"),w=r("./app/scripts/views/lib/confirm.js"),j=r("./app/scripts/views/board/share-popover-view.js"),x=r("./app/scripts/views/board-menu/edit-email-settings-view.js"),_=r("./app/scripts/views/board/copy-board-view.js"),O=r("./app/scripts/views/board/convert-board-template-view.js"),S=r("./packages/analytics/index.ts"),C=S.Noun,E=S.Verb,P=S.track,T=S.trackUe,A=r("./app/scripts/lib/localize.js"),D=r("./app/scripts/views/templates/board_menu_more.js"),R=r("./packages/browser/index.ts").dontUpsell,B=r("./app/scripts/db/model-loader.js"),N=r("./app/scripts/views/board-menu/board-add-to-team-view.js"),L=r("./packages/feature-flag-client/index.ts").featureFlagClient,M=r("./node_modules/react/index.js"),I=r("./packages/react-dom-wrapper/index.ts"),U=r("./app/src/components/ComponentWrapper/index.ts").renderComponent,V=r("./app/src/components/UpgradePrompts/UpgradePromptFull.tsx").UpgradePromptFull,z=r("./app/src/components/UpgradePrompts/UpgradeSmartComponent.tsx").UpgradeSmartComponent,F=r("./app/src/components/UpgradePrompts/UpgradePromptPill.tsx").UpgradePromptPill,$=r("./app/src/components/UpgradePrompts/UpgradeSmartComponent.tsx").UpgradeSmartComponentConnected,G=r("./packages/test-ids/index.ts").UpgradePromptTestIds,H=r("./app/src/components/UpgradePrompts/renderUpgradePrompt.ts").renderUpgradePrompt,q=r("./packages/nachos/icons/business-class.tsx").BusinessClassIcon,K=r("./packages/nachos/icons/collection.tsx").CollectionIcon,W=r("./app/src/components/FreeTrial/index.ts").PlanSelectionOverlay,J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(J,e);var t,r,f,k,S=(t=J,function(){var e,r=l(t);if(c()){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function J(){return n(this,J),S.apply(this,arguments)}return r=J,k=[{key:"initClass",value:function(){this.prototype.viewTitleKey="more",this.prototype.className="board-menu-content-frame",this.prototype.events={"click .js-open-collections":"openCollections","click .js-open-settings":"openSettings","click .js-open-stickers":"openStickers","click .js-open-labels":"openLabels","click .js-open-archive":"openArchivedItems","click .js-share":"shareBoard","click .js-email":"openEmailSettings","click .js-board-subscribe":"toggleSubscribe","click .js-copy-board":"copyBoard","click .js-close-board":"closeConfirm","click .js-leave-board":"leaveConfirm","click .js-short-url":"selectUrl","click .js-make-template":"makeTemplate","click .js-convert-to-board":"convertToBoard","submit form":"cancel"}}}],(f=[{key:"initialize",value:function(e){var t=this,r=e.sidebarView;this.sidebarView=r,this.makeDebouncedMethods("render"),this.listenTo(this.model,{"change:subscribed":this.renderSubscribeState,"change:prefs.isTemplate":this.renderDebounced,"change:prefs.permissionLevel":this.renderDebounced,"change:idOrganization":this.renderDebounced,"change:memberships":this.renderDebounced}),this.listenTo(this.model,"cancel-add-to-team",(function(){return t.addToTeam=!1,t.render()})),this.listenTo(this.model,"add-to-team",(function(){return t.model.owned()?(t.addToTeam=!0,t.render()):window.location="/business-class"})),this.sendGASEvent=L.get("dataeng.gasv3-event-tracking",!1)}},{key:"remove",value:function(){return"function"==typeof this.unmountCollectionsPromptPill&&this.unmountCollectionsPromptPill(),"function"==typeof this.unmountCollectionsPromptFull&&this.unmountCollectionsPromptFull(),"function"==typeof this.unmountTemplatesPromptPill&&this.unmountTemplatesPromptPill(),o(l(J.prototype),"remove",this).apply(this,arguments)}},{key:"render",value:function(e){var t,r=this;this.$el.empty();var n=p.me(),i=this.model,o=this.model.toJSON();o.canJoin=this.model.canJoin(),o.canInviteMembers=this.model.canInviteMembers(),o.confirmed=n.get("confirmed"),o.isLoggedIn=n.isLoggedIn();var s=this.model.getOrganization(),a=s?v.getOrganizationBillingUrl(s):void 0,c=s?s.id:void 0;o.canCloseBoard=this.model.owned()||!!(null==s?void 0:s.hasPremiumFeature("superAdmins"))&&(null!=s?s.owned():void 0),o.editableByMember=this.model.editableByMember(n),o.canLeaveBoard=(this.model.isMemberObserver(n)||this.model.editableByMember(n))&&n.getMembershipData(this.model).canRemove,o.canCloseOrLeave=o.canLeaveBoard||o.canCloseBoard,o.pLevelClass=g.getPermLevelIconClassForBoard(this.model),o.pLevelAltText=g.getPermLevelAltTextForBoard(this.model),o.helperText=A(["board perms",this.model.getPermLevel(),"short summary"]);var l=null!=s?s.isFeatureEnabled("tags"):void 0;o.showCollections=this.model.hasOrganization()&&(l||!R()),o.hasMultipleMembers=Q(this.model.get("memberships"),(function(e){return e.length}))>1,o.isAtOrOverFreeBoardLimit=Q(this.model.getOrganization(),(function(e){return e.isAtOrOverFreeBoardLimit()})),o.isOrgBcOrEnt=!(!(null==s?void 0:s.isBusinessClass())&&!(null==s?void 0:s.belongsToRealEnterprise())),o.isAdmin=this.model.ownedByMember(n),o.isTemplate=this.model.isTemplate(),o.canBeTemplate="public"===this.model.getPermLevel()||o.isOrgBcOrEnt,o.showTemplateUpgrade=this.model.hasOrganization()&&o.isAdmin&&!R();var u=this.model.isGuest(n),d=this.model.isPublic()&&this.model.isTemplate(),f=!this.model.isMember(n)&&!this.model.canJoin(),h=this.model.get("idEnterprise")&&n.isManagedEntMemberOf(this.model.get("idEnterprise"));if(i.get("enterpriseOwned")&&u&&!h?o.canCopyBoard=!1:this.model.allowsSelfJoin()&&(t=this.model.getPref("permissionLevel"),["org","enterprise"].includes(t))?o.canCopyBoard=!0:i.get("enterpriseOwned")&&f&&!h&&!d?o.canCopyBoard=!1:o.canCopyBoard=!0,this.addToTeam)this.renderAddToTeam();else{this.$el.html(D(o));var b=this.$el.find(".js-board-menu-pill-collections-upgrade")[0];if(null==s?void 0:s.isMember(n)){var y=L.get("btg.upgrade-prompt-audit",!1),k=this.$el.find(".js-board-menu-pill-collections-upgrade")[0];if(y?k&&(this.unmountcollectionsPromptPill=function(){I.unmountComponentAtNode(k)},U(M.createElement($,{orgId:c,promptId:"boardMenuMoreCollectionsPromptPill"}),k)):this.unmountCollectionsPromptPill=H(M.createElement(F,{testId:G.CollectionsUpgradePill,icon:M.createElement(q,null),cta:A(["upgrade prompt","upgrade"]),ctaOnClick:function(){if(T({category:C.BOARD_MENU,verb:E.OPENS,directObj:C.TEAM_PAGE_BC_TAB,method:"by clicking pill upgrade prompt in board menu more section"}),r.sendGASEvent&&m.sendUIEvent({action:"clicked",actionSubject:"pill",actionSubjectId:"collectionsBcUpgradePill",source:"boardMenuDrawerMoreScreen"}),!y){var e=document.createElement("span");return b.appendChild(e),U(M.createElement(W,{ctaLink:v.getOrganizationBillingUrl(c),onContinue:function(){return window.location.assign("/business-class")},orgId:c,onClose:function(){return I.unmountComponentAtNode(e),e.remove()}}),e,{boardModel:r.model})}}}),this.$el.find(".js-board-menu-pill-collections-upgrade")[0],{boardModel:i},o.showCollections),L.get("btg.upgrade-prompt-audit",!1)){var w=this.$el.find(".js-board-menu-prompt-collections")[0];w&&U(M.createElement(z,{orgId:c,promptId:"boardMenuMoreCollectionsPromptFull"}),w)}else this.unmountCollectionsPromptFull=H((function(e){var t=e.dismiss,r={headline:A(["upgrade prompt","board menu","collections","headline-2"]),content:A(["upgrade prompt","board menu","collections","content-2"]),className:"board-menu-prompt-collections",cta:A(["upgrade prompt","learn more"]),ctaLink:a,orgId:c,source:"boardMenuDrawerMoreScreen",ctaOnClick:function(){return T({category:C.BOARD_MENU,verb:E.OPENS,directObj:C.BC_MODAL,method:"by clicking full upgrade prompt in board menu more section"})},icon:M.createElement(K,null),isDismissable:!0,onDismiss:t,testId:G.CollectionsUpgradePrompt};return M.createElement(V,r)}),this.$el.find(".js-board-menu-prompt-collections")[0],{promptID:"ad-bc-prompt-upgrade-board-more-collection",boardModel:this.model});var j=this.$el.find(".js-board-menu-pill-templates-upgrade")[0];y?j&&(this.unmountTemplatesPromptPill=function(){return I.unmountComponentAtNode(j)},U(M.createElement($,{orgId:c,promptId:"boardMenuMoreTemplatesPromptPill"}),j)):this.unmountTemplatesPromptPill=H(M.createElement(F,{testId:G.TemplatesUpgradePill,icon:M.createElement(q,null),cta:A(["upgrade prompt","upgrade"]),ctaOnClick:function(){T({category:C.BOARD_MENU,verb:E.OPENS,directObj:C.TEAM_PAGE_BC_TAB,method:"by clicking make template upgrade prompt in board menu more section"}),r.sendGASEvent&&m.sendUIEvent({action:"clicked",actionSubject:"pill",actionSubjectId:"makeTemplateBcUpgradePill",source:"boardMenuDrawerMoreScreen"});var e=document.createElement("span");return b.appendChild(e),U(M.createElement(W,{ctaLink:v.getOrganizationBillingUrl(c),onContinue:function(){return window.location.assign("/business-class")},orgId:c,onClose:function(){return I.unmountComponentAtNode(e),e.remove()}}),e,{boardModel:r.model})}}),j,{boardModel:i},o.showCollections)}this.renderSubscribeState()}return this}},{key:"renderAddToTeam",value:function(){return B.loadMyOrganizations(),this.appendSubview(this.subview(N,this.model,{menuType:"More"}))}},{key:"renderSubscribeState",value:function(){this.$(".js-subscribed-state").toggleClass("hide",!this.model.get("subscribed"))}},{key:"openCollections",value:function(e){y.stop(e),this.sidebarView.pushView("collections")}},{key:"openSettings",value:function(e){y.stop(e),this.sidebarView.pushView("settings")}},{key:"openLabels",value:function(e){y.stop(e),this.sidebarView.pushView("labels")}},{key:"openStickers",value:function(e){y.stop(e),this.sidebarView.pushView("stickers")}},{key:"openArchivedItems",value:function(e){y.stop(e),this.sidebarView.pushView("archive")}},{key:"shareBoard",value:function(e){y.stop(e),b.toggle({elem:this.$(e.target).closest(".js-share"),view:new j({model:this.model,modelCache:this.modelCache})}),P("Board Menu","Open Share, Print, and Export Menu")}},{key:"openEmailSettings",value:function(e){y.stop(e),b.toggle({elem:this.$(e.target).closest(".js-email"),view:new x({model:this.model,modelCache:this.modelCache})}),P("Board Menu","Open Email Settings - Menu")}},{key:"copyBoard",value:function(e){y.stop(e),u(e.target).hasClass("disabled")||(P("Board Menu","Open Copy Board"),this.sidebarView.sendClickedDrawerNavItemEvent("more","copyBoard"),b.toggle({elem:this.$(e.target).closest(".js-copy-board"),view:new _({model:this.model,modelCache:this.modelCache})}))}},{key:"toggleSubscribe",value:function(e){y.preventDefault(e),u(e.target).hasClass("disabled")||(this.model.subscribe(!this.model.get("subscribed")),P("Board Menu","Subscribe/Unsubscribe"),this.sidebarView.sendClickedDrawerNavItemEvent("more","watch",{watchEnabled:this.model.get("subscribed")}),this.sendGASEvent&&m.sendTrackEvent({action:this.model.get("subscribed")?"subscribed":"unsubscribed",actionSubject:"board",source:"boardMenuDrawerMoreScreen",containers:{board:{id:this.model.id}}}))}},{key:"closeConfirm",value:function(e){var t=this;y.stop(e),P("Board Menu","Open Close Menu"),this.sidebarView.sendClickedDrawerNavItemEvent("more","closeBoard"),w.toggle("close board",{elem:u(e.target).closest("a"),model:this.model,confirmBtnClass:"nch-button nch-button--danger",templateData:{boardsPageUrl:"/".concat(p.me().get("username"),"/boards")},fxConfirm:function(e){if(t.model.close(),P("Board","Close Board"),t.sendGASEvent)return m.sendTrackEvent({action:"closed",actionSubject:"board",source:"boardMenuDrawerMoreScreen",containers:{board:{id:t.model.id}}})}})}},{key:"leaveConfirm",value:function(e){var t=this;y.stop(e),P("Board Menu","Open Leave Menu"),this.sidebarView.sendClickedDrawerNavItemEvent("more","leaveBoard");var r=p.me(),n=r.removeMembershipConfirmationKey(this.model);w.toggle(n,{elem:u(e.target).closest("a"),confirmBtnClass:"nch-button nch-button--danger",fxConfirm:function(e){if(t.model.removeMember(r),P("Board","Leave Board"),t.sendGASEvent)return m.sendTrackEvent({action:"left",actionSubject:"board",source:"boardMenuDrawerMoreScreen",containers:{board:{id:t.model.board}}})}})}},{key:"selectUrl",value:function(e){return this.$(".js-short-url").focus().select()}},{key:"cancel",value:function(e){return y.stop(e),!1}},{key:"makeTemplate",value:function(e){if(y.stop(e),T("board menu","opens","create template menu","","","by clicking create template button",{boardId:this.model.id,teamId:Q(this.model.getOrganization(),(function(e){return e.id}))}),this.sidebarView.sendClickedDrawerNavItemEvent("more","makeTemplateFromBoard"),!u(e.target).hasClass("disabled"))return b.toggle({elem:this.$(e.target).closest(".js-make-template"),view:new O({model:this.model,modelCache:this.modelCache})})}},{key:"convertToBoard",value:function(){var e=this;d.show("converting","info","templates",1e3);var t=m.startTask({taskName:"edit-board",subTask:"prefs/isTemplate",source:"boardMenuDrawerMoreScreen"});return this.model.setPrefWithTracing("isTemplate",!1,t,h({taskName:"edit-board",subTask:"prefs/isTemplate",source:"boardMenuDrawerMoreScreen",traceId:t},(function(t,r){var n,i;r&&m.sendUpdatedBoardFieldEvent({field:"prefs/isTemplate",source:"boardMenuDrawerMoreScreen",containers:{board:{id:e.model.id},organization:{id:null===(n=e.model)||void 0===n||null===(i=n.getOrganization())||void 0===i?void 0:i.id}}})}))).save(),T("board menu","converts","template","to board","","by clicking template toggle",{boardId:this.model.id,teamId:Q(this.model.getOrganization(),(function(e){return e.id}))}),this.sidebarView.sendClickedDrawerNavItemEvent("more","convertToBoard")}}])&&i(r.prototype,f),k&&i(r,k),J}(k);function Q(e,t){return null!=e?t(e):void 0}J.initClass(),e.exports=J},"./app/scripts/views/board-menu/board-settings-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r("./packages/jquery/index.js"),d=r("./app/scripts/db/auth.js"),p=r("./app/scripts/views/board-menu/board-select-organization-view.js"),f=r("./app/scripts/views/board-menu/change-board-add-member-perms-view.js"),m=r("./app/scripts/views/board-menu/change-board-commenting-perms-view.js"),h=r("./app/scripts/views/power-ups/voting-settings-view.js"),g=r("./app/scripts/views/lib/pop-over.js"),v=r("./app/scripts/lib/util/index.js"),b=r("./app/scripts/views/internal/view.js"),y=r("./app/scripts/views/internal/templates.js"),k=r("./packages/analytics/index.ts"),w=k.track,j=k.trackUe,x=r("./app/scripts/lib/localize.js"),_=r("./packages/atlassian-analytics/index.ts").Analytics,O=r("./packages/feature-flag-client/index.ts").featureFlagClient,S=r("./node_modules/react/index.js"),C=r("./packages/react-dom-wrapper/index.ts"),E=r("./app/src/components/WorkspacesPreamble/index.ts").WorkspacesPreambleChangeTeamButton,P=r("./app/src/components/ComponentWrapper/index.ts").renderComponent,T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(R,e);var t,b,k,T,D=(t=R,function(){var e,r=l(t);if(c()){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function R(){return n(this,R),D.apply(this,arguments)}return b=R,T=[{key:"initClass",value:function(){this.prototype.viewTitleKey="settings",this.prototype.className="board-menu-content-frame",this.prototype.events={"click .js-change-org:not(.disabled)":"changeOrg","click .js-toggle-covers:not(.disabled)":"toggleCovers","click .js-change-comments:not(.disabled)":"changeCommentingPerms","click .js-change-voting:not(.disabled)":"changeVotingPerms","click .js-change-add-members:not(.disabled)":"changeAddMemberPerms","click .js-toggle-org-mem-join:not(.disabled)":"toggleSelfJoin","click .js-change-cookie-settings":"changeCookieSettings"}}}],(k=[{key:"initialize",value:function(e){var t=e.sidebarView;this.sidebarView=t,this.makeDebouncedMethods("render"),this.listenTo(this.model,"change",this.renderDebounced),this.blockTeamlessBoardsEnabled=O.get("btg.block-teamless-boards",!1),this.workspacesPreambleChangeTeamButtonTarget=null}},{key:"render",value:function(){var e=this.model.toJSON({prefs:!0,url:!0,labels:!0});e.isLoggedIn=d.isLoggedIn(),e.cardCovers=e.prefs.cardCovers;var t=this.model.getOrganization();return e.orgDisplayName=null!=t?t.get("displayName"):void 0,e.hasOrg=null!=(null!=t?t.id:void 0),e.votingEnabled=this.model.isPowerUpEnabled("voting"),e.commentsDisplay=x(["board pref perms",this.model.getCommentPerm()]),e.votingDisplay=x(["board pref perms",this.model.getPref("voting")]),e.invitationsDisplay=x(["board pref perms",this.model.getInvitePerm()]),e.blockTeamlessBoardsEnabled=this.blockTeamlessBoardsEnabled,this.blockTeamlessBoardsEnabled?e.canChangeOrg=this.model.owned():(e.canChangeOrg=(null!=t?t.owned():void 0)||this.model.owned(),e.setOrgNull=(null!=t?t.owned():void 0)&&!this.model.owned()),e.isTemplate=this.model.isTemplate(),this.$el.html(y.fill(r("./app/scripts/views/templates/board_menu_settings.js"),e,{editable:this.model.editable(),owned:this.model.owned()})),this.blockTeamlessBoardsEnabled&&this.renderWorkspacesPreambleChangeTeamButton(),this}},{key:"changeOrg",value:function(e){var t=this;if(v.stop(e),this.model.owned())g.toggle({elem:u(e.target).closest("a"),view:p,options:{model:this.model,modelCache:this.modelCache}}),w("Board Menu","Settings","Change Org"),this.sidebarView.sendClickedDrawerNavItemEvent("settings","changeOrg");else{var r=this.model.get("idOrganization");A(this.modelCache.get("Organization",r),(function(e){return e.boardList.remove(t.model)})),this.model.update("idOrganization",""),g.hide(),w("Board Menu","Settings","Remove Org"),_.sendUpdatedBoardFieldEvent({field:"organization",source:"boardMenuDrawerSettingsScreen",containers:{board:{id:this.model.id}},attributes:{previous:r}}),this.sidebarView.sendClickedDrawerNavItemEvent("settings","removeOrg")}}},{key:"toggleCovers",value:function(e,t){v.stop(e),this.model.setPref("cardCovers",!this.model.getPref("cardCovers")),w("Board Menu","Settings","Enable/Disable Cover Images"),_.sendUpdatedBoardFieldEvent({field:"cardCoversPref",value:this.model.getPref("cardCovers"),source:"boardMenuDrawerSettingsScreen",containers:{board:{id:this.model.id},organization:{id:A(this.model.getOrganization(),(function(e){return e.id}))}}}),this.sidebarView.sendClickedDrawerNavItemEvent("settings","cardCovers",{cardCoversEnabled:this.model.getPref("cardCovers")})}},{key:"changeCommentingPerms",value:function(e){v.stop(e),g.toggle({elem:u(e.target).closest("a"),view:new m({model:this.model,modelCache:this.modelCache})}),w("Board Menu","Settings","Open Change Commenting Permissions"),this.sidebarView.sendClickedDrawerNavItemEvent("settings","commentPerms")}},{key:"changeVotingPerms",value:function(e){v.stop(e),g.toggle({elem:u(e.target).closest("a"),view:new h({model:this.model,modelCache:this.modelCache})}),w("Board Menu","Settings","Open Change Voting Permissions"),this.sidebarView.sendClickedDrawerNavItemEvent("settings","votingPerms")}},{key:"changeAddMemberPerms",value:function(e){v.stop(e),g.toggle({elem:u(e.target).closest("a"),view:new f({model:this.model,modelCache:this.modelCache})}),w("Board Menu","Settings","Open Change Add Member Permissions"),this.sidebarView.sendClickedDrawerNavItemEvent("settings","invitationsPerms",{invitationsEnabled:this.model.getPref("invitations")})}},{key:"toggleSelfJoin",value:function(e){v.stop(e),this.model.setPref("selfJoin",!this.model.getPref("selfJoin")),this.model.save(),w("Board Menu","Settings","Toggle Allow Org Join"),_.sendUpdatedBoardFieldEvent({field:"selfJoinPref",value:this.model.getPref("selfJoin"),source:"boardMenuDrawerSettingsScreen",containers:{board:{id:this.model.id},organization:{id:A(this.model.getOrganization(),(function(e){return e.id}))}}}),this.sidebarView.sendClickedDrawerNavItemEvent("settings","selfJoin",{selfJoinEnabled:this.model.getPref("selfJoin")})}},{key:"changeCookieSettings",value:function(){return j("boards sidebar","opens","cookie settings"),this.sidebarView.sendClickedDrawerNavItemEvent("settings","cookieConsent"),window.trelloCookieConsentDialog()}},{key:"unmountWorkspacesPreambleChangeTeamButton",value:function(){if(this.workspacesPreambleChangeTeamButtonTarget)return C.unmountComponentAtNode(this.workspacesPreambleChangeTeamButtonTarget)}},{key:"renderWorkspacesPreambleChangeTeamButton",value:function(){this.unmountWorkspacesPreambleChangeTeamButton(),this.workspacesPreambleChangeTeamButtonTarget=this.$("#board-settings-change-org")[0],this.workspacesPreambleChangeTeamButtonTarget&&P(S.createElement(E,{boardId:this.model.id}),this.workspacesPreambleChangeTeamButtonTarget)}},{key:"remove",value:function(){return this.unmountWorkspacesPreambleChangeTeamButton(),o(l(R.prototype),"remove",this).apply(this,arguments)}}])&&i(b.prototype,k),T&&i(b,T),R}(b);function A(e,t){return null!=e?t(e):void 0}T.initClass(),e.exports=T},"./app/scripts/views/board-menu/board-sidebar-default-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r("./app/scripts/models/collections/action-list.js"),d=r("./app/scripts/views/action/action-list-view.js"),p=r("./packages/atlassian-analytics/index.ts").Analytics,f=r("./app/scripts/db/auth.js"),m=r("./app/scripts/data/backgrounds.js"),h=r("./app/scripts/views/board-menu/board-sidebar-power-up-slots-view.js"),g=r("./app/scripts/data/butler-id.js").BUTLER_POWER_UP_ID,v=r("./app/scripts/views/internal/plugins/plugin-runner.js"),b=r("./packages/storage/index.ts").TrelloStorage,y=r("./app/scripts/lib/util/index.js"),k=r("./app/scripts/views/internal/view.js"),w=r("./node_modules/underscore/underscore.js"),j=r("./app/scripts/views/internal/templates.js"),x=r("./app/scripts/views/templates/board_menu_default.js"),_=r("./app/scripts/views/internal/plugins/plugins-changed-signal.js"),O=r("./packages/feature-flag-client/index.ts").featureFlagClient,S=r("./app/scripts/lib/localize-count.js"),C=r("./app/common/lib/util/i18n/formatters.ts").asNumber,E=r("./app/scripts/views/internal/view-with-actions.js"),P=r("./app/scripts/data/latest-power-ups-message.js"),T=r("./packages/analytics/index.ts"),A=T.Noun,D=T.Verb,R=T.track,B=T.trackUe,N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(N,e);var t,k,w,E,T=(t=N,function(){var e,r=l(t);if(c()){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function N(){return n(this,N),T.apply(this,arguments)}return k=N,E=[{key:"initClass",value:function(){this.prototype.viewTitleKey="menu",this.prototype.viewIcon="member",this.prototype.className="board-menu-content-frame",this.prototype.headerDisplayTypeClass="is-board-menu-default-view",this.prototype.events={"click .js-about-this-board":"openAboutThisBoard","click .js-change-background":"changeBackground","click .js-open-power-ups"(e){return p.sendClickedLinkEvent({linkName:"boardMenuPowerUpLink",attributes:{boardId:this.model.id,organizationId:this.model.get("idOrganization")},source:"boardMenuDrawer"}),this.showPowerUps(e)},"click .js-open-stickers":"openStickers","click .js-open-card-filter":"showCardFilter","click .js-open-activity":"openActivity","click .js-open-more":"openMore","click .js-power-up-empty-slot":"showPowerUps","click .js-enterprise-upsell-dismiss":"enterpriseUpsellDismiss","click .js-enterprise-upsell-learn-more":"enterpriseUpsellLearnMore","click .js-open-butler":"openButler"}}}],(w=[{key:"initialize",value:function(e){var t=this,r=e.sidebarView;return this.sidebarView=r,this.numActionsToShow=15,this.makeDebouncedMethods("render","renderMembers"),this.listenTo(this.model,{"change:datePluginDisable":this.renderPowerUpDisableTimer,"change:prefs.permissionLevel":this.renderDebounced,"change:prefs.isTemplate":this.renderDebounced,"change:powerUps":this.renderEnabledPowerUpCount,"change:desc":this.renderAboutThisBoardSummary,"change:memberships":this.renderAboutThisBoardSummary,"change:idOrganization":function(){return t.renderButlerButton(),t.renderEnabledPowerUpCount()}}),this.listenTo(f.me().organizationList,"change",(function(){return t.renderDebounced()})),this.listenTo(this.model.boardPluginList,{"add remove reset":function(e){return t.renderEnabledPowerUpCount(),t.renderButlerButton()}}),this.subscribe(_(this.model),(function(){return t.renderEnabledPowerUpCount()})),this.actionListView=this.collectionSubview(d,new u([],{modelCache:this.modelCache}),{renderOpts:{limit:this.numActionsToShow,context:this.model,compact:!0,truncateComments:function(e){return e.get("date")<t.model.get("dateLastView")},excludeTypes:["copyCommentCard"],source:"boardMenuDrawerDefaultScreen"}}),this.waitForId(this.model,(function(){return t.listenTo(t.modelCache,"add:Action:".concat(t.model.id," remove:Action:").concat(t.model.id," change:Action:").concat(t.model.id),t.frameDebounce((function(){return t.renderActionCount(),t.actionListView.collection.reset(t.getActions())}))),t.actionListView.collection.reset(t.getActions())})),this.enterpriseUpsellsEnabled=this.model.canUpsellToEnterprise()&&O.get("enterprise.up_sells",!1),this.sendGASEvent=O.get("dataeng.gasv3-event-tracking",!1)}},{key:"renderAboutThisBoardSummary",value:function(){var e=this.model.isMember(f.me()),t=this.model.get("desc").length>0;return this.$(".board-menu-about-this-board-summary").toggleClass("hide",t||!e),this}},{key:"render",value:function(){var e=f.me(),t={editable:this.model.editable(),hasPaidOrgPowerUps:e.hasPaidOrgPowerUps(),hasGoldPowerUps:e.isFeatureEnabled("threePlugins"),isTemplate:this.model.isTemplate(),showEnterpriseUpsell:this.enterpriseUpsellsEnabled};if(this.$el.html(x(t)),this.enterpriseUpsellsEnabled){var r=this.model.get("idOrganization");B(A.BOARD_SIDEBAR,D.SHOWS,A.ENTERPRISE_UPSELL,"","","to eligible team member",{idOrganization:r}),this.sendGASEvent&&p.sendScreenEvent({name:"boardMenuDrawerEnterpriseUpsellInlineDialog",containers:{organization:{id:r}}})}return this.$(".js-menu-action-list").length&&(this.actionListView.setElement(this.$(".js-menu-action-list")[0]),this.renderActions(),this.renderActionCount()),this.renderEnabledPowerUpCount(),this.renderBackgroundPreview(),this.renderPowerUpDisableTimer(),this.renderPowerUpSlots(),this.renderAboutThisBoardSummary(),this.renderButlerButton(),this}},{key:"renderBackgroundPreview",value:function(){var e,t,r=this.$(".js-fill-background-preview").css({"background-image":"","background-color":""});if(null!=L(m[this.model.getPref("background")],(function(e){return e.tile})))t=this.model.getPref("backgroundImage");else if(null!=this.model.getPref("backgroundImageScaled")||null!=this.model.getPref("backgroundImage")){var n,i;t=null!=(n=null!=(i=L(y.previewBetween(this.model.getPref("backgroundImageScaled"),90,60,600,400),(function(e){return e.url})))?i:this.model.get("fullSizeUrl"))?n:this.model.getPref("backgroundImage")}else e=null!=this.model.getPref("backgroundColor")?this.model.getClientBackgroundColor(this.model.getPref("background")):this.model.getClientBackgroundColor("blue");return r.css({"background-image":t?"url(".concat(t,")"):"","background-color":e}),this}},{key:"getDateLastViewedActionsStorageKey",value:function(){return this.model.id?"timeLastViewedActions-".concat(this.model.id):null}},{key:"setDateLastViewedActions",value:function(e){var t;null!=(t=this.getDateLastViewedActionsStorageKey())&&b.set(t,e.toISOString())}},{key:"setDateLastViewedActionsAsNow",value:function(){this.setDateLastViewedActions(new Date)}},{key:"getDateLastViewedActions",value:function(){var e,t;return null!=(e=this.getDateLastViewedActionsStorageKey())&&null!=(t=b.get(e))?new Date(t):null}},{key:"renderActionCount",value:function(){if(this.$(".js-unread-activity-count").length){this.$(".js-unread-activity-count").empty();var e=this.getDateLastViewedActions();null==e&&(e=new Date,this.setDateLastViewedActions(e));for(var t=function(t){var r=new Date(t.get("date"))>e,n=t.get("idMemberCreator")!==f.me().id;return r&&n},n=0,i=0,o=Array.from(this.model.getActions());i<o.length;i++)t(o[i])&&n++;0<n&&n<=this.numActionsToShow&&this.setDateLastViewedActionsAsNow();var s=n;n>=50&&(s="".concat(50,"+")),n>this.numActionsToShow&&this.$(".js-unread-activity-count").text(s);var a={count:s,hasCount:n>this.numActionsToShow};return this.$(".js-fill-activity-button").empty().append(j.fill(r("./app/scripts/views/templates/board_menu_more_activity_button.js"),a)),this}}},{key:"renderPowerUpDisableTimer",value:function(){var e=this.model.daysUntilPluginsDisable();return null!==e?this.$(".js-power-up-disable-timer").removeClass("hide").text(S("days remaining",e)):this.$(".js-power-up-disable-timer").addClass("hide")}},{key:"getEnabledPowerUpCount",value:function(){return this.model.get("powerUps").length+this.model.powerUpsCount()}},{key:"renderButlerButton",value:function(){return this.$(".js-butler-button").toggleClass("hide",!this.model.isButlerCore())}},{key:"renderEnabledPowerUpCount",value:function(){var e=f.me();if(e&&P&&!e.isDismissed(P))this.$(".js-enabled-power-up-count").text(""),this.$(".js-power-up-new").removeClass("hide");else{this.$(".js-power-up-new").addClass("hide");var t=this.getEnabledPowerUpCount();t>0?this.$(".js-enabled-power-up-count").text(C(t)):this.$(".js-enabled-power-up-count").text("")}return this}},{key:"renderActions",value:function(){return this.actionListView.render(),this}},{key:"showPowerUps",value:function(e){y.stop(e);var t=f.me();t&&P&&!t.isDismissed(P)&&t.dismiss(P);var r,n,i=this.sidebarView.getBoardView();if(i.toggleDirectory(),this.model.canEnableAdditionalPowerUps()||p.sendTrackEvent({action:"exceeded",actionSubject:"powerUpLimit",source:"inBoardPowerUpDirectory",containers:{board:{id:this.model.id},organization:{id:null===(r=this.model)||void 0===r?void 0:r.get("idOrganization")},enterprise:{id:null===(n=this.model)||void 0===n?void 0:n.get("idEnterprise")}},attributes:{fromBoardMenu:!0,fromCard:!1}}),!i.directoryView){var o=this.$(e.target).hasClass("js-power-up-empty-slot");this.sendGASEvent&&(o?p.sendClickedButtonEvent({buttonName:"emptyPowerUpSlotButton",source:"boardMenuDrawerDefaultScreen",containers:{board:{id:this.model.id}}}):this.sidebarView.sendClickedDrawerNavItemEvent("default","powerUpDirectory")),B("board view","opens","Power-Up directory home page","","","by clicking ".concat(o?"empty Power-Up slot":"Power-Ups button"," in sidebar"))}this.model.daysUntilPluginsDisable()||R("Board Menu","Open Power-Ups")}},{key:"showCardFilter",value:function(e){y.stop(e),this.sidebarView.pushView("filter")}},{key:"openStickers",value:function(e){y.stop(e),this.sidebarView.pushView("stickers")}},{key:"openAboutThisBoard",value:function(e){y.stop(e),this.sidebarView.pushView("about")}},{key:"changeBackground",value:function(e){y.stop(e),this.sidebarView.pushView("background")}},{key:"openActivity",value:function(e){y.stop(e),this.sidebarView.pushView("activity"),this.setDateLastViewedActionsAsNow()}},{key:"openMore",value:function(e){y.stop(e),this.sidebarView.pushView("more")}},{key:"remove",value:function(){return"function"==typeof this.unmountBCPrompt&&this.unmountBCPrompt(),this.setDateLastViewedActionsAsNow(),o(l(N.prototype),"remove",this).apply(this,arguments)}},{key:"renderPowerUpSlots",value:function(){var e=this.$(".js-power-up-slots-container"),t=this.subview(h,this.model);return this.appendSubview(t,e)}},{key:"enterpriseUpsellDismiss",value:function(){var e=this.model.get("idOrganization");return f.me().dismiss("enterprise-upsell-board-sidebar"),B(A.BOARD_SIDEBAR,D.DISMISSES,A.ENTERPRISE_UPSELL,"","",'by clicking "Dismiss"'),this.sendGASEvent&&p.sendDismissedComponentEvent({componentType:"inlineDialog",componentName:"boardMenuDrawerEnterpriseUpsellInlineDialog",containers:{organization:{id:e}}}),this.$(".enterprise-up-sell.on-board").remove()}},{key:"enterpriseUpsellLearnMore",value:function(){var e,t,r,n,i=this.model.get("idOrganization"),o=(null===(e=this.model)||void 0===e||null===(t=e.getOrganization())||void 0===t?void 0:t.isBusinessClass())?"bc":(null===(r=this.model)||void 0===r||null===(n=r.getOrganization())||void 0===n?void 0:n.isStandard())?"standard":"free";return B(A.BOARD_SIDEBAR,D.OPENS,A.ENTERPRISE_MARKETING_PAGE,"","",'by clicking "Learn More"',{idOrganization:i,orgType:o}),this.sendGASEvent&&p.sendClickedLinkEvent({linkName:"learnMoreLink",source:"boardMenuDrawerEnterpriseUpsellInlineDialog",containers:{organization:{id:i,type:o}}}),window.open("/enterprise?app_source=board_sidebar&org_id=".concat(i,"&org_type=").concat(o))}},{key:"openButler",value:function(e){return v.one({plugin:g,command:"show-settings",board:this.model,el:e.currentTarget})}}])&&i(k.prototype,w),E&&i(k,E),N}(k);function L(e,t){return null!=e?t(e):void 0}N.initClass(),w.extend(N.prototype,E),e.exports=N},"./app/scripts/views/board-menu/board-sidebar-power-up-slot-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,d=r("./packages/atlassian-analytics/index.ts").Analytics,p=r("./app/scripts/views/directory/directory-plugin-item-view.js"),f=r("./packages/feature-flag-client/index.ts").featureFlagClient,m=r("./app/scripts/views/lib/pop-over.js"),h=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_power_up_slot"),g=r("./packages/analytics/index.ts").trackUe,v=r("./app/scripts/controller/index.js"),b=r("./app/scripts/controller/navigate.js").navigate,y=r("./packages/config/index.ts").mapPowerUpId,k=h.renderable((function(e){e.id;var t=e.name,r=e.icon;return h.a(".board-menu-navigation-item-link.mod-enabled",{href:"#"},(function(){return h.span(".board-menu-navigation-item-link-icon.mod-enabled",{style:"background-image: url(".concat(r.url,")")}),h.raw("&nbsp;"),h.text(t)}))}));e.exports=((u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(w,e);var t,r,u,p,h=(t=w,function(){var e,r=l(t);if(c()){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function w(){return n(this,w),h.apply(this,arguments)}return r=w,p=[{key:"initClass",value:function(){this.prototype.tagName="li",this.prototype.className="board-menu-navigation-item mod-power-up-slot",this.prototype.events={click:"toggleOptions"}}}],(u=[{key:"initialize",value:function(e){var t=e.plugin;return this.plugin=t,o(l(w.prototype),"initialize",this).apply(this,arguments)}},{key:"showListingOption",value:function(){return this.plugin.id!==y}},{key:"navigateToListing",value:function(){var e=v.getBoardUrl(this.model.id,"power-up",[this.plugin.id]);if(b(e,{trigger:!0}),m.hide(),g("power-up slot","opens","Power-Up directory list page","","","by clicking view Power-Up",this.plugin.id),f.get("dataeng.gasv3-event-tracking",!1))return d.sendClickedButtonEvent({buttonName:"powerUpSlotButton",source:"boardMenuDrawerDefaultScreen",containers:{board:{id:this.model.id}},attributes:{powerUpId:this.plugin.id}})}},{key:"render",value:function(){return this.$el.html(k({id:this.plugin.id,name:this.plugin.get("name"),icon:this.plugin.get("icon")})),this}}])&&i(r.prototype,u),p&&i(r,p),w}(p)).initClass(),u=u)},"./app/scripts/views/board-menu/board-sidebar-power-up-slots-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r("./node_modules/underscore/underscore.js"),d=r("./node_modules/react/index.js"),p=r("./packages/atlassian-analytics/index.ts").Analytics,f=r("./app/scripts/db/auth.js"),m=r("./app/scripts/views/board-menu/board-sidebar-power-up-slot-view.js"),h=r("./app/scripts/controller/index.js"),g=r("./packages/feature-flag-client/index.ts").featureFlagClient,v=r("./app/scripts/view-models/member-state.js"),b=r("./app/scripts/views/internal/plugins/plugin-runner.js"),y=r("./app/scripts/views/internal/plugins/plugins-changed-signal.js"),k=r("./node_modules/bluebird/js/browser/bluebird.js"),w=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_power_up_slot"),j=r("./app/scripts/views/board-menu/BoardSidebarPuPUpsell.tsx").BoardSidebarPuPUpsell,x=r("./app/src/components/UpgradePrompts/renderUpgradePrompt.ts").renderUpgradePrompt,_=r("./app/scripts/lib/util/index.js"),O=r("./app/scripts/views/internal/view.js"),S=r("./packages/analytics/index.ts"),C=S.Noun,E=S.Verb,P=S.trackUe,T=w.renderable((function(){return w.li(".board-menu-navigation-item.mod-power-up-slot.js-empty-slot-upsell")})),A=w.renderable((function(e){var t=e.index;return w.li(".board-menu-navigation-item.mod-power-up-slot",(function(){return w.a(".board-menu-navigation-item-link.js-power-up-empty-slot",{href:"#"},(function(){return w.span(".board-menu-navigation-item-link-icon",(function(){if(null!=t)return w.text(t)})),w.raw("&nbsp;"),w.format("add-power-up")}))}))})),D=w.renderable((function(){return w.ul(".board-menu-navigation.js-power-up-slots"),w.ul(".board-menu-navigation.js-upsell-slots"),w.ul(".board-menu-navigation",(function(){return w.li(".board-menu-navigation-item.mod-power-up-slot.js-show-fewer.hide",(function(){return w.a(".board-menu-navigation-item-link",{href:"#"},(function(){return w.raw("&nbsp;"),w.format("show-fewer-power-ups")}))})),w.li(".board-menu-navigation-item.mod-power-up-slot.js-show-more.hide",(function(){return w.a(".board-menu-navigation-item-link",{href:"#"},(function(){return w.raw("&nbsp;"),w.format("view-all-power-ups")}))}))}))})),R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(R,e);var t,r,w,O,S=(t=R,function(){var e,r=l(t);if(c()){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function R(){return n(this,R),S.apply(this,arguments)}return r=R,O=[{key:"initClass",value:function(){this.prototype.events={"click .js-show-fewer":"showFewer","click .js-show-more":"showMore"}}}],(w=[{key:"initialize",value:function(){var e=this;return this.collapsed=!1,this.makeDebouncedMethods("renderPowerUpSlots"),this.listenTo(this.model,{"change:idOrganization":this.renderPowerUpSlotsDebounced}),this.listenTo(this.model.boardPluginList,{"add remove reset":function(t){return e.renderPowerUpSlotsDebounced()}}),this.subscribe(y(this.model),(function(){return e.renderPowerUpSlotsDebounced()})),this.listenTo(v,{"change:idBoardCollapsedPowerUps":this.renderPowerUpSlotsDebounced}),this.sendGASEvent=g.get("dataeng.gasv3-event-tracking",!1)}},{key:"remove",value:function(){return"function"==typeof this.unmountPupPrompt&&this.unmountPupPrompt(),o(l(R.prototype),"remove",this).apply(this,arguments)}},{key:"showFewer",value:function(e){return _.stop(e),P(C.BOARD_VIEW,E.HIDES,"Power-Up sidebar slots","","","by clicking the show fewer Power-ups button"),this.sendGASEvent&&p.sendClickedButtonEvent({buttonName:"showFewerPowerUpsButton",source:"boardMenuDrawerDefaultScreen",containers:{board:{id:this.model.id}}}),v.pushBoardCollapsedPowerUps(this.model.id)}},{key:"showMore",value:function(e){return _.stop(e),P(C.BOARD_VIEW,E.SHOWS,"Power-Up sidebar slots","","","by clicking the view all Power-ups button"),this.sendGASEvent&&p.sendClickedButtonEvent({buttonName:"showAllPowerUpsButton",source:"boardMenuDrawerDefaultScreen",containers:{board:{id:this.model.id}}}),v.pullBoardCollapsedPowerUps(this.model.id)}},{key:"isCollapsed",value:function(){return v.inSet("idBoardCollapsedPowerUps",this.model.id)}},{key:"renderPowerUpSlots",value:function(){var e=this,t=this.isCollapsed(),r=this.model.boardPluginList.models;return this.model.isButlerCore()&&(r=r.filter((function(e){return!e.isButler()}))),this.model.isMapCore()&&(r=r.filter((function(e){return!e.isMap()}))),k.map(r,(function(t){return b.getOrLoadPlugin(e.model,t.get("idPlugin"))})).map((function(t){return e.subview(m,e.model,{plugin:t,currentPage:"board view"},t.id)})).then((function(r){var n=r;return t&r.length>3&&(n=u.first(r,3)),e.ensureSubviews(n,e.$(".js-power-up-slots"))})).finally((function(){var r,n=e.$(".js-upsell-slots");"function"==typeof e.unmountPupPrompt&&e.unmountPupPrompt(),n.empty();var i=e.model.powerUpsCount(),o=i>3&&!t;e.$(".js-show-fewer").toggleClass("hide",!o);var s=i>3&&t;e.$(".js-show-more").toggleClass("hide",!s);var a=f.me(),c=e.model.getOrganization(),l=null!=(r=null!=c?c.isPremium():void 0)&&r;if(e.model.canEnableAdditionalPowerUps()){var p=1;a.isFeatureEnabled("threePlugins")&&(p=3-i),a.getPowerUpsLimit(c)>=3&&(p=i<3?3-i:1),u.times(p,(function(e){return n.append(A({index:l?void 0:e+1+i}))}))}var m=c?h.getOrganizationBillingUrl(c):void 0,g=c?c.id:void 0;return n.append(T()),e.unmountPupPrompt=x(d.createElement(j,{billingUrl:m,orgId:g}),n.find(".js-empty-slot-upsell")[0],{boardModel:e.model})}))}},{key:"render",value:function(){return this.$el.html(D()),this.renderPowerUpSlots(),this}}])&&i(r.prototype,w),O&&i(r,O),R}(O);R.initClass(),e.exports=R},"./app/scripts/views/board-menu/board-sidebar-view.js":function(e,t,r){function n(e,t,r){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=r("./packages/jquery/index.js"),p=r("./node_modules/react/index.js"),f=r("./packages/react-dom-wrapper/index.ts"),m=r("./app/scripts/views/archive/archive-view.js"),h=r("./app/scripts/db/auth.js"),g=r("./app/scripts/views/board-menu/board-menu-about-this-board-view.js"),v=r("./app/scripts/views/board-menu/board-labels-view.js"),b=r("./app/scripts/views/board-menu/board-menu-activity-view.js"),y=r("./app/scripts/views/board-menu/board-sidebar-default-view.js"),k=r("./app/scripts/views/board-menu/board-settings-view.js"),w=r("./app/scripts/views/board-menu/board-menu-more-view.js"),j=r("./app/scripts/views/board-menu/board-collections-view.js"),x=r("./app/scripts/views/board-menu/card-filter-view.js"),_=r("./app/scripts/views/board-menu/change-board-background-view.js"),O=r("./app/scripts/views/board-menu/change-board-background-select-view.js"),S=r("./packages/keybindings/index.ts"),C=S.Key,E=S.registerShortcut,P=S.Scope,T=S.unregisterShortcut,A=r("./app/scripts/views/lib/pop-over.js"),D=r("./app/scripts/views/board-menu/sticker-picker-view.js"),R=r("./app/scripts/lib/util/index.js"),B=r("./app/scripts/views/internal/view.js"),N=r("./node_modules/underscore/underscore.js"),L=r("./packages/feature-flag-client/index.ts").featureFlagClient,M=r("./app/scripts/views/internal/templates.js"),I=r("./packages/analytics/index.ts"),U=I.track,V=I.trackUe,z=r("./packages/atlassian-analytics/index.ts").Analytics,F=r("./app/src/components/ComponentWrapper/index.ts").renderComponent,$=r("./app/src/components/TemplateTips/LazyTemplateTipsPopover.tsx").LazyTemplateTipsPopover,G=r("./packages/feature-flag-client/index.ts"),H=(L=G.featureFlagClient).getTrackedVariation("board-header-filtering-experiment",!1),q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(S,e);var t,i=(t=S,function(){var e,r=u(t);if(l()){var n=u(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function S(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S),t=i.call(this,e),H||(t.onShortcut=t.onShortcut.bind(c(t)),E(t.onShortcut,{scope:P.Sidebar,key:C.f})),t}return o(S,null,[{key:"initClass",value:function(){this.prototype.events={"click .js-hide-sidebar":"hideSidebar","click .js-pop-widget-view":"popView"},this.prototype.className="board-menu-container",this.prototype.hackySidebarLifetimeEvents={filter:{didBecomeVisible(e){var t=e.$(".js-autofocus")[0];return R.setCaretAtEnd(t)}},more:{didBecomeVisible:e=>e.selectUrl()},archive:{didBecomeVisible(e){var t=e.$(".js-autofocus")[0];return R.setCaretAtEnd(t)},didBecomeRemoved:e=>(e.removeSubviews(),e.remove())}}}}]),o(S,[{key:"initialize",value:function(e){var t=e.boardView;this.boardView=t,this.listenTo(this.model,{"change:prefs.isTemplate"(){return this.handleTemplateMode(),this.renderTemplateTips()}}),this.listenTo(this.model,{"change:prefs.permissionLevel"(){return this.renderTemplateTips()}}),this.aboutView=this.subview(g,this.model,{sidebarView:this}),this.defaultView=this.subview(y,this.model,{sidebarView:this});var r=this.model.isTemplate();if(r&&!(null!=this.model?this.model.isMember(h.me()):void 0))this.viewStack=[{name:"about",view:this.aboutView}];else{this.viewStack=[{name:"default",view:this.defaultView}];var n=!!this.model.get("desc")||this.model.ownedByMember(h.me());(this.model.isPublic()&&n||r)&&this.pushView("about",{},{easeIn:!1,showSidebar:this.model.viewState.get("showSidebar")})}this.sendGASEvent=L.get("dataeng.gasv3-event-tracking",!1)}},{key:"remove",value:function(){H||T(this.onShortcut);var e=this.viewNamed("archive",{});return this.hackySidebarLifetimeEvents.archive.didBecomeRemoved(e),n(u(S.prototype),"remove",this).apply(this,arguments)}},{key:"onShortcut",value:function(){if(this.pushView("filter"),U("Keyboard Shortcuts","F - Search and Filter Cards"),this.sendGASEvent)return z.sendPressedShortcutEvent({shortcutName:"searchAndFilterCardsShortcut",source:"boardScreen",keyValue:"F"})}},{key:"render",value:function(){var e=this;return this.$el.html(M.fill(r("./app/scripts/views/templates/board_sidebar.js"))),this.defer((function(){return e.renderView()})),this}},{key:"sidebarSubviews",value:function(){return{default:y,filter:x,about:g,archive:m,stickers:D,labels:v,background:_,backgroundColors:O,backgroundPhotos:O,activity:b,more:w,settings:k,collections:j}}},{key:"viewNamed",value:function(e,t){for(var r=0,n=Array.from(this.viewStack);r<n.length;r++){var i=n[r],o=i.name,s=i.view;if(e===o)return s}var a=N.result(this,"sidebarSubviews")[e];if(null==a)throw new Error("Unknown sidebar view ".concat(e));var c="filter"===e?this.model.filter:this.model;return new a(N.extend({model:c,modelCache:this.modelCache,sidebarView:this,viewState:null!=t?t.viewState:void 0},t))}},{key:"topSidebarView",value:function(){return N.last(this.viewStack).view}},{key:"topSidebarViewOptions",value:function(){return N.last(this.viewStack).options}},{key:"topSidebarViewName",value:function(){return N.last(this.viewStack).name}},{key:"getScreenFromViewName",value:function(e){null==e&&(e=this.topSidebarViewName());var t=e[0].toUpperCase()+e.slice(1);return"boardMenuDrawer".concat(t,"Screen")}},{key:"sendDrawerScreenEvent",value:function(e,t){if(this.sendGASEvent)return z.sendScreenEvent({name:this.getScreenFromViewName(),containers:{board:{id:this.model.id},organization:{id:K(this.model.getOrganization(),(function(e){return e.id}))||""}},attributes:{previousDrawerScreen:this.getScreenFromViewName(e),drawerNavigationMethod:t}})}},{key:"renderView",value:function(e){null==e&&(e={});var t=e,r=t.direction,n=t.callOnce,i=t.easeIn,o=this.$(".js-board-menu-title"),s=this.$(".js-board-menu-title-text").empty(),a=this.$(".js-board-menu-content-wrapper").empty().scrollTop(0),c=this.topSidebarView();this.$(".board-menu-header").toggleClass("no-transition",!i),a.toggleClass("no-padding",!0===c.noPadding),null!=c.headerDisplayTypeClass?this.$(".js-board-menu-title").addClass(c.headerDisplayTypeClass):1===this.viewStack.length?this.$(".js-board-menu-title").addClass("is-board-menu-default-view"):this.$(".js-board-menu-title").removeClass("is-board-menu-default-view");var l=c.renderIfNecessary().$el;null!=r&&l.addClass(r);var u=c.getViewTitle();return u?(o.addClass("is-in-frame"),s.append(u)):o.removeClass("is-in-frame"),a.append(l),null!=n&&d(".board-menu-content-frame").one("transitionend webkitTransitionEnd",(function(e){return n(c)})),this.defer((function(){if(null!=r)return l.removeClass(r)})),c.delegateEvents(),this}},{key:"renderTemplateTips",value:function(){var e=this;return this.model.isTemplate()&&(null!=this.model?this.model.isMember(h.me()):void 0)&&(null!=this.model?this.model.isPublic():void 0)?(d(".board-wrapper").append('<div class="template-tips"></div>'),this.targetDiv=d(".template-tips")[0],F(p.createElement($,{boardId:this.model.id,name:this.model.get("name"),username:h.me().get("username"),toggleAboutThisTemplate:function(){return e.pushView("about")},toggleBackgroundSelector:function(){return e.pushView("background")},isInGallery:!!this.model.get("templateGallery")}),this.targetDiv)):this.targetDiv?(f.unmountComponentAtNode(this.targetDiv),this.targetDiv=null):void 0}},{key:"pushView",value:function(e,t,r){var n;null==t&&(t={}),null==r&&(r={});var i=r,o=i.animate,s=i.showSidebar,a=i.easeIn;null==o&&(o=!0),null==s&&(s=!0),null==a&&(a=!0);var c=this.viewNamed(e,t),l=null!=K(null!=this.hackySidebarLifetimeEvents?this.hackySidebarLifetimeEvents[e]:void 0,(function(e){return e.didBecomeVisible}))?K(null!=this.hackySidebarLifetimeEvents?this.hackySidebarLifetimeEvents[e]:void 0,(function(e){return e.didBecomeVisible})):function(){},u=c===this.topSidebarView(),p=this.model.viewState.get("showSidebar");if(p?u?l(c):n=l:d(".board-menu").one("transitionend webkitTransitionEnd",(function(e){return l(c)})),s&&!p&&this.model.viewState.setShowSidebar(!0),!u){var f=this.topSidebarViewName();this.viewStack.push({name:e,view:c,options:t});var m=o?"is-right-of-frame":void 0;this.renderView({direction:m,callOnce:n,easeIn:a}),V("board sidebar","opens","".concat(this.topSidebarViewName()," view"),"from ".concat(f," view"),"","",{boardId:this.model.id,teamId:K(this.model.getOrganization(),(function(e){return e.id}))}),this.sendDrawerScreenEvent(f,"push"),A.hide()}}},{key:"popView",value:function(){if(1!==this.viewStack.length){var e=K(this.topSidebarViewOptions(),(function(e){return e.resetTo}));if(e)return this.resetTo(e);var t=this.topSidebarViewName();this.topSidebarView().remove(),this.viewStack.pop(),this.renderView({animate:"is-left-of-frame",easeIn:!0}),V("board sidebar","opens","".concat(this.topSidebarViewName()," view"),"from ".concat(t," view"),"","by clicking on back button",{boardId:this.model.id,teamId:K(this.model.getOrganization(),(function(e){return e.id}))}),this.sendDrawerScreenEvent(t,"back"),A.hide()}}},{key:"resetTo",value:function(e,t){null==t&&(t={});var r=t.animate;null==r&&(r=!0);for(var n=this.topSidebarViewName();1!==this.viewStack.length;)this.viewStack.pop();e&&this.pushView(e,{},t),this.renderView({animate:r?"is-left-of-frame":void 0}),V("board sidebar","opens","".concat(this.topSidebarViewName()," view"),"from ".concat(n," view"),"","via reset",{boardId:this.model.id,teamId:K(this.model.getOrganization(),(function(e){return e.id}))}),this.sendDrawerScreenEvent(n,"reset"),A.hide()}},{key:"hideSidebar",value:function(){this.model.viewState.setShowSidebar(!1),V("board sidebar","closes","sidebar","on ".concat(this.topSidebarViewName()," view"),"","",{boardId:this.model.id,teamId:K(this.model.getOrganization(),(function(e){return e.id}))}),this.sendGASEvent&&z.sendClickedButtonEvent({buttonName:"boardMenuDrawerCloseButton",source:this.getScreenFromViewName(),containers:{board:{id:this.model.id},organization:{id:K(this.model.getOrganization(),(function(e){return e.id}))}}})}},{key:"getBoardView",value:function(){return this.boardView}},{key:"handleTemplateMode",value:function(){var e=this.model.isTemplate();return e&&!this.model.owned()?(this.viewStack=[{name:"about",view:this.aboutView}],this.renderView()):e||"about"===this.topSidebarViewName()?(this.viewStack=[{name:"default",view:this.defaultView}],this.pushView("about",{},{easeIn:!1,showSidebar:this.model.viewState.get("showSidebar")})):void 0}},{key:"sendClickedDrawerNavItemEvent",value:function(e,t,r){null==r&&(r={});var n=["makeTemplateFromBoard","convertToBoard"].includes(t);if(this.sendGASEvent||n){e=e[0].toUpperCase()+e.slice(1).toLowerCase();var i={action:"clicked",actionSubject:"drawerNavigationItem",actionSubjectId:(t=t[0].toLowerCase()+t.slice(1))+"DrawerNavigationItem",source:"boardMenuDrawer".concat(e,"Screen"),containers:{board:{id:this.model.id},organization:{id:K(this.model.getOrganization(),(function(e){return e.id}))}}};return Object.keys(r).length&&(i.attributes=r),z.sendUIEvent(i)}}}]),S}(B);function K(e,t){return null!=e?t(e):void 0}q.initClass(),e.exports=q},"./app/scripts/views/board-menu/change-board-add-member-perms-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l,u=r("./app/scripts/views/board-menu/change-board-perms-view.js");e.exports=((l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,e);var t,l,u,d,p=(t=f,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function f(){return n(this,f),p.apply(this,arguments)}return l=f,d=[{key:"initClass",value:function(){this.prototype.viewTitleKey="add member permissions"}}],(u=[{key:"getTemplate",value:function(){return r("./app/scripts/views/templates/board_menu_invitations.js")}},{key:"getPerm",value:function(){return"invitations"}}])&&i(l.prototype,u),d&&i(l,d),f}(u)).initClass(),l=l)},"./app/scripts/views/board-menu/change-board-background-colors-component-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("./app/scripts/data/backgrounds.js"),u=r("./node_modules/react/index.js"),d=r("./node_modules/underscore/underscore.js"),p=r("./packages/analytics/index.ts").track,f=r("./packages/atlassian-analytics/index.ts"),m=f.Analytics,h=f.tracingCallback,g=[];for(var v in l){var b=l[v];"default"===b.type&&(g=g.concat({key:v,name:v,color:b.color}))}var y=function(e){var t=e.setBackgroundColor,r=e.name,n=e.color,i=e.boardId;return u.createElement("div",{onClick:function(){var e=m.startTask({taskName:"edit-board",subTask:"prefs/background",source:"boardMenuDrawerBackgroundColorsScreen"});p("Board Menu","Change Background",r),t(r,n,e,h({taskName:"edit-board",subTask:"prefs/background",source:"boardMenuDrawerBackgroundColorsScreen",traceId:e},(function(e,t){t&&m.sendUpdatedBoardFieldEvent({field:"background",value:r,source:"boardMenuDrawerBackgroundColorsScreen",containers:{board:{id:i}},attributes:{backgroundType:"color"}})})))},className:"board-backgrounds-section-tile"},u.createElement("div",{className:"image",style:{backgroundColor:n}}))},k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(m,e);var t,r,l,p,f=(t=m,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function m(){return n(this,m),f.apply(this,arguments)}return r=m,p=[{key:"initClass",value:function(){this.prototype.displayName="ColorsView"}}],(l=[{key:"render",value:function(){var e=this.props.setBackgroundColor;return u.createElement("div",null,g.map((function(t){return u.createElement(y,d.extend({setBackgroundColor:e},t))})))}}])&&i(r.prototype,l),p&&i(r,p),m}(u.Component);k.initClass(),e.exports=k},"./app/scripts/views/board-menu/change-board-background-photos-component-view/index.js":function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,d,p=r("./node_modules/react/index.js"),f=r("./app/scripts/lib/localize.js"),m=r("./node_modules/underscore/underscore.js").debounce,h=r("./packages/unsplash/index.ts").unsplashClient,g=r("./app/scripts/views/board-menu/change-board-background-photos-component-view/photos-list.js"),v=h.constants.DEFAULT_COLLECTION_ID,b=(u=Math.ceil(screen.height/112*2),(d=Math.ceil(1.5*u))%2&&d++,d),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t,r=(t=n,function(){var e,r=l(t);if(c()){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function n(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=function(e){return{connectionError:!1,id:e,images:[],isLoading:!1,marker:null,maxPage:1,page:1}};return(t=r.call(this,e)).state={collections:[i(v),i("search")],defaultCollectionActive:!0,defaultCollectionShowTitle:!1,queueID:0,searchTerm:null},t.renderList=t.renderList.bind(a(t)),t.onSearchInputChange=t.onSearchInputChange.bind(a(t)),t.nextPage=t.nextPage.bind(a(t)),t.updateCollection=t.updateCollection.bind(a(t)),t.showErrorInCollection=t.showErrorInCollection.bind(a(t)),t.getUnsplashBackgrounds=t.getUnsplashBackgrounds.bind(a(t)),t.bindObserver=t.bindObserver.bind(a(t)),t.bindMarkers=t.bindMarkers.bind(a(t)),t.debouncedGetUnsplashBackgrounds=m(t.getUnsplashBackgrounds,250),t}return i(n,null,[{key:"initClass",value:function(){this.prototype.displayName="PhotosView"}}]),i(n,[{key:"componentDidMount",value:function(){return this.getUnsplashBackgrounds(v)}},{key:"render",value:function(){var e=this.state,t=e.defaultCollectionActive,r=e.defaultCollectionShowTitle,n=e.searchTerm;return p.createElement("div",{className:"board-backgrounds-photos"},p.createElement("div",{className:"search-photos"},p.createElement("input",{onChange:this.onSearchInputChange,placeholder:f(["background photos","photos"]),type:"text"}),p.createElement("span",{className:"icon-sm icon-search"})),p.createElement("div",{className:"board-backgrounds-list-observer",ref:this.bindObserver},n?this.renderList("search"):void 0,r?p.createElement("div",{className:"collection-title"},f(["background photos","top picks"])):void 0,t?this.renderList(v):void 0))}},{key:"renderList",value:function(e){var t=this.props.boardId,r=this.state.collections.filter((function(t){return t.id===e}))[0],n=r.connectionError,i=r.images,o=r.isLoading,s=r.maxPage,a=r.page;return p.createElement(g,{boardId:t,collectionID:e,connectionError:n,images:i,isLoading:o,maxPage:s,page:a,registerMarker:this.registerMarker(e)})}},{key:"onSearchInputChange",value:function(e){var t=this.state.collections,r=e.target.value.trim();if(this.setState({collections:t.map((function(e){return"search"===e.id&&(e.images=[],e.isLoading=!0),e})),defaultCollectionActive:!r,defaultCollectionShowTitle:!1,searchTerm:r}),r)return this.debouncedGetUnsplashBackgrounds("search")}},{key:"nextPage",value:function(e){var t=this.state.collections.filter((function(t){return t.id===e}))[0].page;return this.getUnsplashBackgrounds(e,t+1)}},{key:"updateCollection",value:function(e,t,r){var n=this.state.collections.map((function(n){return n.id===e&&(n.connectionError=!1,n.images=n.images.concat(t),n.isLoading=!1,n.maxPage=r),n})),i=!0,o=!1;return"search"===e&&(o=i=!n.filter((function(e){return"search"===e.id}))[0].images.length),this.setState({collections:n,defaultCollectionActive:i,defaultCollectionShowTitle:o})}},{key:"showErrorInCollection",value:function(e){return this.setState({collections:this.state.collections.map((function(t){return t.id===e&&(t.connectionError=!0,t.isLoading=!1),t}))})}},{key:"getUnsplashBackgrounds",value:function(e,t){var r=this;null==t&&(t=1);var n=this.state.queueID,i=this.state,o=i.collections,s=i.searchTerm;return n++,this.setState({queueID:n,collections:o.map((function(r){return r.id===e&&(r.page=t,r.isLoading=!0),r}))}),("search"===e?h.searchPhotos(s,t,b,!0).then((function(t){var i=t.results,o=t.total;if(r.state.queueID===n)return r.updateCollection(e,i,Math.ceil(o/b))})):h.getCollectionPhotos(e,t,b,"latest").then((function(n){var i=t+1;return n.length<b&&(i=t),r.updateCollection(e,n,i)}))).catch((function(){return r.showErrorInCollection(e)}))}},{key:"registerMarker",value:function(e){var t=this;return function(r){if(r){var n=t.state.collections.map((function(t){return t.id===e&&(t.marker=r),t}));return t.setState({collections:n}),t.observer?t.bindMarkers():void 0}}}},{key:"bindObserver",value:function(e){var t=this;if(!this.observer&&e){var r=this.state.collections;return this.observer=new IntersectionObserver((function(e){return function(){for(var n=[],i=function(){var e=s[o],i=e.isIntersecting||e.intersectionRatio,a=r.filter((function(t){return t.marker===e.target}))[0];i&&!a.isLoading?n.push(t.nextPage(a.id)):n.push(void 0)},o=0,s=Array.from(e);o<s.length;o++)i();return n}()}),{root:e}),this.bindMarkers()}}},{key:"bindMarkers",value:function(){var e=this,t=this.state.collections;return this.observer.disconnect(),function(){for(var r=[],n=0,i=Array.from(t);n<i.length;n++){var o=i[n];o.marker?r.push(e.observer.observe(o.marker)):r.push(void 0)}return r}()}}]),n}(p.Component);y.initClass(),e.exports=y},"./app/scripts/views/board-menu/change-board-background-photos-component-view/photos-list.js":function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r("./node_modules/react/index.js"),d=r("./app/scripts/lib/localize.js"),p=r("./packages/analytics/index.ts").track,f=r("./packages/unsplash/index.ts").unsplashClient,m=r("./app/scripts/views/board-create/photo-attribution-component.js"),h=r("./packages/atlassian-analytics/index.ts").Analytics,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(g,e);var t,n=(t=g,function(){var e,r=l(t);if(c()){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function g(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(t=n.call(this,e)).state={uploadingImageID:null},t.thumbMap=t.thumbMap.bind(a(t)),t.addMarker=t.addMarker.bind(a(t)),t}return i(g,null,[{key:"initClass",value:function(){this.prototype.displayName="PhotosList"}}]),i(g,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=r.images,i=r.isLoading,o=this.state.uploadingImageID;return n.length!==e.images.length||i!==e.isLoading||o!==t.uploadingImageID}},{key:"render",value:function(){var e=this.props,t=e.collectionID,r=e.connectionError,n=e.images,i=e.isLoading,o=e.maxPage>e.page,s=i?"logo-loading active":"logo-loading",a=n.map(this.thumbMap);return o&&(a=this.addMarker(a)),u.createElement("div",{className:"board-backgrounds-list"},a.length?a:"search"!==t||i||r?void 0:u.createElement("div",{className:"no-results"},d(["background photos","no results"])),r?u.createElement("div",{className:"error"},d(["background photos","connection error unsplash"])):void 0,u.createElement("div",{className:s}))}},{key:"thumbMap",value:function(e,t){var r=this.state.uploadingImageID;return u.createElement("div",{className:"board-background-select",key:["thumb",t,e.id].join(":"),onClick:this.setUnsplashBackground(e)},u.createElement("span",{className:"background-box",style:{backgroundImage:"url(".concat(e.urls.thumb,")")}},r===e.id?u.createElement("div",{className:"uploading"},u.createElement("span",{className:"spinner small u-float-left"}),d(["templates","board_background_selection","uploading-ellipsis"])):u.createElement(m,{user:e.user,size:"large"})))}},{key:"setUnsplashBackground",value:function(e){var t=this;return function(){var n=h.startTask({taskName:"edit-board",subTask:"prefs/background",source:"boardMenuDrawerBackgroundPhotosScreen"}),i=r("./app/scripts/network/api-promise.js"),o=t.props.boardId;return p("Board Menu","Change Background","unsplash-".concat(e.id)),f.trackDownload(e),t.setState({uploadingImageID:e.id}),i({traceId:n,url:"/1/boards/".concat(o,"/prefs/background"),type:"post",data:{url:f.appendImageParameters(e.urls.raw)}}).then((function(){h.sendUpdatedBoardFieldEvent({field:"background",value:"unsplash-".concat(e.id),source:"boardMenuDrawerBackgroundPhotosScreen",containers:{board:{id:o}},attributes:{backgroundType:"photo"}}),h.taskSucceeded({taskName:"edit-board",subTask:"prefs/background",source:"boardMenuDrawerBackgroundPhotosScreen",traceId:n})})).catch((function(e){throw h.taskFailed({taskName:"edit-board",subTask:"prefs/background",source:"boardMenuDrawerBackgroundPhotosScreen",traceId:n,error:e})})).finally((function(){return t.setState({uploadingImageID:null})}))}}},{key:"addMarker",value:function(e){var t=this.props.registerMarker,r=u.createElement("div",{key:"marker",className:"scroll-marker",ref:t});return e.splice(-8,0,r),e}}]),g}(u.Component);g.initClass(),e.exports=g},"./app/scripts/views/board-menu/change-board-background-select-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("./app/scripts/views/board-menu/change-board-background-colors-component-view.js"),u=r("./app/scripts/views/board-menu/change-board-background-photos-component-view/index.js"),d=r("./node_modules/react/index.js"),p=r("./packages/react-dom-wrapper/index.ts"),f=r("./app/scripts/views/internal/view.js"),m=r("./node_modules/xtend/immutable.js"),h=r("./packages/unsplash/index.ts").unsplashClient,g={colors:l,photos:u},v=function(e){var t={};for(var r in e){var n=e[r];r.indexOf("background")>-1&&(t[r]=n)}return t},b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(b,e);var t,r,l,u,f=(t=b,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function b(){return n(this,b),f.apply(this,arguments)}return r=b,u=[{key:"initClass",value:function(){this.prototype.viewTitleArguments={unsplashUrl:h.attributionUrl},this.prototype.className="board-menu-content-frame"}}],(l=[{key:"viewTitleKey",value:function(){return"colors"===this.options.component?"change background colors":"change background photos"}},{key:"initialize",value:function(){this.listenTo(this.model,"change:prefs.background change:prefs.backgroundTile change:prefs.backgroundBrightness",this.frameDebounce(this.render))}},{key:"render",value:function(){var e=this,t={boardId:this.model.id,backgroundPrefs:v(this.model.attributes.prefs)};"colors"===this.options.component&&(t.setBackgroundColor=function(t,r,n,i){e.model.set({prefs:m(e.model.get("prefs"),{background:t,backgroundColor:r,backgroundImage:null,backgroundImageScaled:null})}).setPrefWithTracing("background",t,n,i)});var r=d.createElement(g[this.options.component],t);return p.render(r,this.el),this}}])&&i(r.prototype,l),u&&i(r,u),b}(f);b.initClass(),e.exports=b},"./app/scripts/views/board-menu/change-board-background-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r("./app/scripts/views/lib/alerts.js"),d=r("./packages/atlassian-analytics/index.ts"),p=d.Analytics,f=d.tracingCallback,m=r("./app/scripts/db/auth.js"),h=r("./app/scripts/db/model-loader.js"),g=r("./app/scripts/views/board-menu/select-custom-background-view.js"),v=r("./app/scripts/lib/util/index.js"),b=r("./app/scripts/views/internal/view.js"),y=r("./node_modules/underscore/underscore.js"),k=r("./packages/analytics/index.ts").track,w=r("./packages/browser/index.ts").dontUpsell,j=r("./app/scripts/views/templates/product_promo_disable_overlay.js"),x=r("./app/scripts/views/templates/board_change_background.js"),_=r("./app/scripts/views/board-menu/board-add-to-team-view.js"),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(S,e);var t,r,d,b,O=(t=S,function(){var e,r=l(t);if(c()){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function S(){return n(this,S),O.apply(this,arguments)}return r=S,b=[{key:"initClass",value:function(){this.prototype.viewTitleKey="change background",this.prototype.className="board-menu-content-frame",this.prototype.events={"click .js-bg-colors":"openBackgroundColors","click .js-bg-photos":"openBackgroundPhotos","change .js-upload-image":"setUploadImage"}}}],(d=[{key:"initialize",value:function(e){var t,r,n=this,i=e.sidebarView;this.sidebarView=i,o(l(S.prototype),"initialize",this).apply(this,arguments),this.makeDebouncedMethods("render","renderCustomBackgrounds"),this.listenTo(m.me().boardBackgroundList,"change add remove reset",this.renderCustomBackgroundsDebounced),this.listenTo(this.model,"cancel-add-to-team",(function(){return n.addToTeam=!1,n.render()})),(m.me().hasPremiumFeature("customBoardBackgrounds")||(null===(t=this.model)||void 0===t||null===(r=t.getOrganization())||void 0===r?void 0:r.hasPremiumFeature("customBoardBackgrounds")))&&h.loadMemberCustomBackgrounds(m.myId()).done()}},{key:"fillBackgroundList",value:function(e,t,r){var n=this;null==r&&(r=g),e.find(".js-select-background:not(.js-uploader)").remove(),this.appendSubviews(Array.from(t).map((function(e){return n.subview(r,e,{board:n.model})})),e)}},{key:"render",value:function(){var e,t;this.$el.empty();var r=this.model.toJSON();return r.enabled_customBoardBackgrounds=m.me().hasPremiumFeature("customBoardBackgrounds")||(null===(e=this.model)||void 0===e||null===(t=e.getOrganization())||void 0===t?void 0:t.hasPremiumFeature("customBoardBackgrounds")),r.idMember=m.myId(),r.upsellEnabled=!w(),this.addToTeam?(h.loadMyOrganizations(),this.$el.parent().addClass("no-padding"),this.appendSubview(this.subview(_,this.model,{menuType:"Change Background"}))):(this.$el.html(x(r)),this.renderCustomBackgrounds()),this}},{key:"renderCustomBackgrounds",value:function(){var e,t,r=m.me().hasPremiumFeature("customBoardBackgrounds")||(null===(e=this.model)||void 0===e||null===(t=e.getOrganization())||void 0===t?void 0:t.hasPremiumFeature("customBoardBackgrounds")),n=this.$(".js-custom-list");if(r){var i=this.modelCache.get("Member",m.myId()).boardBackgroundList.chain().filter((function(e){return"custom"===e.get("type")})).sortBy("id").reverse().value();this.fillBackgroundList(n,i,g),n.find(".js-uploader").prependTo(n)}else n.append(j());return this}},{key:"uploadBackgroundsAndAddPreviews",value:function(e){var t=this;return Array.from(e).map((function(e,r){return function(r){var n,i,o=new FileReader;if(v.validFileSize(e)){var s=p.startTask({taskName:"create-attachment",subTask:"boardBackground",source:"boardMenuDrawerBackgroundUploadScreen"}),a=new FormData;a.append("token",m.myToken()),a.append("file",e);var c=null===(n=t.model)||void 0===n||null===(i=n.getOrganization())||void 0===i?void 0:i.id;return c&&a.append("idOrganization",c),o.onload=function(e){return t.modelCache.get("Member",m.myId()).boardBackgroundList.createWithTracing({type:"custom",fullSizeUrl:e.target.result},{data:a,processData:!1,contentType:!1,traceId:s,error:function(e,r){p.taskFailed({taskName:"create-attachment",subTask:"boardBackground",source:"boardMenuDrawerBackgroundUploadScreen",traceId:s,error:r}),e.set("error","Failed"),t.setTimeout((function(){return e.destroy()}),5e3)},success:function(e){var r=t.model;return y.extend(r.attributes.prefs,{backgroundColor:e.get("color"),backgroundImage:e.get("fullSizeUrl"),backgroundImageScaled:e.get("scaled"),backgroundTile:e.get("tile"),backgroundBrightness:e.get("brightness")}),r.setPrefWithTracing("background",e.id,s,f({taskName:"create-attachment",subTask:"boardBackground",source:"boardMenuDrawerBackgroundUploadScreen",traceId:s},(function(e,r){var n,i;r&&p.sendTrackEvent({action:"uploaded",actionSubject:"background",source:"boardMenuDrawerBackgroundUploadScreen",containers:{board:{id:t.model.id},organization:{id:null===(n=t.model)||void 0===n||null===(i=n.getOrganization())||void 0===i?void 0:i.id}},attributes:{backgroundType:"custom"}})})))}})},o.readAsDataURL(e)}u.flash("file too large","error")}()}))}},{key:"setUploadImage",value:function(e){v.stop(e);var t=this.$(".js-upload-image");if(null==t.prop("files")&&t.val())v.uploadFile(m.myToken(),t,(function(){}));else{var r=t[0].files;r.length>0&&(this.uploadBackgroundsAndAddPreviews(r),k("Board Menu","Upload Custom Background"))}}},{key:"openBackgroundColors",value:function(e){v.stop(e),this.sidebarView.pushView("backgroundColors",{component:"colors"})}},{key:"openBackgroundPhotos",value:function(e){v.stop(e),this.sidebarView.pushView("backgroundPhotos",{component:"photos"})}}])&&i(r.prototype,d),b&&i(r,b),S}(b);O.initClass(),e.exports=O},"./app/scripts/views/board-menu/change-board-commenting-perms-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l,u=r("./app/scripts/views/board-menu/change-board-perms-view.js");e.exports=((l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,e);var t,l,u,d,p=(t=f,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function f(){return n(this,f),p.apply(this,arguments)}return l=f,d=[{key:"initClass",value:function(){this.prototype.viewTitleKey="commenting permissions"}}],(u=[{key:"getTemplate",value:function(){return r("./app/scripts/views/templates/board_menu_commenting.js")}},{key:"getPerm",value:function(){return"comments"}}])&&i(l.prototype,u),d&&i(l,d),f}(u)).initClass(),l=l)},"./app/scripts/views/board-menu/change-board-perms-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("./packages/jquery/index.js"),u=r("./packages/atlassian-analytics/index.ts"),d=u.Analytics,p=u.tracingCallback,f=r("./app/scripts/views/internal/board-display-helpers.js"),m=r("./app/scripts/views/lib/pop-over.js"),h=r("./app/scripts/lib/util/index.js"),g=r("./app/scripts/views/internal/view.js"),v=r("./app/scripts/views/internal/templates.js"),b=r("./packages/analytics/index.ts").track,y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(k,e);var t,r,u,g,y=(t=k,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function k(){return n(this,k),y.apply(this,arguments)}return r=k,g=[{key:"initClass",value:function(){this.prototype.viewTitleKey="change permissions",this.prototype.events={"click .js-select":"selectPerm"}}}],(u=[{key:"initialize",value:function(){this.listenTo(this.model,"change",this.frameDebounce(this.render))}},{key:"render",value:function(){var e,t=this.model.toJSON({prefs:!0,url:!0});t.cardCovers=t.prefs.cardCovers;var r=this.model.getOrganization();t.hasOrg=null!=(null!=r?r.id:void 0),t.orgCanSee=t.hasOrg&&(e=this.model.getPref("permissionLevel"),["public","org"].includes(e)),t.premium=null!=r?r.isFeatureEnabled("observers"):void 0,t.voting_showObservers=(t.premium||t.voting_observers)&&t.hasOrg,t.comments_showObservers=(t.premium||t.comments_observers)&&t.hasOrg,t.pLevelClass=f.getPermLevelIconClassForBoard(this.model),(null!=r?r.owned():void 0)?(t.orgOwner=!0,t.orgName=r.get("displayName"),this.model.owned()||(t.setOrgNull=!0)):this.model.owned()||(t.noEditOrg=!0);var n=this.getTemplate();return this.$el.html(v.fillMenu(n,t,{editable:this.model.editable(),owned:this.model.owned()})),this}},{key:"selectPerm",value:function(e){var t=this;h.stop(e),b("Board","Change ".concat(this.getPerm()));var r=l(e.target).closest(".js-select");if(!r.hasClass("disabled")&&!r.closest(".js-disabled").length){var n=this.getPerm(),i="prefs/".concat(n),o=d.startTask({taskName:"edit-board",subTask:i,source:"changeBoardPermissionsInlineDialog"}),s=r.attr("name");this.model.setPrefWithTracing(n,s,o,p({taskName:"edit-board",subTask:i,source:"changeBoardPermissionsInlineDialog",traceId:o},(function(e,r){var i,a;r&&d.sendUpdatedBoardFieldEvent({field:"".concat(n,"Pref"),value:s,source:"changeBoardPermissionsInlineDialog",attributes:{taskId:o},containers:{board:{id:t.model.id},organization:{id:(i=t.model.getOrganization(),a=function(e){return e.id},null!=i?a(i):void 0)}}})}))),this.model.save(),m.popView()}}}])&&i(r.prototype,u),g&&i(r,g),k}(g);y.initClass(),e.exports=y},"./app/scripts/views/board-menu/custom-background-options-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("./packages/jquery/index.js"),u=r("./app/scripts/views/lib/confirm.js"),d=r("./app/scripts/lib/util/index.js"),p=r("./app/scripts/views/internal/view.js"),f=r("./app/scripts/views/internal/templates.js"),m=r("./packages/analytics/index.ts").track,h=r("./packages/atlassian-analytics/index.ts"),g=h.Analytics,v=h.tracingCallback,b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(k,e);var t,p,h,b,y=(t=k,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function k(){return n(this,k),y.apply(this,arguments)}return p=k,b=[{key:"initClass",value:function(){this.prototype.viewTitleKey="background options",this.prototype.events={"click .js-delete-background":"deleteBackground","click .js-select-option":"selectOption"}}}],(h=[{key:"initialize",value:function(){return this.listenTo(this.model,"change",this.render)}},{key:"render",value:function(){var e=this.model.toJSON();e.tile=this.model.get("tile");var t=this.model.get("brightness");return e.brightnessLight="light"===t,e.brightnessDark="dark"===t,this.$el.html(f.fill(r("./app/scripts/views/templates/board_background_options.js"),e)),this}},{key:"selectOption",value:function(e){var t=this,r=l(e.target).closest(".js-select-option"),n=g.startTask({taskName:"edit-member",subTask:"customBoardBackgrounds",source:"boardMenuDrawerBackgroundScreen"}),i={traceId:n};if(null!=r.attr("data-board-brightness"))i.brightness=r.attr("data-board-brightness");else if(null!=r.attr("data-background-display-type")){var o=r.attr("data-background-display-type");i.tile="tile"===o}this.model.update(i,v({taskName:"edit-member",subTask:"customBoardBackgrounds",source:"boardMenuDrawerBackgroundScreen",traceId:n},(function(e,r){r&&g.sendTrackEvent({action:"changed",actionSubject:"background",source:"boardMenuDrawerBackgroundScreen",containers:{board:{id:t.model.id}},attributes:{taskId:n,brightness:i.brightness,tile:i.tile}})})))}},{key:"deleteBackground",value:function(e){var t=this;return d.stop(e),u.pushView("delete background",{elem:l(e.target).closest(".js-delete-background"),model:this.model,confirmBtnClass:"nch-button nch-button--danger",fxConfirm:function(e){var r=g.startTask({taskName:"delete-attachment",subTask:"boardBackground",source:"boardMenuDrawerBackgroundScreen"});t.model.destroyWithTracing({traceId:r},v({taskName:"delete-attachment",subTask:"boardBackground",source:"boardMenuDrawerBackgroundScreen",traceId:r},(function(e,n){n&&g.sendTrackEvent({action:"deleted",actionSubject:"background",source:"boardMenuDrawerBackgroundScreen",containers:{board:{id:t.model.id}},attributes:{backgroundType:"custom",taskId:r}})}))),t.remove(),m("Board Menu","Change Background","Delete Uploaded Background")}})}}])&&i(p.prototype,h),b&&i(p,b),k}(p);b.initClass(),e.exports=b},"./app/scripts/views/board-menu/edit-email-settings-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r("./packages/jquery/index.js"),d=r("./node_modules/underscore/underscore.js"),p=r("./app/scripts/views/lib/alerts.js"),f=r("./packages/atlassian-analytics/index.ts").Analytics,m=r("./app/scripts/db/auth.js"),h=r("./app/scripts/views/lib/confirm.js"),g=r("./packages/feature-flag-client/index.ts").featureFlagClient,v=r("./app/scripts/db/model-loader.js"),b=r("./app/scripts/lib/util/index.js"),y=r("./app/scripts/views/internal/view.js"),k=r("./app/scripts/views/templates/board_menu_email.js"),w=r("./app/scripts/lib/localize.js"),j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(_,e);var t,r,y,j,x=(t=_,function(){var e,r=l(t);if(c()){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function _(){return n(this,_),x.apply(this,arguments)}return r=_,j=[{key:"initClass",value:function(){this.prototype.viewTitleKey="add cards via email",this.prototype.events={"change .js-select-position":"updatePosition","change .js-select-list":"updateList","click .js-generate-address":"generateAddress","click .js-send-address":"sendAddressEmail","click .js-autofocus":"focusInput"}}}],(y=[{key:"initialize",value:function(){if(o(l(_.prototype),"initialize",this).apply(this,arguments),this.listenTo(this.modelCache,"add:List remove:List change:List:closed reset:List",this.frameDebounce(this.render)),this.listenTo(this.model,"change:myPrefs",this.frameDebounce(this.render)),this.allowEmail=!0,null==this.model.getPref("emailKey"))return this.model.generateEmailKey()}},{key:"render",value:function(){var e,t=this;if(this.model.canComment(m.me())){var r,n=this.model.getPref("idEmailList"),i=this.model.listList.models.map((function(e){return{id:e.id,name:e.get("name")}})),o=function(){if(null!=(e=d.findWhere(i,{id:n})))return e.name;if(null!=(e=t.modelCache.get("List",n))&&e.get("closed")){var r=w("archived list",{listName:e.get("name")});return i.unshift({id:e.id,name:r}),r}return null!=n&&v.loadArchivedListsAndCards(t.model.id).then((function(){if(null!=t.modelCache.get("List",n))return t.render()})),w("unknown list placeholder")}();null==n&&i.unshift({name:w("unknown list placeholder"),selected:!0}),this.$el.html(k({commentsEnabled:!0,email:null!=(r=this.model.getPref("fullEmail"))?r:"",lists:i.map((function(e){return{id:e.id,name:e.name,selected:e.id===n}})),listName:o,positionName:w(["email position",this.model.getPref("emailPosition")]),position:this.model.getPref("emailPosition")}))}else this.$el.html(k({commentsEnabled:!1}));return g.get("dataeng.gasv3-event-tracking",!1)&&f.sendScreenEvent({name:"emailToBoardSettingsInlineDialog",containers:{board:{id:this.model.id}}}),this}},{key:"focusInput",value:function(e){u(e.target).focus().select()}},{key:"updateValue",value:function(e,t){var r=this.$el.find(e).val();if(null!=r&&r!==this.model.getPref(t))return this.model.setPref(t,r)}},{key:"updatePosition",value:function(){return this.updateValue(".js-select-position","emailPosition")}},{key:"updateList",value:function(){return this.updateValue(".js-select-list","idEmailList"),this.allowEmail=!0}},{key:"generateAddress",value:function(e){var t=this;b.stop(e),h.pushView("regenerate email address",{model:this.model,confirmBtnClass:"nch-button nch-button--danger",popOnClick:!0,fxConfirm:function(e){return t.model.set({"myPrefs/emailKey":null}),t.allowEmail=!0,t.model.generateEmailKey()}})}},{key:"sendAddressEmail",value:function(e){b.stop(e),this.allowEmail&&(this.allowEmail=!1,this.model.api({method:"emailKey/message",type:"post"},(function(e){return e?p.show("could not send email","error","email",5e3):p.flash("email sent","confirm")})))}}])&&i(r.prototype,y),j&&i(r,j),_}(y);j.initClass(),e.exports=j},"./app/scripts/views/board-menu/search-input-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("./packages/keybindings/index.ts"),u=l.getKey,d=l.Key,p=r("./app/scripts/views/internal/view.js"),f=r("./app/scripts/views/templates/board_sidebar_search_input.js"),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(h,e);var t,r,l,p,m=(t=h,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function h(){return n(this,h),m.apply(this,arguments)}return r=h,p=[{key:"initClass",value:function(){this.prototype.className="board-menu-content-frame",this.prototype.events={"keyup .js-input":"keyUpEvent","keydown .js-input":"keyDownEvent","click .js-search-clear-title":"clearAndFocusInput","click .js-search-open-card-filter":"showCardFilter"}}}],(l=[{key:"initialize",value:function(){return this.listenTo(this.model,"change",this.renderInputIcon)}},{key:"render",value:function(){return this.$el.html(f.renderInputRow({title:this.model.get("title"),showFilterButton:null!=(null!=this.options?this.options.showCardFilter:void 0)})),this.renderInputIcon(),this}},{key:"renderInputIcon",value:function(){return this.$(".js-input-search-icon").html(f.renderInputIcon({title:this.model.get("title")}))}},{key:"keyUpEvent",value:function(e){var t=u(e);if(![d.Escape,d.Enter,d.ArrowUp,d.ArrowDown].includes(t))return this.model.save({title:this.$(".js-input").val(),limitMembers:!0,limitLabels:!0})}},{key:"keyDownEvent",value:function(e){if(u(e)===d.Enter)return this.showCardFilter()}},{key:"clearAndFocusInput",value:function(){return this.model.save({title:""}),this.$(".js-input").val("").focus()}},{key:"showCardFilter",value:function(){return e=this.options,t="showCardFilter",r=function(e){return e.showCardFilter()},null!=e&&"function"==typeof e[t]?r(e,t):void 0;var e,t,r}}])&&i(r.prototype,l),p&&i(r,p),h}(p);m.initClass(),e.exports=m},"./app/scripts/views/board-menu/select-custom-background-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("./app/scripts/views/board-menu/custom-background-options-view.js"),u=r("./app/scripts/views/lib/pop-over.js"),d=r("./app/scripts/lib/util/index.js"),p=r("./packages/atlassian-analytics/index.ts"),f=p.Analytics,m=p.tracingCallback,h=r("./app/scripts/views/internal/templates.js"),g=r("./node_modules/underscore/underscore.js"),v=r("./app/scripts/views/internal/view.js"),b=r("./packages/analytics/index.ts").track,y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(j,e);var t,p,v,y,w=(t=j,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function j(){return n(this,j),w.apply(this,arguments)}return p=j,y=[{key:"initClass",value:function(){this.prototype.className="board-background-select js-select-background",this.prototype.events={"click .js-options":"openOptions",click:"selectBackground"}}}],(v=[{key:"initialize",value:function(){return this.listenTo(this.model,"change:id",this.render),this.listenTo(this.model,"change:error",this.render)}},{key:"render",value:function(){var e,t=this.model.toJSON();return t.pending=null==this.getId()&&null==t.error,null==t.color&&(t.backgroundImageThumbnail=null!=(e=k(d.previewBetween(this.model.get("scaled"),90,60,600,400),(function(e){return e.url})))?e:this.model.get("fullSizeUrl")),this.$el.html(h.fill(r("./app/scripts/views/templates/board_background_selection.js"),t)),this.$el.toggleClass("is-still-uploading-background",t.pending),this}},{key:"openOptions",value:function(e){return d.stop(e),f.sendClickedLinkEvent({linkName:"backgroundOptionsLink",source:"boardMenuDrawerBackgroundScreen"}),u.toggle({elem:this.$(".js-options"),view:new l({model:this.model,modelCache:this.modelCache})})}},{key:"getId",value:function(){return this.model.id}},{key:"selectBackground",value:function(e){var t,r,n=this;if(d.stop(e),null!=this.getId()){var i=f.startTask({taskName:"edit-board",subTask:"prefs/background",source:"boardMenuDrawerBackgroundScreen"}),o=this.options.board;g.extend(o.attributes.prefs,{backgroundColor:this.model.get("color"),backgroundImage:this.model.get("fullSizeUrl"),backgroundImageScaled:this.model.get("scaled"),backgroundTile:null!=(t=this.model.get("tile"))&&t,backgroundBrightness:null!=(r=this.model.get("brightness"))?r:"unknown"}),o.setPrefWithTracing("background",this.getId(),i,m({taskName:"edit-board",subTask:"prefs/background",source:"boardMenuDrawerBackgroundScreen",traceId:i},(function(e,t){t&&f.sendUpdatedBoardFieldEvent({field:"background",value:n.getId(),source:"boardMenuDrawerBackgroundScreen",containers:{board:{id:o.id},organization:{id:k(o.getOrganization(),(function(e){return e.id}))}},attributes:{backgroundType:"custom"}})}))),b("Board Menu","Change Background",this.getId())}}}])&&i(p.prototype,v),y&&i(p,y),j}(v);function k(e,t){return null!=e?t(e):void 0}y.initClass(),e.exports=y},"./app/scripts/views/board-menu/sticker-picker-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("./node_modules/underscore/underscore.js"),u=r("./packages/jquery/index.js"),d=r("./app/scripts/views/lib/alerts.js"),p=r("./packages/atlassian-analytics/index.ts"),f=p.Analytics,m=p.tracingCallback,h=r("./app/scripts/db/auth.js"),g=r("./app/scripts/views/stickers/custom-sticker-selection-view.js"),v=r("./app/scripts/views/lib/drag-sort.js"),b=r("./app/scripts/db/model-loader.js"),y=r("./node_modules/bluebird/js/browser/bluebird.js"),k=r("./app/scripts/models/Sticker.ts").Sticker,w=r("./app/scripts/data/stickers.js"),j=r("./app/scripts/views/stickers/sticker-selection-view.js"),x=r("./app/scripts/lib/util/index.js"),_=r("./app/scripts/views/internal/view.js");l=r("./node_modules/underscore/underscore.js");var O=r("./app/scripts/views/internal/templates.js"),S=r("./app/scripts/lib/localize.js"),C=r("./packages/browser/index.ts").dontUpsell,E=r("./app/scripts/views/templates/product_promo_disable_overlay.js"),P=r("./app/scripts/views/templates/sticker_select.js"),T=r("./packages/giphy/index.ts"),A=T.getGiphyApi,D=T.giphyStickersToTrelloStickers,R=T.mapTrelloLocaleToGiphyLocale,B=r("./packages/keybindings/index.ts"),N=B.getKey,L=B.Key,M=r("./app/scripts/view-models/member-state.js"),I=r("./packages/locale/index.ts"),U=r("./packages/browser/index.ts").isChrome,V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(V,e);var t,p,_,T,B=(t=V,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function V(){return n(this,V),B.apply(this,arguments)}return p=V,T=[{key:"initClass",value:function(){this.prototype.viewTitleKey="stickers",this.prototype.viewIcon="sticker",this.prototype.className="board-menu-content-frame",this.prototype.events={"keyup .js-search-stickers":"onQueryChange","change .js-upload-image":"setUploadImage","change .js-use-animated-stickers":"onAnimationPreferenceChange"}}}],(_=[{key:"initialize",value:function(){var e;this.me=h.me();var t=null!=(e=this.model.getOrganization())?e:null;return(this.me.hasPremiumFeature("additionalStickers")||(null==t?void 0:t.hasPremiumFeature("additionalStickers")))&&b.loadMemberCustomStickers(this.me.id).done(),this.listenTo(this.me.customStickerList,"change add remove reset",this.renderCustomStickers),this.searchForStickerDebounced=l.debounce(this.searchForSticker,1e3)}},{key:"render",value:function(){var e;this.$el.empty();var t=null!=(e=this.model.getOrganization())?e:null,r=this.model.toJSON();return r.additionalStickersEnabled=this.me.hasPremiumFeature("additionalStickers")||(null==t?void 0:t.hasPremiumFeature("additionalStickers"))||!1,r.upsellEnabled=!C(),r.useAnimatedStickers=M.getUseAnimatedStickers(),this.$el.html(P(r)),this.renderStandardStickers(),this.renderPremiumStickers(),this.renderCustomStickers(),this.defer((function(){return v.refreshDraggableStickers()})),this}},{key:"_getStickers",value:function(e){var t=w[e].premium;return w[e].stickers.map((function(e){return new k(l.extend({premium:t},e),{modelCache:this.modelCache})}))}},{key:"_loadStickers",value:function(e){var t="sticker-list-loading";e.addClass(t);var r=e.find(".sticker-select-image").get().map((function(e){var t=u(e);return new y((function(e){return t.load(e),t.error(e)}))}));return y.all(r).then((function(){return e.removeClass(t)})).done()}},{key:"renderStandardStickers",value:function(){var e=this,t=this.$(".js-standard-sticker-list"),r=this._getStickers("standard").map((function(t){return e.subview(j,t)}));return this.appendSubviews(r,t),this._loadStickers(t),this}},{key:"renderPremiumStickers",value:function(){var e,t=this,n=null!=(e=this.model.getOrganization())?e:null,i=this.$(".js-premium-stickers"),o=this.me.hasPremiumFeature("additionalStickers")||(null==n?void 0:n.hasPremiumFeature("additionalStickers"))||!1;for(var s in w)if(w[s].premium){var a=u(O.fill(r("./app/scripts/views/templates/sticker_pack_selection_list.js"),{displayName:S(["sticker packs",s])})),c=a.filter(".js-sticker-list"),l=this._getStickers(s).map((function(e){return t.subview(j,e,{org:n})}));this.appendSubviews(l,c),this._loadStickers(c),i.append(a),o||c.append(E())}return this}},{key:"renderCustomStickers",value:function(){var e,t=this,n=null!=(e=this.model.getOrganization())?e:null,i=this.$(".js-custom-sticker-list");if(i.children().detach(),this.me.hasPremiumFeature("customStickers")||(null==n?void 0:n.hasPremiumFeature("customStickers"))){var o=this.me.customStickerList.map((function(e){return t.subview(g,e,{org:n})}));this.appendSubviews(o,i)}else i.append(E());return i.append(O.fill(r("./app/scripts/views/templates/sticker_select_item_upload.js"),{id:this.me.id})),this.defer((function(){return v.refreshDraggableStickers()})),this}},{key:"setUploadImage",value:function(e){x.stop(e);var t=this.$(".js-upload-image");if(null==t.prop("files")&&t.val())x.uploadFile(h.myToken(),t,(function(){}));else{var r=t[0].files;r.length>0&&this.uploadStickers(r)}}},{key:"uploadStickers",value:function(e){var t=this;l.each(e,(function(e){var r,n,i=f.startTask({taskName:"create-attachment",subTask:"sticker",source:"boardMenuDrawerStickersScreen"}),o=new FileReader;if(!x.validFileSize(e))return f.taskAborted({taskName:"create-attachment",subTask:"sticker",traceId:i,source:"boardMenuDrawerStickersScreen",attributes:{reason:"file too large",fileSize:e.size,fileType:e.type}}),void d.flash("file too large","error");var s=new FormData;s.append("token",h.myToken()),s.append("file",e);var a=null===(r=t.model)||void 0===r||null===(n=r.getOrganization())||void 0===n?void 0:n.id;return a&&s.append("idOrganization",a),o.onload=function(e){var r=e.target.result;return t.me.customStickerList.createWithTracing({url:r},{data:s,processData:!1,contentType:!1,traceId:i,error:function(e){return e.set("error","Failed"),t.setTimeout((function(){return e.destroy()}),5e3)}},m({taskName:"create-attachment",subTask:"sticker",traceId:i,source:"boardMenuDrawerStickersScreen",attributes:{fileSize:e.size,fileType:e.type}},(function(r,n){var o,s,a=t.model;n&&a&&f.sendTrackEvent({action:"uploaded",actionSubject:"stickerAttachment",source:"boardMenuDrawerStickersScreen",attributes:{taskId:i,fileSize:e.size,fileType:e.type},containers:{board:{id:a.id},organization:{id:null===(o=a.getOrganization())||void 0===o?void 0:o.id},enterprise:{id:null===(s=a.getEnterprise())||void 0===s?void 0:s.id}}})})))},o.readAsDataURL(e)}))}},{key:"onAnimationPreferenceChange",value:function(e){return x.stop(e),M.setUseAnimatedStickers(e.target.checked)}},{key:"onQueryChange",value:function(e){x.stop(e);var t=N(e);if(![L.Enter,L.Escape].includes(t)){var r=e.target.value;if(this.currentQuery!==r&&this.showSearchSpinner(),this.currentQuery=r,null!=r?r.length:void 0)return this.searchForStickerDebounced(r);this.showStaticStickers()}}},{key:"searchForSticker",value:function(e){var t=this;if(null!=e?e.length:void 0)return A().search(e,{limit:48,rating:"g",lang:R(I.currentLocale),type:"stickers"}).then((function(r){if(e===t.currentQuery){var n=D(r.data,U());return t.renderStickerSearchResults(n)}})).catch((function(){return t.renderStickerSearchResults([])}))}},{key:"renderStickerSearchResults",value:function(e){var t,r=this;this.$(".js-giphy-stickers-no-results").toggleClass("hide",0!==e.length);var n=null!=(t=this.model.getOrganization())?t:null,i=e.map((function(e){var t=new k(l.extend({isGiphySticker:!0,image:e.url},e),{modelCache:r.modelCache});return r.subview(j,t,{org:n})}));return this.ensureSubviews(i,this.$(".js-search-sticker-list")),this.showSearchResults(),this.defer((function(){return v.refreshDraggableStickers()})),this}},{key:"showSearchSpinner",value:function(){return this.hideStaticStickers(),this.hideSearchResults(),this.$(".js-search-spinner").removeClass("hide")}},{key:"showStaticStickers",value:function(){return this.hideSearchSpinner(),this.hideSearchResults(),this.$(".js-static-stickers").removeClass("hide")}},{key:"showSearchResults",value:function(){return this.hideSearchSpinner(),this.hideStaticStickers(),this.$(".js-giphy-stickers").removeClass("hide")}},{key:"hideStaticStickers",value:function(){return this.$(".js-static-stickers").addClass("hide")}},{key:"hideSearchSpinner",value:function(){return this.$(".js-search-spinner").addClass("hide")}},{key:"hideSearchResults",value:function(){return this.$(".js-giphy-stickers").addClass("hide")}}])&&i(p.prototype,_),T&&i(p,T),V}(_);V.initClass(),e.exports=V},"./app/scripts/views/board/convert-board-template-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("./app/scripts/views/lib/alerts.js"),u=r("./packages/atlassian-analytics/index.ts"),d=u.Analytics,p=u.tracingCallback,f=r("./app/scripts/lib/util/index.js"),m=r("./app/scripts/views/internal/view.js"),h=r("./app/scripts/views/internal/templates.js"),g=r("./packages/analytics/index.ts").trackUe,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(y,e);var t,u,m,v,b=(t=y,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function y(){return n(this,y),b.apply(this,arguments)}return u=y,v=[{key:"initClass",value:function(){this.prototype.viewTitleKey="make template",this.prototype.events={"submit form":"convertToTemplate"}}}],(m=[{key:"render",value:function(){return this.$el.html(h.fill(r("./app/scripts/views/templates/board_convert_template.js"))),this}},{key:"convertToTemplate",value:function(e){var t=this;f.stop(e),this.$(".js-convert").prop("disabled"),l.show("converting","info","templates",1e3);var r,n,i=d.startTask({taskName:"edit-board",subTask:"prefs/isTemplate",source:"boardMenuDrawerMoreScreen"});this.model.setPrefWithTracing("isTemplate",!0,i,p({taskName:"edit-board",subTask:"prefs/isTemplate",source:"boardMenuDrawerMoreScreen",traceId:i},(function(e,r){var n,i;r&&d.sendUpdatedBoardFieldEvent({field:"prefs/isTemplate",source:"boardMenuDrawerMoreScreen",containers:{board:{id:t.model.id},organization:{id:null===(n=t.model)||void 0===n||null===(i=n.getOrganization())||void 0===i?void 0:i.id}}})}))).save(),g("board menu","converts","board","to template","","by clicking template toggle",{boardId:this.model.id,teamId:(r=this.model.getOrganization(),n=function(e){return e.id},null!=r?n(r):void 0)})}}])&&i(u.prototype,m),v&&i(u,v),y}(m);v.initClass(),e.exports=v},"./app/scripts/views/board/share-popover-view.js":function(e,t,r){function n(e,t,r){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d,p=r("./app/scripts/views/lib/pop-over.js"),f=r("./app/scripts/lib/util/index.js"),m=r("./app/scripts/views/internal/view.js"),h=r("./app/scripts/views/templates/popover_share.js"),g=r("./packages/analytics/index.ts"),v=g.Noun,b=g.Verb,y=g.track,k=g.trackUe,w=r("./packages/browser/index.ts").dontUpsell,j=r("./app/scripts/controller/index.js"),x=r("./app/scripts/db/auth.js"),_=r("./node_modules/react/index.js"),O=r("./packages/react-dom-wrapper/index.ts"),S=r("./app/src/components/ComponentWrapper/index.ts"),C=S.renderComponent,E=S.ComponentWrapper,P=r("./app/common/lib/util/print.ts").default,T=r("./packages/nachos/icons/business-class.tsx").BusinessClassIcon,A=r("./packages/nachos/icons/download.tsx").DownloadIcon,D=r("./app/src/components/UpgradePrompts/UpgradePromptPill.tsx").UpgradePromptPill,R=r("./app/src/components/UpgradePrompts/UpgradePromptFull.tsx").UpgradePromptFull,B=r("./app/src/components/UpgradePrompts/UpgradeSmartComponent.tsx").UpgradeSmartComponent,N=r("./app/src/components/FreeTrial/index.ts").PlanSelectionOverlay,L=r("./app/src/components/UpgradePrompts/renderUpgradePrompt.ts").renderUpgradePrompt,M=r("./app/scripts/lib/localize.js"),I=r("./packages/atlassian-analytics/index.ts").Analytics,U=r("./packages/feature-flag-client/index.ts").featureFlagClient,V=r("./app/src/components/ExportPopoverContent/index.ts").ExportPopoverContent,z=r("./packages/test-ids/index.ts").UpgradePromptTestIds,F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,e);var t,r=(t=i,function(){var e,r=u(t);if(l()){var n=u(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,e)).upgradePromptPill=t.upgradePromptPill.bind(c(t)),t}return o(i,null,[{key:"initClass",value:function(){this.prototype.viewTitleKey="print and export",d=U.get("fv.export-service-export-board",!1),this.prototype.events={"click .js-print":"printModel","click .js-export-json":"exportJSON","click .js-export":"renderExportPopover","click .js-export-csv":"exportCSV"}}}]),o(i,[{key:"remove",value:function(){return"function"==typeof this.unmountPill&&this.unmountPill(),n(u(i.prototype),"remove",this).apply(this,arguments)}},{key:"render",value:function(){var e=this.model.getOrganization(),t=this.model.toJSON();t.hasCsvExport=!1,t.hasOrganization=this.model.hasOrganization(),t.upgradeUrl=j.getUpgradeUrl(this.model),t.isAdDismissed=x.me().isAdDismissed("share-popover"),null!=e&&(null!=e?e.isFeatureEnabled("csvExport"):void 0)&&(t.hasCsvExport=!0,t.csvURL="/b/".concat(this.model.get("shortLink"),".csv")),(null!=e?e.isPremium():void 0)&&!(null!=e?e.isFeatureEnabled("csvExport"):void 0)&&(t.needsUpgradeForCsv=!0),t.jsonURL="/b/".concat(this.model.get("shortLink"),".json"),t.upsellEnabled=!w(),t.featureFlag=d,this.$el.html(h(t));var r=e&&!e.isPremium(),n=this.getBillingUrl(e),i=null!=e?e.id:void 0;if(!t.isAdDismissed&&r&&!t.hasCsvExport&&t.upsellEnabled){var o=this.$(".print-and-export-upgrade-prompt-wrapper")[0];C(this.adContainer(i,n,o),o)}return U.get("dataeng.gasv3-event-tracking",!1)&&I.sendScreenEvent({name:"printAndExportBoardInlineDialog",containers:{board:{id:this.model.id}}}),this.upgradePromptPill(n,i),this}},{key:"getBillingUrl",value:function(e){return e?j.getOrganizationBillingUrl(e):"/business-class"}},{key:"renderExportPopover",value:function(){return p.pushView({getViewTitle:()=>M(["view title","export board"]),reactElement:_.createElement(E,{key:"exportPopover"},_.createElement(V,{idBoard:this.model.id}))})}},{key:"adContainer",value:function(e,t,r){return _.createElement(_.Fragment,null,_.createElement("hr",null),this.upgradePrompt(e,t,r))}},{key:"upgradePromptPill",value:function(e,t){var r=this.$("#js-export-csv-pill-update-prompt")[0];return this.unmountPill=L(_.createElement(D,{cta:M(["upgrade prompt","upgrade"]),ctaOnClick:function(){k({category:v.BOARD_MENU,verb:b.OPENS,directObj:v.TEAM_PAGE_BC_TAB,method:"by clicking pill upgrade prompt in the board menu export page"});var e=document.createElement("span");return r.appendChild(e),C(_.createElement(N,{orgId:t,onContinue:function(){return window.location.assign("/business-class")},onClose:function(){return O.unmountComponentAtNode(e),e.remove()}}),e,{boardModel:this.model})},icon:_.createElement(T,null),isDismissable:!1}),r,{boardModel:this.model})}},{key:"upgradePrompt",value:function(e,t,r){if(U.get("btg.upgrade-prompt-audit",!1))return _.createElement(B,{orgId:e,promptId:"moreMenuShareInlineDialogPromptFull"});var n={content:M(["upgrade prompt","board menu","print and export","content-2"]),headline:M(["upgrade prompt","board menu","print and export","headline-2"]),cta:M(["upgrade prompt","learn more"]),ctaLink:t,orgId:e,testId:z.PrintAndExportUpgradePrompt,source:"moreMenuShareInlineDialog",ctaOnClick:function(){return k({category:v.BOARD_MENU,verb:b.OPENS,directObj:v.BC_MODAL,method:"by clicking full upgrade prompt in the board menu export page"})},icon:_.createElement(A,null),isDismissable:!0,onDismiss:()=>(O.unmountComponentAtNode(r),x.me().dismissAd("share-popover"))};return _.createElement(R,n)}},{key:"printModel",value:function(e){f.stop(e),y("Board Menu","Print and Export Menu","Print"),p.hide(),this.defer((function(){return P()}))}},{key:"exportJSON",value:function(e){return y("Board Menu","Print and Export Menu","Export JSON")}},{key:"export",value:function(e){return y("Board Menu","Print and Export Menu","Export")}},{key:"exportCSV",value:function(e){return y("Board Menu","Print and Export Menu","Export CSV")}}]),i}(m);F.initClass(),e.exports=F},"./app/scripts/views/card/formatting-help-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("./app/scripts/views/internal/view.js"),u=r("./app/scripts/views/internal/templates.js"),d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(m,e);var t,l,d,p,f=(t=m,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function m(){return n(this,m),f.apply(this,arguments)}return l=m,p=[{key:"initClass",value:function(){this.prototype.viewTitleKey="formatting help"}}],(d=[{key:"render",value:function(){return this.$el.html(u.fill(r("./app/scripts/views/templates/formatting_help.js"))),this}}])&&i(l.prototype,d),p&&i(l,p),m}(l);d.initClass(),e.exports=d},"./app/scripts/views/description/description-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r("./node_modules/underscore/underscore.js"),d=r("./app/scripts/db/auth.js"),p=r("./app/scripts/views/internal/autocomplete/auto-insertion-view.js"),f=r("./app/scripts/views/internal/autocomplete/completer-util.js"),m=r("./app/scripts/views/internal/editable-view.js"),h=r("./app/scripts/views/card/formatting-help-view.js"),g=r("./app/scripts/views/lib/layout.js"),v=r("./app/scripts/views/lib/pop-over.js"),b=r("./app/scripts/lib/markdown/tfm.js"),y=r("./app/scripts/lib/util/index.js"),k=r("./app/scripts/views/internal/friendly-links.js"),w=r("./app/scripts/lib/localize.js"),j=r("./packages/atlassian-analytics/index.ts").Analytics,x=r("./app/scripts/views/templates/description.js"),_=r("./packages/analytics/index.ts").trackUe,O=r("./packages/keybindings/index.ts"),S=O.getKey,C=O.Key,E=O.isForceSubmitEvent,P=r("./app/scripts/views/lib/markdown-transform.ts").applyMarkdownShortcuts,T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(m,e);var t,r,u,p,f=(t=m,function(){var e,r=l(t);if(c()){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function m(){return n(this,m),f.apply(this,arguments)}return r=m,p=[{key:"initClass",value:function(){this.prototype.events={"click .js-format-help":"openFormatHelp","click .js-edit-desc":"editDesc","click .js-edit-desc-button"(){return _(this.descType,"enters","edit","","","by clicking on edit button",{boardid:this.board.id,cardid:null!=this.card?this.card.id:void 0}),j.sendClickedButtonEvent({buttonName:"editDescriptionButton",source:this.source,containers:{board:{id:null!=this.board?this.board.id:void 0},card:{id:null!=this.card?this.card.id:void 0}}})},"keydown .field"(e){if(E(e)&&(this.recordCardAction(),this._discardDraft("desc")),P(e),S(e)===C.Escape)return y.stop(e),v.isVisible?void v.hide():(this.saveDrafts(),this.$(".js-description-draft").val(this.model.get("desc")),j.sendPressedShortcutEvent({shortcutName:"escapeShortcut",keyValue:"esc",source:this.source,containers:{board:{id:null!=this.board?this.board.id:void 0},card:{id:null!=this.card?this.card.id:void 0}},attributes:{whileEditingDescription:!0}}),void this.render())},"keyup .field"(e){return S(e)===C.Escape&&y.stop(e),this.keyAutoMention(e)},"click .js-cancel-edit"(e){return j.sendClickedButtonEvent({buttonName:"cancelEditDescriptionButton",source:this.source,containers:{board:{id:null!=this.board?this.board.id:void 0},card:{id:null!=this.card?this.card.id:void 0}}}),this.cancelEditDesc(e,"by clicking on cancel button")},"click .js-desc-content.is-hide-full"(){return _(this.descType,"expands","description","","","",{boardid:this.board.id,cardid:null!=this.card?this.card.id:void 0}),j.sendClickedButtonEvent({buttonName:"showFullDescriptionButton",source:this.source,containers:{board:{id:null!=this.board?this.board.id:void 0},card:{id:null!=this.card?this.card.id:void 0}}}),this.showFullDescription()}}}}],(u=[{key:"initialize",value:function(e){var t=e.board,r=e.card,n=e.maxDescLength,i=e.placeholderKey,s=e.source;return this.board=t,this.card=r,this.maxDescLength=n,this.placeholderKey=i,this.source=s,o(l(m.prototype),"initialize",this).apply(this,arguments),this.hideFullDescription=A(this.model.get("desc"),(function(e){return e.length}))>this.maxDescLength,this.descType="".concat(this.model.typeName.toLowerCase()," description"),this.makeDebouncedMethods("render"),this.listenTo(g,this.getAutosaveEvent(),this.onAutosaveEdit),this.listenTo(this.model,"change:desc",this.renderDebounced)}},{key:"render",value:function(){var e={};e.editable=this.model.editable(),e.isCardDesc="Card"===this.model.typeName,e.placeholderKey=this.placeholderKey,e.isTemplate=e.isCardDesc?this.model.isOnBoardTemplate():this.model.isTemplate(),this.$el.html(x(e));var t=this.model.get("desc"),r=b.description.format(null!=t?t:"",{textData:this.model.get("descData")}).output,n=this.$(".js-desc");n.empty().append(r).data("unmarkeddown",t),n.find("p").attr("dir","auto"),k(n[0],this.board);var i=!/^\s*$/.test(r);this.$(".js-show-with-desc").toggleClass("hide",!i),this.$(".js-hide-with-desc").toggleClass("hide",i);var o=A(this.$(".js-description-draft").val(),(function(e){return e.length}))>0;return this.$(".js-description-draft").addClass(this.descType.split(" ").join("-")),this.$(".js-hide-with-draft").toggleClass("hide",o),this.$(".js-desc-content").toggleClass("is-hide-full",this.hideFullDescription),this.renderFormattingButton(),this.recallDrafts(),this}},{key:"showFullDescription",value:function(){this.hideFullDescription=!1,this.$(".js-desc-content").removeClass("is-hide-full")}},{key:"editDesc",value:function(e){y.stop(e),this.showFullDescription(),this.edit("desc")}},{key:"cancelEditDesc",value:function(e,t){var r=t.includes("escape key");return j.sendTrackEvent({action:"cancelled",actionSubject:"descriptionEdit",source:this.source,containers:{board:{id:null!=this.board?this.board.id:void 0},card:{id:null!=this.card?this.card.id:void 0}},attributes:{method:r?"escapeKey":"cancelEditDescriptionButton"}}),_(this.descType,"cancels","edit","","",t,{boardid:this.board.id,cardid:null!=this.card?this.card.id:void 0}),this.clearEdits(e)}},{key:"expandDesc",value:function(e){y.stop(e),this.showFullDescription(),this.edit("desc",!1)}},{key:"renderFormattingButton",value:function(){var e=w(["view title","formatting help"]),t="board description"===this.descType&&e.length>20;return this.$(".description-edit").toggleClass("long",t),this.$(".description-edit .helper").toggleClass("long",t)}},{key:"openFormatHelp",value:function(e){return _(this.descType,"opens","formatting help","","","",{boardid:this.board.id,cardid:null!=this.card?this.card.id:void 0}),j.sendClickedButtonEvent({buttonName:"formattingHelpDescriptionButton",source:this.source,containers:{board:{id:null!=this.board?this.board.id:void 0},card:{id:null!=this.card?this.card.id:void 0}}}),v.toggle({elem:this.$(".js-format-help"),view:h,options:{model:this.model,modelCache:this.modelCache},keepEdits:!0}),!1}},{key:"getAutosaveEvent",value:function(){return"autosave".concat(this.model.typeName,"Description")}},{key:"onAutosaveEdit",value:function(e){return this.hideFullDescription=!1,this.commitEdits(null,e)}},{key:"commitEdits",value:function(){var e=this.$(".description-title .editing").length;if(e)return d.me().editing({idBoard:this.board.id}),this.$(".description-title .editing").removeClass("editing"),_(this.descType,"saves","description","","","",{boardid:this.board.id,cardid:null!=this.card?this.card.id:void 0}),!this.card&&this.board?j.sendUpdatedBoardFieldEvent({field:"description",source:this.source,containers:{board:{id:null!=this.board?this.board.id:void 0},card:{id:null!=this.card?this.card.id:void 0}}}):this.recordCardAction(),this._discardDraft("desc"),o(l(m.prototype),"commitEdits",this).apply(this,arguments)}},{key:"recordCardAction",value:function(){if("Card"===this.model.typeName){var e=this.$(".js-description-draft").val(),t=this.model.get("desc");t!==e&&this.model.recordAction({type:"update-description",description:e,previousDescription:t})}}},{key:"getTextInput",value:function(){var e=this.$(".js-description-draft:visible");if(e.length)return e}},{key:"getMentionTarget",value:function(){var e=this.$(".js-description-draft:visible");if(e.length)return e[0]}},{key:"getEmojiTarget",value:function(){var e=this.$(".js-description-draft:visible");if(e.length)return e[0]}}])&&i(r.prototype,u),p&&i(r,p),m}(m);function A(e,t){return null!=e?t(e):void 0}T.initClass(),u.extend(T.prototype,p,f),e.exports=T},"./app/scripts/views/internal/editable-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r("./packages/jquery/index.js"),d=r("./packages/atlassian-analytics/index.ts").Analytics,p=r("./app/scripts/views/internal/autocomplete/auto-mentioner-view.js"),f=r("./app/scripts/models/card.js"),m=r("./app/scripts/views/lib/drag-sort.js"),h=r("./app/scripts/views/templates/edit_controls.js"),g=r("./app/scripts/views/internal/autocomplete/emoji-completer-view.js"),v=r("./app/scripts/lib/util/selection/has-selection-in.js"),b=r("./packages/keybindings/index.ts"),y=b.getKey,k=b.isForceSubmitEvent,w=b.Key,j=r("./app/scripts/views/lib/layout.js"),x=r("./app/scripts/views/lib/pop-over.js"),_=r("./packages/storage/index.ts").TrelloStorage,O=r("./app/scripts/lib/util/index.js"),S=r("./app/scripts/views/internal/view.js"),C=r("./node_modules/underscore/underscore.js"),E=r("./app/scripts/debug/log.js"),P=r("./packages/analytics/index.ts"),T=P.track,A=P.trackUe,D=r("./app/scripts/lib/localize.js"),R=r("./app/common/lib/util/i18n/formatters.ts").asNumber,B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(B,e);var t,r,b,S,P=(t=B,function(){var e,r=l(t);if(c()){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function B(){return n(this,B),P.apply(this,arguments)}return r=B,S=[{key:"initClass",value:function(){this.prototype.allowNewlines=!0}}],(b=[{key:"initialize",value:function(){var e=this;return o(l(B.prototype),"initialize",this).apply(this,arguments),u(window).on("beforeunload.EditableView-".concat(this.model.cid),(function(){e.saveDrafts("unload")}))}},{key:"remove",value:function(){return this.saveDrafts("removing view"),u(window).off(".EditableView-".concat(this.model.cid)),o(l(B.prototype),"remove",this).apply(this,arguments)}},{key:"_draftKey",value:function(e){return"draft_".concat(this.model.id,"_").concat(e)}},{key:"_saveDraft",value:function(e,t){return _.set(this._draftKey(e),t)}},{key:"_recallDraft",value:function(e){return _.get(this._draftKey(e))}},{key:"_discardDraft",value:function(e){return _.unset(this._draftKey(e))}},{key:"saveDrafts",value:function(e){var t=this;return null!=this.model.id&&function(){for(var r=[],n=0,i=Array.from(t.getEdits());n<i.length;n++){var o=i[n],s=o.attr("attr"),a=o.find(".field:first").val();0!==u.trim(a).length&&(t.model.get(s)!==a&&a!==t._recallDraft(s)?(e&&(T("Editable View","Save Draft","Save draft via ".concat(e)),A("Editable View","Save Draft","","","","when ".concat(e),"")),r.push(t._saveDraft(s,a))):r.push(void 0))}return r}()}},{key:"editField",value:function(e){var t=u(e.target).closest("a");if(!(t.length>0&&"#"!==t.attr("href")||m.sorting)){var r=u(e.target).closest(".editable");if(0!==r.length&&!v(r)&&!u(e.target).closest(".js-react-root").length){O.stop(e),x.hide();var n=r.attr("attr");return this.edit(n)}}}},{key:"edit",value:function(e,t){var r,n=this;null==t&&(t=!0),e.indexOf(".")>-1&&(r=e.split("."),e=r[1]);var i=this.$("[attr=".concat(e,"]")),o=this.$(".js-no-higher-edits [attr=".concat(e,"]")),s=i.not(o);if(0!==s.length){j.cancelEdits();var a=s.find(".edit:first");if(0!==a.length){var c=s.find(".field:first");a.append(h()),s.addClass("editing"),""===c.val()&&c.val(O.traverse(this.model.attributes,null!=r?r:e)),this.waitForId(this.model,(function(){return c.data("draftKey",n._draftKey(e))})),E("editable",this.model),t&&c.focus().select(),c.autosize({append:!1})}}}},{key:"getEdits",value:function(){var e=this.$("[attr]"),t=this.$(".js-no-higher-edits [attr]");return e.not(t).map((function(e,t){return u(t)}))}},{key:"recallDrafts",value:function(){var e=this;return this.getEdits().each((function(t,r){var n=r.attr("attr");if(null!=e.model.id){var i=e._recallDraft(n);if(null!=i)return r.find(".field:first").val(i),e.defer((function(){return r.find(".edits-warning").show()}))}}))}},{key:"stopEditing",value:function(e){return O.stop(e),j.cancelEdits(),!1}},{key:"clearEdits",value:function(e){O.stop(e);var t=u(e.target).closest(".editable[attr]"),r=t.attr("attr");return null!=r&&this._discardDraft(r),t.find(".field").val(""),t.find(".edits-warning").hide(),t.find(".edits-error").hide(),t.removeClass("editing"),j.cancelEdits(),!1}},{key:"validate",value:function(){for(var e,t=0,r=Array.from(this.$(".editing.non-empty .field"));t<r.length;t++)if(e=r[t],/^\s*$/.test(u(e).val()))return!1;for(var n=0,i=Array.from(this.$(".editing .field"));n<i.length;n++){e=i[n];var o,s=(null!=(o=u(e).val())?o:"").length;if(s>16384)return u(".editing").find(".edits-error").text(D("text too long",{over:R(s-16384)})).show(),!1}return!0}},{key:"keydownEvent",value:function(e){var t=y(e);j.isEditing()&&(x.view instanceof g||x.view instanceof p?"function"==typeof this.checkInsert&&this.checkInsert(e):k(e)||t===w.Enter&&(!u(e.target).is("textarea")||u(e.currentTarget).hasClass("single-line"))&&!e.shiftKey?(O.stop(e),this.commitEdits(e)):t!==w.Enter||this.allowNewlines||O.stop(e))}},{key:"commitEdits",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&O.stop(e);var r=t||u(e.target).closest(".editable.editing[attr]");if(r.find(".edits-error").hide(),this.validate()){var n=this,i=this.model;return r.remove("input[type=submit]"),r.removeClass("editing").each((function(){var e=u(this).attr("attr"),t=u(this).find(".field").val();if(n.allowNewlines||(t=t.replace(/[\r\n]+/g," ")),0===u.trim(t).length&&(t=""),i.get(e)===t)return n._discardDraft(e);var o="";i instanceof f&&(o=d.startTask({taskName:"edit-card",subTask:"desc",source:"cardDetailScreen"}));var s={traceId:o};return s[e]=t,i.update(s,(function(s,a){null!=s?(r.find(".edits-error").text(s.message).show(),n._saveDraft(e,t),i instanceof f&&d.taskFailed({taskName:"edit-card",subTask:"desc",traceId:o,source:"cardDetailScreen",error:s})):(n._discardDraft(e),i instanceof f&&(d.sendUpdatedCardFieldEvent({field:"description",source:"cardDetailScreen",containers:{card:{id:a.id},board:{id:a.idBoard},list:{id:a.idList}},attributes:{taskId:o}}),d.taskSucceeded({taskName:"edit-card",subTask:"desc",traceId:o,source:"cardDetailScreen"})))}))})).find(".field").val(""),r.find(".edits-warning").hide(),!0}}},{key:"clickSetting",value:function(e){var t=u(e.target);if(!t.hasClass("disabled")&&!t.closest(".js-disabled").length){var r=t.attr("href");if(!r||"#"===r){var n=t.closest(".pref").attr("name");if(n){var i=t.attr("value");i=function(){switch(i){case"true":return!0;case"false":return!1;default:return i}}(),this.model.setPref(n,i),this.model.save(),O.stop(e)}}}}},{key:"delegateEvents",value:function(e){var t={"click .current":"editField","click .js-cancel-edit":"clearEdits","click .js-discard-edits":"clearEdits","click .js-view-edits":"editField","click .js-save-edit":"commitEdits","keydown .field":"keydownEvent","click input":O.stopPropagation,"click textarea":O.stopPropagation};return null!=this.model.setPref&&(t["click a"]="clickSetting"),o(l(B.prototype),"delegateEvents",this).call(this,C.extend(t,e||this.events))}}])&&i(r.prototype,b),S&&i(r,S),B}(S);B.initClass(),e.exports=B},"./app/scripts/views/organization/add-tag-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l,u=r("./packages/atlassian-analytics/index.ts"),d=u.Analytics,p=u.getScreenFromUrl,f=u.tracingCallback,m=r("./app/scripts/views/organization/set-tag-view.js"),h=r("./app/scripts/views/lib/pop-over.js"),g=r("./packages/analytics/index.ts"),v=g.trackUe,b=g.Noun,y=g.Verb;e.exports=((l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(g,e);var t,r,l,u,m=(t=g,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function g(){return n(this,g),m.apply(this,arguments)}return r=g,u=[{key:"initClass",value:function(){this.prototype.viewTitleKey="add tag"}}],(l=[{key:"onSubmit",value:function(e){var t=this;if(e){var r=p(),n=d.startTask({taskName:"create-tag",source:r});this.model.tagList.createWithTracing({name:e},{wait:!0,traceId:n},f({taskName:"create-tag",traceId:n,source:r},(function(e,i){var o=t.model;!e&&i&&o&&d.sendTrackEvent({action:"created",actionSubject:"collection",source:r,attributes:{taskId:n,isBCFeature:!0,requiredBC:!0},containers:{organization:{id:o.id}}})}))),h.popView(),v({category:b.BUSINESS_CLASS_FEATURE,verb:y.CREATES,directObj:b.COLLECTION,context:{organizationId:this.model.id,requiredBC:!0}})}}}])&&i(r.prototype,l),u&&i(r,u),g}(m)).initClass(),l=l)},"./app/scripts/views/organization/set-tag-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("./app/scripts/lib/util/index.js"),u=r("./app/scripts/views/internal/view.js"),d=r("./packages/analytics/index.ts").track,p=r("./app/scripts/debug/constants.ts").Feature,f=r("./packages/error-reporting/index.ts").sendErrorEvent,m=r("./app/scripts/views/internal/teacup-with-helpers.js")("org_filtering"),h=m.renderable((function(e){var t=e.name,r=e.isDeleteable;m.form(".js-add-tag-form",(function(){m.label((function(){m.format("name"),m.input(".js-add-tag-name.js-autofocus",{type:"text",value:t})})),m.input(".nch-button.nch-button--primary",{type:"submit",value:m.l("save")}),r&&m.button(".nch-button.nch-button--danger.u-float-right.js-delete-tag",{type:"button"},(function(){return m.format("delete")}))}))})),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(v,e);var t,r,u,m,g=(t=v,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function v(){return n(this,v),g.apply(this,arguments)}return r=v,(u=[{key:"events",value:function(){return{"submit .js-add-tag-form"(e){try{e.preventDefault(),this.options.boardView?d("Board Menu","Collections Menu","Save New Collection"):d("Team Page","Collections Menu","Save New Collection");var t=this.$(".js-add-tag-name").val().trim();this.onSubmit(t)}catch(e){f(e,{tags:{ownershipArea:"trello-remarkable",feature:p.Collections}})}},"click .js-delete-tag"(e){try{l.stop(e),this.onDelete()}catch(e){f(e,{tags:{ownershipArea:"trello-remarkable",feature:p.Collections}})}}}}},{key:"getName",value:function(){return""}},{key:"render",value:function(){return this.$el.html(h({name:this.getName(),isDeleteable:this.onDelete})),this}}])&&i(r.prototype,u),m&&i(r,m),v}(u);e.exports=g},"./app/scripts/views/stickers/custom-sticker-selection-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l,u=r("./packages/jquery/index.js"),d=r("./packages/atlassian-analytics/index.ts"),p=d.Analytics,f=d.tracingCallback,m=r("./app/scripts/db/auth.js"),h=r("./app/scripts/views/lib/confirm.js"),g=r("./app/scripts/views/stickers/sticker-selection-view.js"),v=r("./app/scripts/lib/util/index.js");e.exports=((l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(b,e);var t,r,l,d,g=(t=b,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function b(){return n(this,b),g.apply(this,arguments)}return r=b,d=[{key:"initClass",value:function(){this.prototype.events={"click .js-delete-sticker":"deleteSticker"}}}],(l=[{key:"initialize",value:function(){var e=this;return this.toggleSelectable(),this.waitForId(this.model,(function(){return e.toggleSelectable()})),this.listenTo(this.model,"change:error",this.render)}},{key:"enabled",value:function(){var e,t;return m.me().hasPremiumFeature("customStickers")||(null===(e=this.options)||void 0===e||null===(t=e.org)||void 0===t?void 0:t.hasPremiumFeature("customStickers"))||!1}},{key:"toggleSelectable",value:function(){var e=null!=this.model.id;return this.$el.toggleClass("js-draggable-sticker",e),this.$el.toggleClass("sticker-unselectable",!e)}},{key:"deleteSticker",value:function(e){var t=this;return v.stop(e),h.toggle("delete sticker",{elem:u(e.target).closest(".js-delete-sticker"),top:32,model:this.model,confirmBtnClass:"nch-button nch-button--danger",fxConfirm:function(){var e=p.startTask({taskName:"delete-attachment",subTask:"sticker",source:"boardMenuDrawerStickersScreen"});return t.model.destroyWithTracing({traceId:e},f({taskName:"delete-attachment",subTask:"sticker",traceId:e,source:"boardMenuDrawerStickersScreen"},(function(r,n){if(n){var i,o,s=null===(i=t.options)||void 0===i?void 0:i.org;p.sendTrackEvent({action:"deleted",actionSubject:"stickerAttachment",source:"boardMenuDrawerStickersScreen",attributes:{taskId:e,stickerId:n.id},containers:{organization:{id:null==s?void 0:s.id},enterprise:{id:null==s||null===(o=s.getEnterprise())||void 0===o?void 0:o.id}}})}})))}})}}])&&i(r.prototype,l),d&&i(r,d),b}(g)).initClass(),l)},"./app/scripts/views/stickers/sticker-selection-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("./app/scripts/db/auth.js"),u=r("./app/scripts/lib/util/index.js"),d=r("./app/scripts/views/internal/view.js"),p=r("./app/scripts/views/internal/templates.js"),f=r("./app/scripts/data/sticker-size.js"),m=r("./app/scripts/view-models/member-state.js"),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(y,e);var t,d,h,v,b=(t=y,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function y(){return n(this,y),b.apply(this,arguments)}return d=y,v=[{key:"initClass",value:function(){this.prototype.className="sticker-select js-draggable-sticker"}}],(h=[{key:"initialize",value:function(){return this.listenTo(m,{"change:useAnimatedStickers":this.render})}},{key:"enabled",value:function(){var e,t;return!this.model.get("premium")||l.me().hasPremiumFeature("additionalStickers")||(null===(e=this.options)||void 0===e||null===(t=e.org)||void 0===t?void 0:t.hasPremiumFeature("additionalStickers"))||!1}},{key:"render",value:function(){var e,t,n=this.model.toJSON();return this.model.get("isGiphySticker")&&!m.getUseAnimatedStickers()?n.url=null!=(e=g(u.smallestPreviewBiggerThan(n.stillscaled,f),(function(e){return e.url})))?e:n.stillUrl:n.url=null!=(t=g(u.smallestPreviewBiggerThan(n.scaled,f),(function(e){return e.url})))?t:n.url,n.pending=null==n.image&&null==n.id&&null==n.error,this.$el.toggleClass("disabled",!this.enabled()).toggleClass("giphy-sticker",!!this.model.get("isGiphySticker")).html(p.fill(r("./app/scripts/views/templates/sticker_select_item.js"),n)).data("sticker",this.model),this}}])&&i(d.prototype,h),v&&i(d,v),y}(d);function g(e,t){return null!=e?t(e):void 0}h.initClass(),e.exports=h},"./app/scripts/views/templates/ArchivedCardOptions.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ArchivedCardOptions",(function(){return a}));var n=r("./node_modules/react/index.js"),i=r.n(n),o=r("./app/common/lib/util/i18n/index.ts"),s=Object(o.forTemplate)("archived_card_options"),a=function(e){var t=e.editable,r=e.canReopen,n=e.canDelete,o=e.reOpenText;return t&&(r||n)?i.a.createElement("p",{className:"quiet",style:{marginLeft:"8px"}},r?[i.a.createElement("a",{className:"js-reopen",href:"#",key:"open"},"".concat(o)),n?" - ":null]:null,n?i.a.createElement("a",{className:"js-delete",href:"#",key:"delete"},s("delete")):null):null}},"./app/scripts/views/templates/ArchivedCards.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ArchivedCards",(function(){return a}));var n=r("./node_modules/react/index.js"),i=r.n(n),o=r("./app/common/lib/util/i18n/index.ts"),s=Object(o.forTemplate)("archived_cards"),a=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{className:"too-many-results-message helper js-search-message hide"}),i.a.createElement("div",{className:"js-archive-items"}),i.a.createElement("p",{className:"empty-list js-empty-message"}),i.a.createElement("a",{className:"show-more js-more-cards",href:"#"},s("load-more-cards")))}},"./app/scripts/views/templates/ArchivedLists.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ArchivedLists",(function(){return o}));var n=r("./node_modules/react/index.js"),i=r.n(n),o=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("ul",{className:"archive-list js-archive-items"}),i.a.createElement("p",{className:"js-empty-message empty-list"}))}},"./app/scripts/views/templates/BoardArchive.js":function(e,t,r){"use strict";r.r(t),r.d(t,"BoardArchive",(function(){return a}));var n=r("./node_modules/react/index.js"),i=r.n(n),o=r("./app/common/lib/util/i18n/index.ts"),s=Object(o.forTemplate)("board_archive"),a=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"archive-controls"},i.a.createElement("div",{className:"archive-controls-search"},i.a.createElement("input",{className:"js-search js-autofocus",type:"text",placeholder:s("search archive")})),i.a.createElement("a",{className:"archive-controls-switch nch-button js-switch-section",href:"#"})),i.a.createElement("div",{className:"spinner loading js-loading-spinner"}),i.a.createElement("div",{className:"archive-content js-archive-content"}))}},"./app/scripts/views/templates/archive_item.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("archive_item");e.exports=n.renderable((function(e){var t=e.url,r=e.name,i=e.orgName,o=e.deleting,s=e.canReopen,a=e.reOpenText,c=e.canDelete,l=e.canLeave,u=e.reopenDisabled;return n.div(".item-name",(function(){if(t&&!o?(n.a({href:t},(function(){return n.text(r)})),n.div(".quiet",(function(){}))):n.span((function(){return n.text(r)})),i)return n.div(".quiet",(function(){return n.text(i)}))})),o?n.div(".options.quiet",(function(){return n.format("deleting")})):n.div(".options",(function(){if(s&&n.a(".button-link.js-reopen".concat(u?".disabled":""),{href:"#"},(function(){return n.icon("refresh"),n.text(" "),n.text(a)})),c&&n.a(".button-link.negate.js-delete",{href:"#"},(function(){return n.icon("remove","delete")})),l)return n.a(".button-link.negate.js-leave",{href:"#"},(function(){return n.icon("leave-board","leave")}))}))}))},"./app/scripts/views/templates/board_background_options.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_background_options");e.exports=function(){return n.p(".u-font-weight-bold.quiet",(function(){return n.format("display-type")})),n.ul(".pop-over-list",(function(){return n.li((function(){return n.a(".js-select-option",{href:"#","data-background-display-type":"cover"},(function(){return n.check(!n.mustacheVar("tile"),"cover")}))})),n.li((function(){return n.a(".js-select-option",{href:"#","data-background-display-type":"tile"},(function(){return n.check(n.mustacheVar("tile"),"tile")}))}))})),n.hr(),n.p(".u-font-weight-bold.quiet",(function(){return n.format("board-text")})),n.ul(".pop-over-list",(function(){return n.li((function(){return n.a(".js-select-option",{href:"#","data-board-brightness":"dark"},(function(){return n.check(n.mustacheVar("brightnessDark"),"light")}))})),n.li((function(){return n.a(".js-select-option",{href:"#","data-board-brightness":"light"},(function(){return n.check(n.mustacheVar("brightnessLight"),"dark")}))}))})),n.hr(),n.a(".quiet-button.js-delete-background",{href:"#"},(function(){return n.format("delete-background")}))}},"./app/scripts/views/templates/board_background_selection.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_background_selection");e.exports=function(){return n.span({class:"background-box ".concat(n.mustacheBlock("pending",(function(){return"background-box-unselectable"}))).concat(n.mustacheBlock("tile",(function(){return" background-tile"}))),style:" ".concat(n.mustacheBlock("backgroundImageThumbnail",(function(){return'background-image: url("'.concat(n.mustacheVar("backgroundImageThumbnail"),'")')})),"; ").concat(n.mustacheBlock("color",(function(){return"background-color: ".concat(n.mustacheVar("color"),";")}))," ")},(function(){return n.mustacheBlock("attribution",(function(){return n.a(".background-option.js-background-attribution",{href:n.mustacheVar("url"),target:"_blank",title:n.mustacheVar("url")},(function(){return n.img({src:r("./resources/images/cc.png"),style:"height: 14px; width: 14px; vertical-align: text-top;",title:n.mustacheVar("license")}),n.span(".text",{style:"margin-left: 2px;"},(function(){return n.text(n.mustacheVar("name"))}))}))})),n.mustacheBlock("id",(function(){return n.a(".background-option.js-options",(function(){return n.icon("overflow-menu-horizontal",{class:"light",style:"vertical-align: bottom;"}),n.span(".text",(function(){return n.format("options")}))}))})),n.mustacheBlock("error",(function(){return n.span(".background-info",(function(){return n.span(".text",(function(){return n.text(n.mustacheVar("error"))}))}))})),n.mustacheBlock("pending",(function(){return n.span(".background-info",(function(){return n.span(".spinner.small.u-float-left",{style:"margin-right: 4px;"}),n.span(".text",(function(){return n.format("uploading-ellipsis")}))}))}))}))}},"./app/scripts/views/templates/board_change_background.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_change_background");e.exports=n.renderable((function(e){var t=e.enabled_customBoardBackgrounds,r=e.idMember,i=e.upsellEnabled;if(n.div(".board-backgrounds-section-tiles.u-clearfix",(function(){return n.div(".board-backgrounds-section-tile.board-backgrounds-photos-tile.js-bg-photos",(function(){return n.div(".image"),n.div(".title",(function(){return n.format("photos")}))})),n.div(".board-backgrounds-section-tile.board-backgrounds-colors-tile.js-bg-colors",(function(){return n.div(".image"),n.div(".title",(function(){return n.format("colors")}))}))})),n.hr(".board-menu-header-divider"),t||i)return n.h2((function(){return n.format("custom")})),n.div({class:"board-backgrounds-list u-relative u-clearfix js-custom-list".concat(t?"":" disabled")},(function(){return n.div(".board-background-select.board-background-select-upload.js-uploader",(function(){return n.form({action:"/1/member/".concat(r,"/customBoardBackgrounds"),method:"post",enctype:"multipart/form-data"},(function(){return n.input({type:"hidden",name:"token",value:""}),n.input({type:"hidden",name:"format",value:"http"}),n.span(".background-box",(function(){return n.span(".icon-lg.icon-add")})),n.input(".upload-background.js-upload-image",{type:"file",name:"file",multiple:"multiple",accept:"image/*"})}))}))}))}))},"./app/scripts/views/templates/board_convert_template.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_copy");e.exports=function(){return n.form((function(){return n.div(".board-menu-convert-to-template-container",(function(){return n.img(".board-menu-convert-to-template",{src:r("./resources/images/template-create-popover-icon.svg"),alt:"",role:"presentation"})})),n.p((function(){return n.format("make-template-text")})),n.input(".nch-button.nch-button--primary.wide.full.js-convert",{type:"submit",value:n.l("make-template")})}))}},"./app/scripts/views/templates/board_menu_about_this_board.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_about_this_board"),i=n.renderable((function(e,t,r){if(e||t)return n.div(".about-this-board-actions-section",(function(){return n.h2(".small-caps",(function(){return n.format(r)})),n.ul(".pop-over-list.inset",(function(){if(e&&n.li((function(){return n.span(".icon-sm.icon-comment"),n.format("comment-on-cards")})),t)return n.li((function(){return n.span(".icon-sm.icon-vote"),n.format("vote-on-cards")}))}))}))}));e.exports=n.renderable((function(e){e.isLoggedIn;var t=e.isAdmin,r=e.isNonAdminMember,o=e.canComment,s=e.canVote,a=e.commentHeader,c=e.votingHeader,l=e.permissionsHierarchy,u=e.isTemplate;if(!u||r||t||(n.div(".js-search-input-view"),n.hr()),n.div(".about-this-board-section",(function(){return n.div(".window-module-title.window-module-title-no-divider",(function(){return n.span(".icon-member.icon-lg.window-module-title-icon"),n.h3(".u-inline-block",(function(){return n.format("made-by")}))})),n.div(".js-made-by"),n.div(".about-this-board-multi-admin",(function(){return n.div(".js-made-by-facepile"),n.a(".admin-count.about-this-board-pile-button.pile.js-fill-board-admin-count",{href:"#"},(function(){return n.span(".admin-count-notifications")}))}))})),n.div(".js-view-copy-count"),n.div(".about-this-board-section.about-this-board-desc",(function(){return n.div(".js-fill-atb-desc.about-this-board-description-content")})),!u&&!r&&(o||s))return n.div(".about-this-board-section",(function(){return n.hr(),t?("equal"===l?i(o,s,a):"comment"===l?(i(o,null,a),i(null,s,c)):(i(null,s,c),i(o,null,a)),n.a(".quiet-button.js-change-permissions",{href:"#"},(function(){return n.span((function(){return n.format("change-permissions")}))}))):i(o,s,"any-trello-user-can")}))}))},"./app/scripts/views/templates/board_menu_activity.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_activity");e.exports=function(){return n.div(".segmented-control",(function(){return n.a(".segmented-control-item.js-show-all.js-control-option",{href:"#"},(function(){return n.format("all")})),n.a(".segmented-control-item.js-show-comments.js-control-option",{href:"#"},(function(){return n.format("comments")}))})),n.div(".phenom-list.js-list-activity"),n.a(".show-more.js-more-actions",{href:"#"},(function(){return n.format("load-more-activity")}))}},"./app/scripts/views/templates/board_menu_commenting.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_commenting");e.exports=function(){return n.li((function(){return n.a(".js-select",{href:"#",name:"disabled"},(function(){return n.check(n.mustacheVar("comments_disabled"),"disabled"),n.span(".sub-name",(function(){return n.format("no-one-is-allowed-to-comment")}))}))})),n.li((function(){return n.a(".js-select",{href:"#",name:"members"},(function(){return n.check(n.mustacheVar("comments_members"),"members"),n.span(".sub-name",(function(){return n.format("allow-admins-and-normal-members-to-comment")}))}))})),n.li((function(){return n.a({href:"#",class:"js-select".concat(n.mustacheBlockInverted("comments_showObservers",(function(){return" disabled"}))),name:"observers"},(function(){return n.check(n.mustacheVar("comments_observers"),"members-and-observers"),n.span(".sub-name",(function(){return n.format("allow-admins-normal-members-and-observers-to-comment")}))}))})),n.li((function(){return n.a({href:"#",class:"js-select".concat(n.mustacheBlockInverted("orgCanSee",(function(){return" disabled"}))),name:"org"},(function(){return n.check(n.mustacheVar("comments_org"),"organization-members"),n.span(".sub-name",(function(){return n.format("allow-admins-normal-members-observers-and-organization-members-to-comment")}))}))})),n.li((function(){return n.a({href:"#",class:"js-select".concat(n.mustacheBlockInverted("permissionLevel_public",(function(){return" disabled"}))),name:"public"},(function(){return n.check(n.mustacheVar("comments_public"),"any-trello-user"),n.span(".sub-name",(function(){return n.format("allow-any-trello-member-to-comment")}))}))}))}},"./app/scripts/views/templates/board_menu_default.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_default"),i=r("./packages/feature-flag-client/index.ts").featureFlagClient.getTrackedVariation("board-header-filtering-experiment",!1),o=n.renderable((function(e){var t=e.hasPaidOrgPowerUps,r=e.hasGoldPowerUps;return n.li(".board-menu-navigation-item",(function(){return n.a(".board-menu-navigation-item-link.js-open-power-ups",{href:"#"},(function(){return n.icon("power-up","power-ups",{class:"board-menu-navigation-item-link-icon"}),n.raw("&nbsp;"),t?n.icon("business-class",{class:"mod-quiet"}):r&&n.icon("trello-gold",{class:"icon-trello-gold-color"}),n.span(".board-menu-navigation-item-link-count.js-enabled-power-up-count"),n.span(".board-menu-navigation-item-new.js-power-up-new",(function(){return n.format("new")})),n.span(".board-menu-navigation-item-link-warning.js-power-up-disable-timer"),n.div(".board-menu-navigation-item-link-summary",(function(){return n.raw("&nbsp;"),n.format("power-ups-explanation")}))}))}))}));e.exports=n.renderable((function(e){var t=e.hasPaidOrgPowerUps,r=e.hasGoldPowerUps,s=e.editable,a=e.showEnterpriseUpsell,c=e.isTemplate;if(n.p(".error.js-file-too-large",{style:"margin: 12px 0 6px; display:none;"},(function(){return n.format("file-too-large-10mb-limit")})),n.ul(".board-menu-navigation",(function(){if(n.li(".board-menu-navigation-item",(function(){return n.a(".board-menu-navigation-item-link.js-about-this-board",{href:"#"},(function(){return n.span(".board-menu-navigation-item-link-icon.icon-lg.icon-board"),n.raw("&nbsp;"),c?n.format("about-this-template"):n.format("about-this-board"),n.div(".board-menu-navigation-item-link-summary.board-menu-about-this-board-summary",(function(){return n.raw("&nbsp;"),c?n.format("add-a-description-to-your-template"):n.format("add-a-description-to-your-board")}))}))})),s&&n.li(".board-menu-navigation-item.mod-background",(function(){return n.a(".board-menu-navigation-item-link.js-change-background",{href:"#"},(function(){return n.span(".board-menu-navigation-item-link-icon.js-fill-background-preview"),n.raw("&nbsp;"),n.format("change-background")}))})),i||n.li(".board-menu-navigation-item",(function(){return n.a(".board-menu-navigation-item-link.js-open-card-filter",{href:"#"},(function(){return n.icon("search","search-cards",{class:"board-menu-navigation-item-link-icon"})}))})),s&&n.li(".board-menu-navigation-item",(function(){return n.a(".board-menu-navigation-item-link.js-open-stickers",{href:"#"},(function(){return n.icon("sticker","stickers",{class:"board-menu-navigation-item-link-icon"})}))})),n.li(".board-menu-navigation-item",(function(){return n.a(".board-menu-navigation-item-link.js-open-more",{href:"#"},(function(){return n.icon("overflow-menu-horizontal","more",{class:"board-menu-navigation-item-link-icon"})}))})),s)return n.div(".js-butler-button.hide",(function(){return n.hr(),n.li(".board-menu-navigation-item",(function(){return n.a(".board-menu-navigation-item-link.js-open-butler",{href:"#"},(function(){return n.icon("butler-bot","butler",{class:"board-menu-navigation-item-link-icon"}),n.div(".board-menu-navigation-item-link-summary",(function(){return n.raw("&nbsp;"),n.format("butler-description")}))}))}))}))})),s&&(n.hr(),a&&n.div(".enterprise-up-sell.on-board",(function(){return n.div(".enterprise-up-sell-body",(function(){return n.div(".enterprise-up-sell-copy",(function(){return n.h2(".enterprise-up-sell-header",(function(){return n.span(".icon-lg.icon-power-up"),n.format("ads-ent-title")})),n.div(".enterprise-up-sell-description",(function(){return n.format("ads-ent-description")}))}))})),n.div(".enterprise-up-sell-footer",(function(){return n.div(".enterprise-up-sell-actions",(function(){return n.button(".js-enterprise-upsell-dismiss",(function(){return n.format("ads-ent-dismiss")})),n.button(".js-enterprise-upsell-learn-more.nch-button.nch-button--primary",(function(){return n.format("ads-ent-learn-more")}))}))}))})),n.ul(".board-menu-navigation",(function(){return o({hasPaidOrgPowerUps:t,hasGoldPowerUps:r})})),n.div(".js-power-up-slots-container")),!c)return n.hr(),n.a(".board-menu-section-header.js-open-activity",{href:"#"},(function(){return n.span(".board-menu-section-header-icon.icon-lg.icon-activity"),n.span(".board-menu-section-header-title",(function(){return n.format("activity")})),n.span(".board-menu-section-header-count.js-unread-activity-count")})),n.div(".js-menu-action-list"),n.a(".show-more.js-fill-activity-button.js-open-activity",{href:"#"})}))},"./app/scripts/views/templates/board_menu_email.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_email");e.exports=n.renderable((function(e){var t=e.commentsEnabled,r=e.email,i=e.listName,o=e.lists,s=e.position,a=e.positionName;return t?(n.label({for:"boardEmail"},(function(){return n.format("your-email-address-for-this-board")})),n.input(".non-empty.js-autofocus",{id:"boardEmail",type:"text",name:"boardEmail",readonly:"readonly",placeholder:n.l("loading-ellipsis"),value:r,style:"margin: 4px 0 8px;"}),n.a(".quiet-button.js-generate-address",{href:"#"},(function(){return n.format("generate-a-new-email-address")})),n.a(".quiet-button.js-send-address",{href:"#"},(function(){return n.format("email-me-this-address")})),n.hr(),n.label((function(){return n.format("your-emailed-cards-appear-in-ellipsis")})),n.div(".form-grid",(function(){return n.div(".button-link.setting.form-grid-child.form-grid-child-twothirds",(function(){return n.span(".label",(function(){return n.format("list")})),n.span(".value.js-list-value",(function(){return n.text(i)})),n.label((function(){return n.format("list")})),n.select(".js-select-list",(function(){return function(){for(var e=[],t=function(){var t=i[r],o=t.id,s=t.name,a=t.selected;e.push(n.optionSelected(a,{value:o},(function(){return n.text(s)})))},r=0,i=Array.from(o);r<i.length;r++)t();return e}()}))})),n.div(".button-link.setting.form-grid-child",(function(){return n.span(".label",(function(){return n.format("position")})),n.span(".value.js-pos-value",(function(){return n.text(a)})),n.label((function(){return n.format("position")})),n.select(".js-select-position",(function(){return n.optionSelected("top"===s,{value:"top"},(function(){return n.format("top")})),n.optionSelected("bottom"===s,{value:"bottom"},(function(){return n.format("bottom")}))}))}))})),n.hr(),n.p(".u-bottom.quiet",(function(){return n.format("tip-dont-share-this-email-address-anyone-who-has-it-can-add-cards-as-you-when-composing-emails-the-card-title-goes-in-the-subject-and-the-card-description-in-the-body-more-email-formatting-tips")}))):(n.p((function(){return n.format("requires-comments-enabled")})),void n.p((function(){return n.format("enabled-by-enabling-comments")})))}))},"./app/scripts/views/templates/board_menu_invitations.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_invitations");e.exports=function(){return n.li((function(){return n.a(".js-select",{href:"#",name:"admins"},(function(){return n.check(n.mustacheVar("invitations_admins"),"admins"),n.span(".sub-name",(function(){return n.format("allow-only-admins-to-add-and-remove-others")}))}))})),n.li((function(){return n.a(".js-select",{href:"#",name:"members"},(function(){return n.check(n.mustacheVar("invitations_members"),"all-members"),n.span(".sub-name",(function(){return n.format("allow-members-and-admins-to-add-and-remove-others")}))}))}))}},"./app/scripts/views/templates/board_menu_more.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_more");e.exports=n.renderable((function(e){var t=e.shortUrl,r=e.editableByMember,i=e.isAdmin,o=e.isLoggedIn,s=e.canCloseOrLeave,a=e.canCloseBoard,c=e.canCopyBoard,l=e.canLeaveBoard,u=e.pLevelAltText,d=e.pLevelClass,p=e.helperText,f=e.showCollections,m=e.isTemplate,h=e.canBeTemplate,g=e.isOrgBcOrEnt,v=e.showTemplateUpgrade;return n.ul(".board-menu-navigation",(function(){return n.li(".board-menu-navigation-item",(function(){return n.a(".board-menu-navigation-item-link.js-open-settings",{href:"#"},(function(){return n.icon("gear","settings",{class:"board-menu-navigation-item-link-icon"})}))})),n.li(".board-menu-navigation-item",(function(){return n.a(".board-menu-navigation-item-link.js-open-labels",{href:"#"},(function(){return n.icon("label","labels",{class:"board-menu-navigation-item-link-icon"})}))})),f&&(g?n.li(".board-menu-navigation-item",(function(){return n.a(".board-menu-navigation-item-link.js-open-collections",{href:"#"},(function(){return n.icon("collection","collections",{class:"board-menu-navigation-item-link-icon"})}))})):n.li(".board-menu-navigation-item.disabled",(function(){return n.span(".board-menu-navigation-item-link.",(function(){return n.icon("collection","collections",{class:"board-menu-navigation-item-link-icon"}),n.div(".board-menu-pill-upgrade.js-board-menu-pill-collections-upgrade")})),n.div(".js-board-menu-prompt-collections")}))),n.li(".board-menu-navigation-item",(function(){return n.a(".board-menu-navigation-item-link.js-open-archive",{href:"#"},(function(){return n.icon("archive","archived-items",{class:"board-menu-navigation-item-link-icon"})}))}))})),n.hr(),n.ul(".board-menu-navigation",(function(){return r&&!m&&n.li(".board-menu-navigation-item",(function(){return n.a(".board-menu-navigation-item-link.js-email",{href:"#"},(function(){return n.icon("email","email-to-board-settings",{class:"board-menu-navigation-item-link-icon"})}))})),o&&!m&&n.li(".board-menu-navigation-item",(function(){return n.a(".board-menu-navigation-item-link.js-board-subscribe",{href:"#"},(function(){return n.icon("subscribe","watch",{class:"board-menu-navigation-item-link-icon"}),n.raw("&nbsp;"),n.span(".js-subscribed-state",(function(){return n.icon("check")}))}))})),h&&r&&i?n.li(".board-menu-navigation-item",(function(){return m?n.a(".board-menu-navigation-item-link.js-convert-to-board",{href:"#"},(function(){return n.icon("board",{class:"board-menu-navigation-item-link-icon"}),n.raw("&nbsp;"),n.format("convert-to-board")})):n.a(".board-menu-navigation-item-link.js-make-template",{href:"#"},(function(){return n.icon("template-board",{class:"board-menu-navigation-item-link-icon"}),n.raw("&nbsp;"),n.format("make-template")}))})):v&&n.li(".board-menu-navigation-item.disabled",(function(){return n.span(".board-menu-navigation-item-link",(function(){return n.icon("template-board",{class:"board-menu-navigation-item-link-icon"}),n.raw("&nbsp;"),n.format("make-template"),n.div(".board-menu-pill-upgrade.js-board-menu-pill-templates-upgrade")}))})),o&&!m&&c&&n.li(".board-menu-navigation-item",(function(){return n.a(".board-menu-navigation-item-link.js-copy-board",{href:"#"},(function(){return n.icon("copy","copy-board",{class:"board-menu-navigation-item-link-icon"})}))})),n.li(".board-menu-navigation-item",(function(){return n.a(".board-menu-navigation-item-link.js-share",{href:"#"},(function(){return n.icon("share","print-and-export",{class:"board-menu-navigation-item-link-icon"})}))}))})),s&&(n.hr(),n.ul(".board-menu-navigation",(function(){if(a&&n.li(".board-menu-navigation-item",(function(){return n.a(".board-menu-navigation-item-link.js-close-board",{href:"#"},(function(){return n.raw("&nbsp;"),m?n.format("close-template-ellipsis"):n.format("close-board-ellipsis")}))})),l)return n.li(".board-menu-navigation-item",(function(){return n.a(".board-menu-navigation-item-link.js-leave-board",{href:"#"},(function(){return n.raw("&nbsp;"),n.format("leave-board-ellipsis")}))}))}))),n.hr(),n.form(".u-gutter",(function(){return n.label({for:"id-short-url"},(function(){return m?n.format("link-to-this-template"):n.format("link-to-this-board")})),n.input(".js-short-url",{type:"text",readonly:"readonly",id:"id-short-url",value:t}),n.p(".quiet",(function(){return n.span({class:"icon-sm icon-".concat(d),title:u}),n.text(p)}))}))}))},"./app/scripts/views/templates/board_menu_more_activity_button.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_more_activity_button");e.exports=function(){return n.mustacheBlockInverted("hasCount",(function(){return n.format("view-all-activity-ellipsis")})),n.mustacheBlock("hasCount",(function(){return n.format("view-all-unread-activity-count-ellipsis",{count:n.mustacheVar("count")})}))}},"./app/scripts/views/templates/board_menu_settings.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_settings");e.exports=function(){return n.mustacheVar("isLoggedIn")||(n.ul(".board-menu-navigation",(function(){return n.li(".board-menu-navigation-item",(function(){return n.a(".js-change-cookie-settings.board-menu-navigation-item-link",{href:"#"},(function(){return n.icon("gear","cookie-settings",{class:"board-menu-navigation-item-link-icon"})}))}))})),n.hr()),n.div((function(){return n.ul(".pop-over-list.inset",(function(){if(n.mustacheBlock("blockTeamlessBoardsEnabled",(function(){return n.li("#board-settings-change-org")})),n.mustacheBlockInverted("blockTeamlessBoardsEnabled",(function(){return n.li((function(){return n.a({class:"js-change-org".concat(n.mustacheBlockInverted("canChangeOrg",(function(){return" disabled"}))),href:"#"},(function(){return n.mustacheBlock("setOrgNull",(function(){return n.format("remove-from-organization")})),n.mustacheBlockInverted("setOrgNull",(function(){return n.format("change-organization-ellipsis")})),n.mustacheBlock("orgDisplayName",(function(){return n.span(".sub-name",(function(){return n.text(n.mustacheVar("orgDisplayName"))}))}))}))}))})),n.hr(),n.li((function(){return n.a({class:n.mustacheBlock("__own",(function(){return"js-toggle-covers"}))+n.mustacheBlockInverted("__own",(function(){return" disabled"})),href:"#"},(function(){return n.mustacheBlockInverted("cardCovers",(function(){return n.format("enable-card-covers")})),n.mustacheBlock("cardCovers",(function(){return n.format("card-covers-enabled"),n.icon("check")})),n.span(".sub-name",(function(){return n.format("show-image-attachments-and-colors-on-the-front-of-cards")}))}))})),n.hr(),n.mustacheVar("isTemplate")||n.li((function(){return n.a({class:n.mustacheBlock("__own",(function(){return"js-change-comments"}))+n.mustacheBlockInverted("__own",(function(){return" disabled"})),href:"#"},(function(){return n.format("commenting-permissions-ellipsis-commentsdisplay",{commentsDisplay:n.mustacheVar("commentsDisplay")})}))})),n.mustacheVar("votingEnabled")&&n.li((function(){return n.a({class:n.mustacheBlock("__own",(function(){return"js-change-voting"}))+n.mustacheBlockInverted("__own",(function(){return" disabled"})),href:"#"},(function(){return n.format("voting-permissions-ellipsis-votingdisplay",{votingDisplay:n.mustacheVar("votingDisplay")})}))})),!n.mustacheVar("isTemplate"))return n.li((function(){return n.a({class:n.mustacheBlock("__own",(function(){return"js-change-add-members"}))+n.mustacheBlockInverted("__own",(function(){return" disabled"})),href:"#"},(function(){return n.format("invitations-permissions-ellipsis-invitationsdisplay",{invitationsDisplay:n.mustacheVar("invitationsDisplay")})}))})),n.hr(),n.li((function(){return n.a({class:" ".concat(n.mustacheBlock("__own",(function(){return" js-toggle-org-mem-join "}))," ").concat(n.mustacheBlockInverted("__own",(function(){return" disabled "}))," ").concat(n.mustacheBlockInverted("hasOrg",(function(){return" disabled "}))," ").concat(n.mustacheBlock("permissionLevel_private",(function(){return" disabled "}))," "),href:"#"},(function(){return n.check(n.mustacheVar("selfJoin_true"),"allow-team-members-to-edit-and-join"),n.span(".sub-name",(function(){return n.mustacheBlock("hasOrg",(function(){return n.mustacheBlock("permissionLevel_private",(function(){return n.format("any-team-member-can-edit-and-join-this-board-to-enable-this-the-board-cant-be-private")}))})),n.mustacheBlock("hasOrg",(function(){return n.mustacheBlockInverted("permissionLevel_private",(function(){return n.format("any-team-member-can-edit-and-join-this-board")}))})),n.mustacheBlockInverted("hasOrg",(function(){return n.mustacheBlock("permissionLevel_private",(function(){return n.format("any-team-member-can-edit-and-join-this-board-to-enable-this-the-board-has-to-be-a-part-of-a-team-and-the-board-cant-be-private")}))})),n.mustacheBlockInverted("hasOrg",(function(){return n.mustacheBlockInverted("permissionLevel_private",(function(){return n.format("any-team-member-can-edit-and-join-this-board-to-enable-this-the-board-has-to-be-a-part-of-a-team")}))}))}))}))}))}))}))}},"./app/scripts/views/templates/board_sidebar.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_sidebar");e.exports=n.renderable((function(){return n.div(".board-menu-tab-content",(function(){return n.div(".board-menu-header.js-board-menu-title",(function(){return n.div(".board-menu-header-content",(function(){return n.a(".board-menu-header-back-button.icon-lg.icon-back.js-pop-widget-view",{href:"#",title:n.l("go-back")}),n.h3(".board-menu-header-title.js-board-menu-title-text"),n.a(".board-menu-header-close-button.icon-lg.icon-close.js-hide-sidebar",{href:"#",title:n.l("close-the-board-menu")})})),n.hr(".board-menu-header-divider")})),n.div(".board-menu-content.u-fancy-scrollbar.js-board-menu-content-wrapper")}))}))},"./app/scripts/views/templates/board_sidebar_search_input.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_default");e.exports.renderInputRow=n.renderable((function(e){var t=e.title,r=e.showFilterButton;return n.div(".board-menu-navigation-row",(function(){if(n.div(".input-container",(function(){return n.input(".js-input.js-autofocus",{type:"search",attr:"title",placeholder:n.l("search-cards-placeholder"),"aria-label":n.l("search-cards-placeholder"),value:t}),n.div(".js-input-search-icon")})),r)return n.button(".button.js-search-open-card-filter",(function(){return n.icon("filter")}))}))})),e.exports.renderInputIcon=n.renderable((function(e){return e.title?n.a(".input-icon.js-search-clear-title",{href:"#"},(function(){return n.icon("close")})):n.a(".input-icon.js-search-open-card-filter",{href:"#"},(function(){return n.icon("search")}))}))},"./app/scripts/views/templates/description.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("description");e.exports=n.renderable((function(e){var t=e.editable,r=e.isCardDesc,i=e.placeholderKey,o=e.isAdmin,s=e.isTemplate;return n.div(".window-module",(function(){return n.div(".window-module-title.window-module-title-no-divider.description-title",(function(){if(n.span(".icon-description.icon-lg.window-module-title-icon"),n.h3(".u-inline-block",(function(){return n.format("description")})),t)return n.div({class:n.classify({editable:t}),attr:"desc"},(function(){return n.a(".nch-button.ml-4.hide-on-edit.js-show-with-desc.js-edit-desc.js-edit-desc-button",{href:"#"},(function(){return n.format("edit")})),n.span(".editing-members-description.js-editing-members-description.hide")}))})),n.div(".u-gutter",(function(){return n.div({class:n.classify({editable:t}),attr:"desc"},(function(){return n.div(".description-content.js-desc-content",(function(){if(n.div(".description-content-fade-button",(function(){return n.span(".description-content-fade-button-text",(function(){return n.format("show-full-description")}))})),n.div(".current.markeddown.hide-on-edit.js-desc.js-show-with-desc.hide",{dir:"auto"}),t||!s||r||o||n.div(".description-content-no-edit.js-hide-with-desc",(function(){return n.format(i)})),t)return n.p(".u-bottom.js-hide-with-desc",(function(){return n.a({class:n.classify({"description-fake-text-area hide-on-edit js-edit-desc  js-hide-with-draft":!0,large:!r}),href:"#"},(function(){return n.format(i)}))})),n.div(".description-edit.edit",(function(){return n.a(".helper.nch-button.js-format-help",{href:"#"},(function(){return n.format("formatting-help")})),n.textarea(".field.field-autosave.js-description-draft.description",{placeholder:n.l(i)})})),n.p(".edits-warning.quiet",(function(){return n.format("you-have-unsaved-edits-on-this-field"),n.text(" "),n.a(".js-view-edits",{href:"#"},(function(){return n.format("view-edits")})),n.text(" - "),n.a(".js-discard-edits",{href:"#"},(function(){return n.format("discard")}))})),n.p(".edits-error.error",(function(){return n.format("edit-not-saved")}))}))}))}))}))}))},"./app/scripts/views/templates/edit_controls.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("edit_controls");e.exports=n.renderable((function(){return n.div(".edit-controls.u-clearfix",(function(){return n.input(".nch-button.nch-button--primary.confirm.mod-submit-edit.js-save-edit",{type:"submit",value:n.l("save")}),n.a(".icon-lg.icon-close.dark-hover.cancel.js-cancel-edit",{href:"#"})}))}))},"./app/scripts/views/templates/formatting_help.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("formatting_help");e.exports=function(){return n.p((function(){return n.format("trello-uses-markdown-for-formatting-here-are-the-basics-see-the-complete-syntax")})),n.hr(),n.p(".quiet",(function(){return n.format("first-level-header")})),n.code((function(){return n.format("making-scrambled-eggs-a-primer"),n.br(),n.text("\n    ===============================\n  ")})),n.hr(),n.p(".quiet",(function(){return n.format("second-level-header")})),n.code((function(){return n.format("1-1-preparation"),n.br(),n.text("\n    ----------------\n  ")})),n.hr(),n.p(".quiet",(function(){return n.format("paragraphs")})),n.code((function(){return n.format("add-two-new-lines-to-start-a-new-paragraph-crack-two-eggs-into-the-bowl-and-whisk")})),n.hr(),n.p(".quiet",(function(){return n.format("bold")})),n.code((function(){return n.format("carefully-crack-the-eggs")})),n.hr(),n.p(".quiet",(function(){return n.format("emphasis")})),n.code((function(){return n.format("whisk-the-eggs-vigorously")})),n.hr(),n.p(".quiet",(function(){return n.format("lists")})),n.code((function(){return n.format("ingredients"),n.br(),n.br(),n.format("eggs"),n.br(),n.format("oil"),n.br(),n.format("optional-milk")})),n.hr(),n.p(".quiet",(function(){return n.format("links")})),n.code((function(){return n.format("to-download-a-pdf-version-of-the-recipe-click-here-https-example-com-scrambled-eggs-pdf")})),n.hr(),n.p(".quiet",(function(){return n.format("images")})),n.code((function(){return n.format("the-finished-dish-https-example-com-eggs-png")}))}},"./app/scripts/views/templates/popover_about_this_board_admin_list.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("popover_about_this_board_admin_list");e.exports=function(){return n.div(".about-this-board-admin-list-popover",(function(){return n.ul(".js-admin-list",(function(){return n.li(".pop-over-member-list",(function(){return n.span(".name.js-show-all-admins")}))}))}))}},"./app/scripts/views/templates/popover_share.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("popover_share");e.exports=n.renderable((function(e){var t=e.hasCsvExport,r=e.csvURL,i=e.jsonURL,o=(e.needsUpgradeForCsv,e.upgradeUrl,e.hasOrganization,e.upsellEnabled),s=(e.isAdDismissed,e.featureFlag);return n.ul(".pop-over-list",(function(){if(n.li((function(){return n.a(".js-print",{href:"#",title:n.l("print-using-the-browser-s-print-function-you-can-use-file")},(function(){return n.format("print-ellipsis")}))})),s?n.li((function(){return t?n.a(".js-export",{href:"#"},(function(){return n.format("export-board")})):n.a(".js-export-json",{href:i,title:n.l("export-the-board-data-in-json-format")},(function(){return n.format("export-json")}))})):(n.li((function(){return t?n.a(".js-export-csv",{href:r,title:n.l("export-the-board-data-in-csv-format")},(function(){return n.format("export-csv")})):n.a(".disabled",{href:"#",title:n.l("export-the-board-data-in-csv-format")},(function(){return n.format("export-csv"),n.div({class:"export-csv-update-pill",id:"js-export-csv-pill-update-prompt"})}))})),n.li((function(){return n.a(".js-export-json",{href:i,title:n.l("export-the-board-data-in-json-format")},(function(){return n.format("export-json")}))}))),!t&&o)return n.div(".popover-share-ads-container",(function(){return n.div(".print-and-export-upgrade-prompt-wrapper")}))}))}))},"./app/scripts/views/templates/product_promo_disable_overlay.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")();e.exports=n.renderable((function(){return n.div(".product-promo-disable-overlay")}))},"./app/scripts/views/templates/search_help_popover.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("search_help_popover");e.exports=n.renderable((function(){var e=function(e){return n.format(e,{archived:"archived",attachments:"attachments",board:"board",checklist:"checklist",comment:"comment",cover:"cover",created:"created",day:"day",description:"description",due:"due",edited:"edited",has:"has",id:"id",is:"is",label:"label",list:"list",member:"member",members:"members",month:"month",name:"name",open:"open",overdue:"overdue",sort:"sort",starred:"starred",stickers:"stickers",week:"week"})};return n.div(".search-tips.js-no-input",(function(){return n.div(".search-tips-list.js-search-tips-list",(function(){return n.p(".quiet",(function(){return e("intro-text")})),n.dl((function(){return n.dt((function(){return n.format("at-name")})),n.dd((function(){return e("returns-cards-assigned-to-a-member-member-also-works-me-will-include-only-your-cards")})),n.dt((function(){return n.format("label")})),n.dd((function(){return e("returns-labeled-cards-trello-will-suggest-labels-for-you-if-you-start-typing-and-the-label-you-are-looking-for-label-also-works")})),n.dt((function(){return e("list-name")})),n.dd((function(){return e("returns-cards-within-the-list-named-name-or-whatever-you-type-besides-name")})),n.dt((function(){return e("has-attachments")})),n.dd((function(){return e("returns-cards-with-attachments-has-description-has-cover-has-members-and-has-stickers-also-work-as-you-would-expect")})),n.dt((function(){return e("due-day")})),n.dd((function(){return e("returns-cards-due-within-24-hours-due-week-due-month-and-due-overdue-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-due-14-to-search-will-include-cards-due-in-the-next-14-days")})),n.dt((function(){return e("created-day")})),n.dd((function(){return e("returns-cards-created-in-the-last-24-hours-created-week-and-created-month-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-created-14-to-the-search-will-include-cards-created-in-the-last-14-days")})),n.dt((function(){return e("edited-day")})),n.dd((function(){return e("returns-cards-edited-in-the-last-24-hours-edited-week-and-edited-month-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-edited-21-to-the-search-will-include-cards-edited-in-the-last-21-days")})),n.dt((function(){return e("description-checklist-comment-and-name")})),n.dd((function(){return e("returns-cards-matching-the-text-of-card-descriptions-checklists-comments-or-names-for-example-comment-fix-it-will-return-cards-with-fix-it-in-a-comment")})),n.dt((function(){return e("sort-created")})),n.dd((function(){return e("sorts-cards-by-date-created-sort-edited-and-sort-due-also-work-as-expected")}))}))}))}))}))},"./app/scripts/views/templates/sticker_pack_selection_list.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("sticker_pack_selection_list");e.exports=function(){return n.h2((function(){return n.text(n.mustacheVar("displayName"))})),n.div(".sticker-list.u-clearfix.js-sticker-list.u-relative")}},"./app/scripts/views/templates/sticker_select.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("sticker_select");e.exports=n.renderable((function(e){var t=e.additionalStickersEnabled,r=e.upsellEnabled,i=e.useAnimatedStickers;return n.div(".search-stickers",(function(){return n.input(".js-search-stickers",{type:"text",placeholder:n.l("search-giphy")}),n.span(".icon-sm.icon-search")})),n.div(".spinner.loading.js-search-spinner.hide"),n.div(".giphy-stickers.js-giphy-stickers.hide",(function(){return n.div(".stickers-footer",(function(){return n.div(".check-div.mod-animated-check-div",(function(){return n.input(".animated-checkbox.js-use-animated-stickers",{type:"checkbox",checked:i,id:"usedAnimated"}),n.label({for:"usedAnimated"},(function(){return n.format("use-animated-stickers")}))})),n.span(".giphy-attribution")})),n.div(".js-giphy-stickers-no-results",(function(){return n.span(".no-results",(function(){return n.format("no-results")}))})),n.div(".sticker-list.u-clearfix.js-search-sticker-list")})),n.div(".js-static-stickers",(function(){if(n.div(".sticker-list.u-clearfix.js-standard-sticker-list"),t||r)return n.div(".js-premium-stickers"),n.h2((function(){return n.format("custom-stickers")})),n.div(".sticker-list.u-clearfix.js-custom-sticker-list")}))}))},"./app/scripts/views/templates/sticker_select_item.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("sticker_select_item");e.exports=function(){return n.mustacheBlock("pending",(function(){return n.img(".sticker-select-image.sticker-select-pending",{src:n.mustacheVar("url")})})),n.mustacheBlockInverted("pending",(function(){return n.img(".sticker-select-image.sticker-select-shadow",{src:n.mustacheVar("url")}),n.img(".sticker-select-image.sticker-select-fixed",{src:n.mustacheVar("url")}),n.img(".sticker-select-image.sticker-select-peel",{src:n.mustacheVar("url")})})),n.mustacheBlock("id",(function(){return n.span(".sticker-select-option.sticker-select-option-delete-button.js-delete-sticker",(function(){return n.icon("close",{class:"sticker-select-option-icon"}),n.span(".sticker-select-option-text.u-text-underline",(function(){return n.format("delete")}))}))})),n.mustacheBlock("error",(function(){return n.span(".sticker-select-option",(function(){return n.span(".sticker-select-option-text",(function(){return n.text(n.mustacheVar("error"))}))}))})),n.mustacheBlock("pending",(function(){return n.span(".sticker-select-option",(function(){return n.span(".spinner.small.u-float-left",{style:"margin-right: 4px;"}),n.span(".sticker-select-option-text",(function(){return n.format("uploading-ellipsis")}))}))}))}},"./app/scripts/views/templates/sticker_select_item_upload.js":function(e,t,r){var n=r("./app/scripts/views/internal/teacup-with-helpers.js")("sticker_select_item_upload");e.exports=function(){return n.form({action:"/1/member/".concat(n.mustacheVar("id"),"/customStickers"),method:"post",enctype:"multipart/form-data"},(function(){return n.input({type:"hidden",name:"token",value:""}),n.input({type:"hidden",name:"format",value:"http"}),n.div(".sticker-select.sticker-select-upload",(function(){return n.span(".sticker-select-upload-icon.icon-lg.icon-add"),n.input({type:"file",name:"file",class:"sticker-select-upload-input js-upload-image ".concat(n.mustacheBlockInverted("enabled_customStickers",(function(){return" disabled"}))),multiple:"multiple",accept:"image/*"})}))}))}},"./app/src/components/BoardMenuViewsAndCopies/BoardMenuViewsAndCopies.less":function(e,t,r){var n=r("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=r("./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/BoardMenuViewsAndCopies/BoardMenuViewsAndCopies.less");"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};n(i,o);e.exports=i.locals||{}},"./app/src/components/BoardMenuViewsAndCopies/BoardMenuViewsAndCopies.tsx":function(e,t,r){"use strict";r.r(t),r.d(t,"ViewsAndCopies",(function(){return m})),r.d(t,"BoardMenuViewsAndCopies",(function(){return h}));var n=r("./node_modules/react/index.js"),i=r.n(n),o=r("./packages/nachos/icons/copy.tsx"),s=r("./packages/nachos/icons/subscribe.tsx"),a=r("./app/common/lib/util/i18n/index.ts"),c=r("./node_modules/@apollo/react-hooks/lib/react-hooks.esm.js"),l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BoardStats"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"boardId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"board"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"boardId"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stats"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"boardId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"copyCount"},arguments:[],directives:[]}]}}]}}]}}]};var u=r("./app/common/lib/util/i18n/formatters.ts"),d=r("./app/src/components/BoardMenuViewsAndCopies/BoardMenuViewsAndCopies.less"),p=r.n(d),f=Object(a.forTemplate)("board_menu_about_this_board"),m=function(e){var t=e.isTemplate,r=e.showLabels,n=e.useSmallTextStyle,a=e.copyCount,c=e.viewCount,l=t&&a>=0&&c>0,d=f(1===a?"copy":"copies"),m=f(1===c?"view":"views"),h=n?p.a.viewCopyTextSmall:p.a.viewCopyText;return i.a.createElement("div",null,l&&i.a.createElement("div",null,i.a.createElement("span",{className:h,title:"".concat(Object(u.asNumber)(a)," ").concat(d)},i.a.createElement(o.a,{size:"small",color:"quiet",dangerous_className:p.a.iconViewCopy}),a&&Object(u.asCompactNumber)(a),"",r&&d),"",i.a.createElement("span",{className:h,title:"".concat(Object(u.asNumber)(c)," ").concat(m)},i.a.createElement(s.a,{size:"small",color:"quiet",dangerous_className:p.a.iconViewCopy}),c&&Object(u.asCompactNumber)(c),"",r&&m)))},h=function(e){var t,r,n,o,s,a,u,d=e.idBoard,f=e.isTemplate,h=e.showLabels,g=(u={variables:{boardId:d}},c.c(l,u)),v=g.data,b=g.error,y=g.loading,k=null!==(t=null==v||null===(r=v.board)||void 0===r||null===(n=r.stats)||void 0===n?void 0:n.copyCount)&&void 0!==t?t:0,w=null!==(o=null==v||null===(s=v.board)||void 0===s||null===(a=s.stats)||void 0===a?void 0:a.viewCount)&&void 0!==o?o:0,j=f&&k>=0&&w>0;return b||y?null:i.a.createElement("div",null,j&&i.a.createElement("div",{className:p.a.viewCopyComponent},i.a.createElement("hr",null),i.a.createElement(m,{isTemplate:f,showLabels:h,useSmallTextStyle:!1,copyCount:k,viewCount:w}),i.a.createElement("hr",null)))}},"./app/src/components/ExportPopoverContent/ExportPopoverContent.less":function(e,t,r){var n=r("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=r("./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/ExportPopoverContent/ExportPopoverContent.less");"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};n(i,o);e.exports=i.locals||{}},"./app/src/components/ExportPopoverContent/index.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"ExportPopoverContent",(function(){return w}));var n=r("./node_modules/react/index.js"),i=r.n(n),o=r("./node_modules/@apollo/react-hooks/lib/react-hooks.esm.js"),s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BoardExport"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"idBoard"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"idExport"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"board"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"idBoard"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"idOrganization"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"export"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"idExport"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"attempts"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"finished"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"size"},arguments:[],directives:[]}]}}]}}]}}]};var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"StartBoardExport"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"startBoardExport"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"attempts"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"finished"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"size"},arguments:[],directives:[]}]}}]}}]};var c=r("./packages/nachos/button.ts"),l=r("./app/common/lib/util/i18n/index.ts"),u=r("./app/src/components/ExportPopoverContent/ExportPopoverContent.less"),d=r.n(u),p=r("./app/common/lib/util/date.ts"),f=r("./app/gamma/src/util/dates.ts");function m(e){for(var t=["B","KB","MB","GB"],r=e,n=0;n<t.length;n++){if(r<1024||n===t.length-1)return e=Math.round(100*r)/100,"".concat(e," ").concat(t[n]);r/=1024}return"unknown"}var h=r("./packages/nachos/spinner.ts"),g=r("./packages/analytics/index.ts"),v=r("./packages/atlassian-analytics/index.ts");function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=Object(l.forTemplate)("popover_share"),w=function(e){var t,r=e.idBoard,l=e.idOrg,u=(t={variables:{idBoard:r,idExport:"mostRecent"}},o.c(s,t)),y=u.data,w=u.startPolling,j=u.stopPolling,x=y&&y.board&&y.board.export&&y.board.export.status.finished,_=b(Object(n.useState)(!1),2),O=_[0],S=_[1],C=b(Object(n.useState)(y&&y.board&&!!y.board.export),2),E=C[0],P=C[1];Object(n.useEffect)((function(){E?x||(S(!0),w(1e3)):S(!1)}),[E,x,w]),Object(n.useEffect)((function(){x&&(S(!1),j())}),[y,x,j]);var T=b(function(e){return o.b(a,e)}(),1)[0];if(Object(n.useEffect)((function(){Object(g.trackUe)({category:g.Noun.BOARDS_MENU,verb:g.Verb.SHOWS,directObj:g.Noun.EXPORT_POPOVER,context:{boardId:r,organizationId:l}}),v.Analytics.sendScreenEvent({name:"exportBoardInlineDialog"})}),[r,l]),!y||!y.board)return i.a.createElement("div",null,i.a.createElement(h.a,{centered:!0}));y&&y.board&&y.board.idOrganization&&(l=y.board.idOrganization);return i.a.createElement("div",null,y.board.export&&y.board.export.status.finished&&!O&&i.a.createElement("p",null,k("last-exported",{timeOfLastExport:Object(f.getDateDeltaString)(Object(p.idToDate)(y.board.export.id),new Date),sizeOfExport:"number"==typeof y.board.export.size?m(y.board.export.size):"unknown"})),O&&E&&i.a.createElement("p",null,k("exporting-ellipsis")),!y.board.export&&!E&&i.a.createElement("p",{className:d.a.exportHistoryText},k("no-export-history")),i.a.createElement("div",{className:d.a.buttons},i.a.createElement(c.Button,{appearance:"primary",onClick:function(){P(!0),S(!0),T({variables:{id:r}}).then((function(){w(1e3)})),Object(g.trackUe)({category:g.Noun.BOARDS_MENU,verb:g.Verb.CLICKS,directObj:g.Noun.EXPORT_BOARD,context:{boardId:r,organizationId:l}}),v.Analytics.sendClickedButtonEvent({buttonName:"exportButton",source:"exportBoardInlineDialog",containers:{board:{id:r},organization:{id:l}}})},className:d.a.exportButton,isDisabled:O},k("export")),y.board.export&&!O&&i.a.createElement("a",{className:d.a.downloadLink,href:"/1/boards/".concat(r,"/exports/").concat(y.board.export.id,"/download"),onClick:function(){Object(g.trackUe)({category:g.Noun.BOARDS_MENU,verb:g.Verb.CLICKS,directObj:g.Noun.DOWNLOAD_BOARD_EXPORT,context:{boardId:r,organizationId:l}}),v.Analytics.sendClickedLinkEvent({linkName:"downloadLink",source:"exportBoardInlineDialog",containers:{board:{id:r},organization:{id:l}}})}},k("download"))))}},"./app/src/components/TemplateTips/LazyTemplateTipsPopover.tsx":function(e,t,r){"use strict";r.r(t),r.d(t,"LazyTemplateTipsPopover",(function(){return s}));var n=r("./node_modules/react/index.js"),i=r.n(n),o=r("./packages/use-lazy-component/index.ts"),s=function(e){var t=e.boardId,s=e.isInGallery,a=e.name,c=e.username,l=e.toggleAboutThisTemplate,u=e.toggleBackgroundSelector,d=Object(o.useLazyComponent)((function(){return r.e(149).then(r.bind(null,"./app/src/components/TemplateTips/TemplateTipsPopover.tsx"))}));return i.a.createElement(n.Suspense,{fallback:null},i.a.createElement(d,{boardId:t,isInGallery:s,name:a,username:c,toggleAboutThisTemplate:l,toggleBackgroundSelector:u}))}},"./app/src/components/UpgradePrompts/renderUpgradePrompt.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"renderUpgradePrompt",(function(){return c}));var n=r("./app/scripts/db/auth.js"),i=r.n(n),o=r("./app/src/components/ComponentWrapper/index.ts"),s=r("./packages/react-dom-wrapper/index.ts"),a=r("./packages/browser/index.ts"),c=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,c=r.boardModel,l=r.extraCondition,u=void 0===l?function(){return!0}:l,d=r.orgModel,p=r.promptID,f=r.allowUpsell,m=i.a.me(),h=!!p&&m.isDismissed(p),g=d||c&&c.getOrganization(),v=!!g&&(!g.isPremium()&&!g.isEnterprise()),b=m.hasPaidOrgPowerUps(),y=(!Object(a.dontUpsell)()||f)&&!h&&v&&!b&&u(),k=function(){return!!t&&s.default.unmountComponentAtNode(t)},w=function(){p&&m.dismiss(p),k()},j="function"==typeof e?e({dismiss:w}):e;return t&&(y||n)?Object(o.renderComponent)(j,t):k(),k}},"./node_modules/@giphy/js-fetch-api/dist/api.js":function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GiphyFetch=void 0;var o=i(r("./node_modules/qs/lib/index.js")),s=i(r("./node_modules/cookie/index.js")),a=r("./node_modules/@giphy/js-fetch-api/dist/normalize/gif.js"),c=i(r("./node_modules/@giphy/js-fetch-api/dist/request.js")),l=function(e){return e&&e.type?e.type:"gifs"},u=function(){function e(e){var t=this;this.getQS=function(e){void 0===e&&(e={});var r=("undefined"!=typeof document?s.default.parse(document.cookie):{}).giphy_pbid;return o.default.stringify(n(n({},e),{api_key:t.apiKey,pingback_id:r}))},this.apiKey=e}return e.prototype.categories=function(e){return c.default("gifs/categories?"+this.getQS(e))},e.prototype.gif=function(e){return c.default("gifs/"+e+"?"+this.getQS(),a.normalizeGif)},e.prototype.gifs=function(e,t){return Array.isArray(e)?c.default("gifs?"+this.getQS({ids:e.join(",")}),a.normalizeGifs):c.default("gifs/categories/"+e+"/"+t+"?"+this.getQS(),a.normalizeGifs)},e.prototype.emoji=function(e){return c.default("emoji?"+this.getQS(e),a.normalizeGifs,"EMOJI")},e.prototype.search=function(e,t){void 0===t&&(t={});var r=t.channel?"@"+t.channel+" "+e:e,i=this.getQS(n(n({},t),{q:r})),o="text"===t.type?"TEXT_SEARCH":t.explore?"GIF_EXPLORE":"GIF_SEARCH";return c.default(l(t)+"/search?"+i,a.normalizeGifs,o)},e.prototype.subcategories=function(e,t){return c.default("gifs/categories/"+e+"?"+this.getQS(t))},e.prototype.trending=function(e){void 0===e&&(e={});var t="text"===e.type?"TEXT_TRENDING":"GIF_TRENDING";return c.default(l(e)+"/trending?"+this.getQS(e),a.normalizeGifs,t)},e.prototype.random=function(e){return c.default(l(e)+"/random?"+this.getQS(e),a.normalizeGif)},e.prototype.related=function(e,t){return c.default("gifs/related?"+this.getQS(n({gif_id:e},t)),a.normalizeGifs,"GIF_RELATED")},e}();t.GiphyFetch=u,t.default=u},"./node_modules/@giphy/js-fetch-api/dist/fetch-error.js":function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,r,n){void 0===r&&(r=0),void 0===n&&(n="");var i=e.call(this,t)||this;return i.status=r,i.statusText=n,i}return i(t,e),t}(Error);t.default=o},"./node_modules/@giphy/js-fetch-api/dist/index.js":function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});var s=r("./node_modules/@giphy/js-util/dist/index.js"),a=r("./node_modules/@giphy/js-fetch-api/dist/api.js");Object.defineProperty(t,"GiphyFetch",{enumerable:!0,get:function(){return a.default}}),o(r("./node_modules/@giphy/js-fetch-api/dist/option-types.js"),t),o(r("./node_modules/@giphy/js-fetch-api/dist/result-types.js"),t);var c=r("./node_modules/@giphy/js-fetch-api/dist/paginator.js");Object.defineProperty(t,"gifPaginator",{enumerable:!0,get:function(){return c.gifPaginator}});var l=r("./node_modules/@giphy/js-fetch-api/package.json").version;(null===(n=s.getGiphySDKRequestHeaders())||void 0===n?void 0:n.get("X-GIPHY-SDK-NAME"))||(s.appendGiphySDKRequestHeader("X-GIPHY-SDK-NAME","FetchAPI"),s.appendGiphySDKRequestHeader("X-GIPHY-SDK-VERSION",l))},"./node_modules/@giphy/js-fetch-api/dist/normalize/gif.js":function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeGifs=t.normalizeGif=t.USER_BOOL_PROPS=t.BOOL_PROPS=void 0,t.BOOL_PROPS=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker"],t.USER_BOOL_PROPS=["suppress_chrome","is_public","is_verified"];var i=function(e){return function(t){return e[t]=!!e[t]}},o=function(e){return"string"==typeof e?e:e.text},s=function(e,r,s){void 0===r&&(r=""),void 0===s&&(s="");var a=n({},e);a.id=String(a.id),a.tags=(a.tags||[]).map(o),a.bottle_data||(a.bottle_data={}),a.response_id=r,a.pingback_event_type=s,t.BOOL_PROPS.forEach(i(a));var c=a.user;if(c){var l=n({},c);t.USER_BOOL_PROPS.forEach(i(l)),a.user=l}return a};t.normalizeGif=function(e,t){var r=e.meta.response_id;return e.data=s(e.data,r,t),e},t.normalizeGifs=function(e,t){var r=e.meta.response_id;return e.data=e.data.map((function(e){return s(e,r,t)})),e}},"./node_modules/@giphy/js-fetch-api/dist/option-types.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@giphy/js-fetch-api/dist/paginator.js":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n};Object.defineProperty(t,"__esModule",{value:!0}),t.gifPaginator=void 0,t.gifPaginator=function(e,t){void 0===t&&(t=[]);var r=o(t),s=t.map((function(e){return e.id})),a=t.length,c=!1;return function(){return n(void 0,void 0,void 0,(function(){var t,n,l;return i(this,(function(i){switch(i.label){case 0:return c?[2,r]:[4,e(a)];case 1:return t=i.sent(),n=t.pagination,l=t.data,a=n.count+n.offset,c=a===n.total_count,l.forEach((function(e){var t=e.id;s.includes(t)||(r.push(e),s.push(t))})),[2,o(r)]}}))}))}}},"./node_modules/@giphy/js-fetch-api/dist/request.js":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ERROR=t.ERROR_PREFIX=void 0;var s=o(r("./node_modules/@giphy/js-fetch-api/dist/fetch-error.js"));t.ERROR_PREFIX="@giphy/js-fetch-api: ",t.DEFAULT_ERROR="Error fetching";var a=function(e){return e},c={};t.default=function(e,r,o){var l=this;if(void 0===r&&(r=a),!c[e]){c[e]=n(l,void 0,void 0,(function(){var n,a,l,u,d;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,9,,10]),[4,fetch("https://api.giphy.com/v1/"+e,{method:"get"})];case 1:return(a=i.sent()).ok?[4,a.json()]:[3,3];case 2:return u=i.sent(),[2,r(u,o)];case 3:l=t.DEFAULT_ERROR,i.label=4;case 4:return i.trys.push([4,6,,7]),[4,a.json()];case 5:return(u=i.sent()).message&&(l=u.message),[3,7];case 6:return i.sent(),[3,7];case 7:n=new s.default(""+t.ERROR_PREFIX+l,a.status,a.statusText),i.label=8;case 8:return[3,10];case 9:return d=i.sent(),n=new s.default(d.message),delete c[e],[3,10];case 10:throw n}}))}))}return c[e]}},"./node_modules/@giphy/js-fetch-api/dist/result-types.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@giphy/js-fetch-api/package.json":function(e,t){e.exports={scripts:{clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc",prepublish:"npm run clean && tsc",build:"tsc",test:"jest --config ./jestconfig.js","test:watch":"jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"1.6.0",main:"dist/index.js",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",types:"dist/index.d.ts",files:["dist/**/*","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"^2.0.2","@giphy/js-util":"^1.9.1",cookie:"0.4.0",qs:"^6.7.0"},devDependencies:{"@types/cookie":"^0.3.3","@types/qs":"^6.5.3","jest-fetch-mock":"^2.1.2","parcel-bundler":"^1.12.3",typedoc:"^0.14.2","typedoc-thunder-theme":"^0.0.2",typescript:"^3.8.2"},gitHead:"8d57ae7cdd775900da581fb511b92f23cd0d8dd8"}},"./node_modules/@giphy/js-util/dist/bestfit.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@giphy/js-util/dist/log.js"),i=50;t.setRenditionScaleUpMaxPixels=function(e){n.Logger.debug("@giphy/js-util set rendition selection scale up max pixels to "+e),i=e},t.default=function(e,t,r,n){void 0===n&&(n=i);var o=e[0],s=e.filter((function(e){return e.width*e.height>o.width*o.height&&(o=e),t-e.width<=n&&r-e.height<=n}));return 0===s.length?o:function(e,t,r){var n,i=1/0;return r.forEach((function(r){var o=r.width/e*(r.height/t),s=Math.abs(1-o);s<i&&(i=s,n=r)})),n}(t,r,s)}},"./node_modules/@giphy/js-util/dist/collections.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapValues=function(e,t){if(Array.isArray(e))throw"This map is just for objects, just use array.map for arrays";return Object.keys(e).reduce((function(r,n){return r[n]=t(e[n],n),r}),{})},t.forEach=function(e,t){if(Array.isArray(e))throw"This map is just for objects, just use array.forEach for arrays";return Object.keys(e).forEach((function(r){t(e[r],r)}))},t.take=function(e,t){return void 0===t&&(t=0),e.slice(0,t)},t.without=function(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))},t.pick=function(e,t){var r={};return t.forEach((function(t){void 0!==e[t]&&(r[t]=e[t])})),r}},"./node_modules/@giphy/js-util/dist/construct-moat-data.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.constructMoatData=function(e){var t,r=e.tdata,n=((null===(t=null==r?void 0:r.web)||void 0===t?void 0:t.filter((function(e){return"Moat"===e.vendor})))||[])[0];if(null==n?void 0:n.verificationParameters){var i=n.verificationParameters,o=i.moatClientLevel1,s=void 0===o?"_ADVERTISER_":o,a=i.moatClientLevel2,c=void 0===a?"_CAMPAIGN_":a,l=i.moatClientLevel3,u=void 0===l?"_LINE_ITEM_":l,d=i.moatClientLevel4,p=void 0===d?"_CREATIVE_":d,f=i.moatClientSlicer1,m=void 0===f?"_SITE_":f,h=i.moatClientSlicer2,g=void 0===h?"_PLACEMENT_":h,v=i.zMoatPosition;return{moatClientLevel1:s,moatClientLevel2:c,moatClientLevel3:u,moatClientLevel4:p,moatClientSlicer1:m,moatClientSlicer2:g,zMoatPosition:void 0===v?"_POSITION_":v}}}},"./node_modules/@giphy/js-util/dist/get-client-rect-from-el.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=0,r=0,n=e.offsetWidth,i=e.offsetHeight;do{t+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent}while(e);return{left:t,top:r,width:n,height:i,right:t+n,bottom:r+i}}},"./node_modules/@giphy/js-util/dist/gif-utils.js":function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@giphy/js-util/dist/collections.js"),s=i(r("./node_modules/@giphy/js-util/dist/bestfit.js")),a=r("./node_modules/@giphy/js-util/dist/webp-check.js");t.getSpecificRendition=function(e,t,r,n){var i=e.images,o=e.is_sticker;if(void 0===r&&(r=!1),void 0===n&&(n=!1),!i||!t)return"";var s=i[t+((r=r&&!n)?"_still":"")];if(s){if(o||r)return s.url;var c=a.SUPPORTS_WEBP&&s.webp;return n?s.mp4:c||s.url}return""};t.getBestRendition=function(e,t,r,i){var a=o.pick(e,["original","fixed_width","fixed_height","fixed_width_small","fixed_height_small"]),c=Object.entries(a).map((function(e){var t=e[0],r=e[1];return n({renditionName:t},r)}));return s.default(c,t,r,i)},t.getBestRenditionUrl=function(e,r,n,i){var o=e.images,s=e.video,c=e.type;if(void 0===i&&(i={isStill:!1,useVideo:!1}),!r||!n||!o)return"";var l=i.useVideo,u=i.isStill,d=i.scaleUpMaxPixels,p=function(e,t,r){return"video"===e&&r&&r.previews&&!Object.keys(t).length?r.previews:t}(c,o,s),f=p[t.getBestRendition(p,r,n,d).renditionName+(u&&!l?"_still":"")];return(l?f.mp4:a.SUPPORTS_WEBP&&f.webp?f.webp:f.url)||""},t.getGifHeight=function(e,t){var r=e.images.fixed_width;if(r){var n=r.width/r.height;return Math.round(t/n)}return 0},t.getGifWidth=function(e,t){var r=e.images.fixed_width;if(r){var n=r.width/r.height;return Math.round(t*n)}return 0},t.getAltText=function(e){var t=e.user,r=e.tags,n=void 0===r?[]:r,i=e.is_sticker,s=void 0!==i&&i,a=e.title,c=void 0===a?"":a;if(c)return c;var l=t&&t.username||"";return(l?l+" ":"")+o.take(o.without(n,["transparent"]),l?4:5).join(" ")+" "+(s?"Sticker":"GIF")}},"./node_modules/@giphy/js-util/dist/index.js":function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var i=r("./node_modules/@giphy/js-util/dist/bestfit.js");t.bestfit=i.default,t.setRenditionScaleUpMaxPixels=i.setRenditionScaleUpMaxPixels,n(r("./node_modules/@giphy/js-util/dist/collections.js")),n(r("./node_modules/@giphy/js-util/dist/construct-moat-data.js"));var o=r("./node_modules/@giphy/js-util/dist/get-client-rect-from-el.js");t.getClientRect=o.default;var s=r("./node_modules/@giphy/js-util/dist/gif-utils.js");t.getAltText=s.getAltText,t.getBestRendition=s.getBestRendition,t.getBestRenditionUrl=s.getBestRenditionUrl,t.getGifHeight=s.getGifHeight,t.getGifWidth=s.getGifWidth,t.getSpecificRendition=s.getSpecificRendition,n(r("./node_modules/@giphy/js-util/dist/log.js")),n(r("./node_modules/@giphy/js-util/dist/sdk-headers.js"));var a=r("./node_modules/@giphy/js-util/dist/tracking-pixel.js");t.injectTrackingPixel=a.default;var c=r("./node_modules/@giphy/js-util/dist/webp-check.js");t.checkIfWebP=c.checkIfWebP},"./node_modules/@giphy/js-util/dist/log.js":function(e,t,r){"use strict";var n,i=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n};Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"}(n=t.LogLevel||(t.LogLevel={})),t.Logger={ENABLED:"undefined"!=typeof window&&location&&-1!==location.search.indexOf("giphy-debug"),LEVEL:0,PREFIX:"GiphyJS",debug:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.Logger.ENABLED&&t.Logger.LEVEL<=n.DEBUG&&console.debug.apply(console,i([t.Logger.PREFIX],e))},info:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.Logger.ENABLED&&t.Logger.LEVEL<=n.INFO&&console.info.apply(console,i([t.Logger.PREFIX],e))},warn:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.Logger.ENABLED&&t.Logger.LEVEL<=n.WARN&&console.warn.apply(console,i([t.Logger.PREFIX],e))},error:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.Logger.ENABLED&&t.Logger.LEVEL<=n.ERROR&&console.error.apply(console,i([t.Logger.PREFIX],e))}}},"./node_modules/@giphy/js-util/dist/sdk-headers.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=("undefined"!=typeof window?window:e)||{};r._GIPHY_SDK_HEADERS_=r._GIPHY_SDK_HEADERS_||(r.Headers?new r.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0),t.getGiphySDKRequestHeaders=function(){return r._GIPHY_SDK_HEADERS_},t.appendGiphySDKRequestHeader=function(e,r){var n;return null===(n=t.getGiphySDKRequestHeaders())||void 0===n?void 0:n.set(e,r)},t.appendGiphySDKRequestParam=function(e,r){var n;return null===(n=t.getGiphySDKRequestHeaders())||void 0===n?void 0:n.set(e,r)}}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/@giphy/js-util/dist/tracking-pixel.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/dompurify/dist/purify.js");t.default=function(e){void 0===e&&(e=[]),e.forEach((function(e){var t,r=document.createElement("html");e=e.replace("%%CACHEBUSTER%%",Date.now().toString()),r.innerHTML=n.sanitize(e);var i=r.querySelector("img");i&&(null===(t=null===document||void 0===document?void 0:document.querySelector("head"))||void 0===t||t.appendChild(i))}))}},"./node_modules/@giphy/js-util/dist/webp-check.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SUPPORTS_WEBP=null,t.checkIfWebP=new Promise((function(e){"undefined"==typeof Image&&e(!1);var r=new Image;r.onload=function(){t.SUPPORTS_WEBP=!0,e(t.SUPPORTS_WEBP)},r.onerror=function(){t.SUPPORTS_WEBP=!1,e(t.SUPPORTS_WEBP)},r.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}))},"./node_modules/cookie/index.js":function(e,t,r){"use strict";t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},i=t||{},s=e.split(o),c=i.decode||n,l=0;l<s.length;l++){var u=s[l],d=u.indexOf("=");if(!(d<0)){var p=u.substr(0,d).trim(),f=u.substr(++d,u.length).trim();'"'==f[0]&&(f=f.slice(1,-1)),null==r[p]&&(r[p]=a(f,c))}}return r},t.serialize=function(e,t,r){var n=r||{},o=n.encode||i;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!s.test(e))throw new TypeError("argument name is invalid");var a=o(t);if(a&&!s.test(a))throw new TypeError("argument val is invalid");var c=e+"="+a;if(null!=n.maxAge){var l=n.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");c+="; Max-Age="+Math.floor(l)}if(n.domain){if(!s.test(n.domain))throw new TypeError("option domain is invalid");c+="; Domain="+n.domain}if(n.path){if(!s.test(n.path))throw new TypeError("option path is invalid");c+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");c+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(c+="; HttpOnly");n.secure&&(c+="; Secure");if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return c};var n=decodeURIComponent,i=encodeURIComponent,o=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function a(e,t){try{return t(e)}catch(t){return e}}},"./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/BoardMenuViewsAndCopies/BoardMenuViewsAndCopies.less":function(e,t,r){(t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,"._27Uw8fo9rGrvnr{margin-left:8px}.vE8uKcBl9PMnJD{font-weight:600}.ABJoLPE63QtUOR,.vE8uKcBl9PMnJD{display:inline-flex;color:#5e6c84}.ABJoLPE63QtUOR{font-size:12px}.M7H7bE4oMCKmIy{display:inline-flex;height:20px;width:20px;justify-content:center;align-items:center}",""]),t.locals={viewCopyComponent:"_27Uw8fo9rGrvnr",viewCopyText:"vE8uKcBl9PMnJD",viewCopyTextSmall:"ABJoLPE63QtUOR",iconViewCopy:"M7H7bE4oMCKmIy"}},"./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/ExportPopoverContent/ExportPopoverContent.less":function(e,t,r){(t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,"._2QhXDzQc92AAJ8{color:#8993a4;padding:0 4px}._2QhXDzQc92AAJ8:hover{color:#091e42}._2_JqGosBLzpgCG{margin:0}._2nlsR5BDZms-lO{display:flex;justify-content:space-between;align-items:center;margin-top:12px}.QUcutfN8RVSQzJ{display:block}",""]),t.locals={downloadLink:"_2QhXDzQc92AAJ8",exportButton:"_2_JqGosBLzpgCG",buttons:"_2nlsR5BDZms-lO",exportHistoryText:"QUcutfN8RVSQzJ"}},"./node_modules/dompurify/dist/purify.js":function(e,t,r){e.exports=function(){"use strict";function e(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var t=Object.hasOwnProperty,r=Object.setPrototypeOf,n=Object.isFrozen,i=Object.keys,o=Object.freeze,s=Object.seal,a="undefined"!=typeof Reflect&&Reflect,c=a.apply,l=a.construct;c||(c=function(e,t,r){return e.apply(t,r)}),o||(o=function(e){return e}),s||(s=function(e){return e}),l||(l=function(t,r){return new(Function.prototype.bind.apply(t,[null].concat(e(r))))});var u=_(Array.prototype.forEach),d=_(Array.prototype.indexOf),p=_(Array.prototype.join),f=_(Array.prototype.pop),m=_(Array.prototype.push),h=_(Array.prototype.slice),g=_(String.prototype.toLowerCase),v=_(String.prototype.match),b=_(String.prototype.replace),y=_(String.prototype.indexOf),k=_(String.prototype.trim),w=_(RegExp.prototype.test),j=O(RegExp),x=O(TypeError);function _(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return c(e,t,n)}}function O(e){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(e,r)}}function S(e,t){r&&r(e,null);for(var i=t.length;i--;){var o=t[i];if("string"==typeof o){var s=g(o);s!==o&&(n(t)||(t[i]=s),o=s)}e[o]=!0}return e}function C(e){var r={},n=void 0;for(n in e)c(t,e,[n])&&(r[n]=e[n]);return r}var E=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),P=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),T=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),A=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),D=o(["#text"]),R=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),B=o(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),N=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),L=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),M=s(/\{\{[\s\S]*|[\s\S]*\}\}/gm),I=s(/<%[\s\S]*|[\s\S]*%>/gm),U=s(/^data-[\-\w.\u00B7-\uFFFF]/),V=s(/^aria-[\-\w]+$/),z=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),F=s(/^(?:\w+script|data):/i),$=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g),G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function H(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var q=function(){return"undefined"==typeof window?null:window},K=function(e,t){if("object"!==(void 0===e?"undefined":G(e))||"function"!=typeof e.createPolicy)return null;var r=null,n="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(n)&&(r=t.currentScript.getAttribute(n));var i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q(),t=function(e){return W(e)};if(t.version="2.0.12",t.removed=[],!e||!e.document||9!==e.document.nodeType)return t.isSupported=!1,t;var r=e.document,n=!1,s=e.document,a=e.DocumentFragment,c=e.HTMLTemplateElement,l=e.Node,_=e.NodeFilter,O=e.NamedNodeMap,J=void 0===O?e.NamedNodeMap||e.MozNamedAttrMap:O,Q=e.Text,X=e.Comment,Y=e.DOMParser,Z=e.trustedTypes;if("function"==typeof c){var ee=s.createElement("template");ee.content&&ee.content.ownerDocument&&(s=ee.content.ownerDocument)}var te=K(Z,r),re=te&&Be?te.createHTML(""):"",ne=s,ie=ne.implementation,oe=ne.createNodeIterator,se=ne.getElementsByTagName,ae=ne.createDocumentFragment,ce=r.importNode,le={};t.isSupported=ie&&void 0!==ie.createHTMLDocument&&9!==s.documentMode;var ue=M,de=I,pe=U,fe=V,me=F,he=$,ge=z,ve=null,be=S({},[].concat(H(E),H(P),H(T),H(A),H(D))),ye=null,ke=S({},[].concat(H(R),H(B),H(N),H(L))),we=null,je=null,xe=!0,_e=!0,Oe=!1,Se=!1,Ce=!1,Ee=!1,Pe=!1,Te=!1,Ae=!1,De=!1,Re=!1,Be=!1,Ne=!0,Le=!0,Me=!1,Ie={},Ue=S({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ve=null,ze=S({},["audio","video","img","source","image","track"]),Fe=null,$e=S({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),Ge=null,He=s.createElement("form"),qe=function(e){Ge&&Ge===e||(e&&"object"===(void 0===e?"undefined":G(e))||(e={}),ve="ALLOWED_TAGS"in e?S({},e.ALLOWED_TAGS):be,ye="ALLOWED_ATTR"in e?S({},e.ALLOWED_ATTR):ke,Fe="ADD_URI_SAFE_ATTR"in e?S(C($e),e.ADD_URI_SAFE_ATTR):$e,Ve="ADD_DATA_URI_TAGS"in e?S(C(ze),e.ADD_DATA_URI_TAGS):ze,we="FORBID_TAGS"in e?S({},e.FORBID_TAGS):{},je="FORBID_ATTR"in e?S({},e.FORBID_ATTR):{},Ie="USE_PROFILES"in e&&e.USE_PROFILES,xe=!1!==e.ALLOW_ARIA_ATTR,_e=!1!==e.ALLOW_DATA_ATTR,Oe=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Se=e.SAFE_FOR_JQUERY||!1,Ce=e.SAFE_FOR_TEMPLATES||!1,Ee=e.WHOLE_DOCUMENT||!1,Ae=e.RETURN_DOM||!1,De=e.RETURN_DOM_FRAGMENT||!1,Re=e.RETURN_DOM_IMPORT||!1,Be=e.RETURN_TRUSTED_TYPE||!1,Te=e.FORCE_BODY||!1,Ne=!1!==e.SANITIZE_DOM,Le=!1!==e.KEEP_CONTENT,Me=e.IN_PLACE||!1,ge=e.ALLOWED_URI_REGEXP||ge,Ce&&(_e=!1),De&&(Ae=!0),Ie&&(ve=S({},[].concat(H(D))),ye=[],!0===Ie.html&&(S(ve,E),S(ye,R)),!0===Ie.svg&&(S(ve,P),S(ye,B),S(ye,L)),!0===Ie.svgFilters&&(S(ve,T),S(ye,B),S(ye,L)),!0===Ie.mathMl&&(S(ve,A),S(ye,N),S(ye,L))),e.ADD_TAGS&&(ve===be&&(ve=C(ve)),S(ve,e.ADD_TAGS)),e.ADD_ATTR&&(ye===ke&&(ye=C(ye)),S(ye,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&S(Fe,e.ADD_URI_SAFE_ATTR),Le&&(ve["#text"]=!0),Ee&&S(ve,["html","head","body"]),ve.table&&(S(ve,["tbody"]),delete we.tbody),o&&o(e),Ge=e)},Ke=function(e){m(t.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=re}},We=function(e,r){try{m(t.removed,{attribute:r.getAttributeNode(e),from:r})}catch(e){m(t.removed,{attribute:null,from:r})}r.removeAttribute(e)},Je=function(e){var t=void 0,r=void 0;if(Te)e="<remove></remove>"+e;else{var i=v(e,/^[\r\n\t ]+/);r=i&&i[0]}var o=te?te.createHTML(e):e;try{t=(new Y).parseFromString(o,"text/html")}catch(e){}if(n&&S(we,["title"]),!t||!t.documentElement){var a=(t=ie.createHTMLDocument("")).body;a.parentNode.removeChild(a.parentNode.firstElementChild),a.outerHTML=o}return e&&r&&t.body.insertBefore(s.createTextNode(r),t.body.childNodes[0]||null),se.call(t,Ee?"html":"body")[0]};t.isSupported&&function(){try{var e=Je("<x/><title>&lt;/title&gt;&lt;img&gt;");w(/<\/title/,e.querySelector("title").innerHTML)&&(n=!0)}catch(e){}}();var Qe=function(e){return oe.call(e.ownerDocument||e,e,_.SHOW_ELEMENT|_.SHOW_COMMENT|_.SHOW_TEXT,(function(){return _.FILTER_ACCEPT}),!1)},Xe=function(e){return!(e instanceof Q||e instanceof X||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof J&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI)},Ye=function(e){return"object"===(void 0===l?"undefined":G(l))?e instanceof l:e&&"object"===(void 0===e?"undefined":G(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Ze=function(e,r,n){le[e]&&u(le[e],(function(e){e.call(t,r,n,Ge)}))},et=function(e){var r=void 0;if(Ze("beforeSanitizeElements",e,null),Xe(e))return Ke(e),!0;var n=g(e.nodeName);if(Ze("uponSanitizeElement",e,{tagName:n,allowedTags:ve}),("svg"===n||"math"===n)&&0!==e.querySelectorAll("p, br").length)return Ke(e),!0;if(!ve[n]||we[n]){if(Le&&!Ue[n]&&"function"==typeof e.insertAdjacentHTML)try{var i=e.innerHTML;e.insertAdjacentHTML("AfterEnd",te?te.createHTML(i):i)}catch(e){}return Ke(e),!0}return"noscript"===n&&w(/<\/noscript/i,e.innerHTML)||"noembed"===n&&w(/<\/noembed/i,e.innerHTML)?(Ke(e),!0):(!Se||e.firstElementChild||e.content&&e.content.firstElementChild||!w(/</g,e.textContent)||(m(t.removed,{element:e.cloneNode()}),e.innerHTML?e.innerHTML=b(e.innerHTML,/</g,"&lt;"):e.innerHTML=b(e.textContent,/</g,"&lt;")),Ce&&3===e.nodeType&&(r=e.textContent,r=b(r,ue," "),r=b(r,de," "),e.textContent!==r&&(m(t.removed,{element:e.cloneNode()}),e.textContent=r)),Ze("afterSanitizeElements",e,null),!1)},tt=function(e,t,r){if(Ne&&("id"===t||"name"===t)&&(r in s||r in He))return!1;if(_e&&w(pe,t));else if(xe&&w(fe,t));else{if(!ye[t]||je[t])return!1;if(Fe[t]);else if(w(ge,b(r,he,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==y(r,"data:")||!Ve[e])if(Oe&&!w(me,b(r,he,"")));else if(r)return!1}return!0},rt=function(e){var r=void 0,n=void 0,o=void 0,s=void 0,a=void 0;Ze("beforeSanitizeAttributes",e,null);var c=e.attributes;if(c){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ye};for(a=c.length;a--;){var u=r=c[a],m=u.name,v=u.namespaceURI;if(n=k(r.value),o=g(m),l.attrName=o,l.attrValue=n,l.keepAttr=!0,l.forceKeepAttr=void 0,Ze("uponSanitizeAttribute",e,l),n=l.attrValue,!l.forceKeepAttr){if("name"===o&&"IMG"===e.nodeName&&c.id)s=c.id,c=h(c,[]),We("id",e),We(m,e),d(c,s)>a&&e.setAttribute("id",s.value);else{if("INPUT"===e.nodeName&&"type"===o&&"file"===n&&l.keepAttr&&(ye[o]||!je[o]))continue;"id"===m&&e.setAttribute(m,""),We(m,e)}if(l.keepAttr)if(Se&&w(/\/>/i,n))We(m,e);else if(w(/svg|math/i,e.namespaceURI)&&w(j("</("+p(i(Ue),"|")+")","i"),n))We(m,e);else{Ce&&(n=b(n,ue," "),n=b(n,de," "));var y=e.nodeName.toLowerCase();if(tt(y,o,n))try{v?e.setAttributeNS(v,m,n):e.setAttribute(m,n),f(t.removed)}catch(e){}}}}Ze("afterSanitizeAttributes",e,null)}},nt=function e(t){var r=void 0,n=Qe(t);for(Ze("beforeSanitizeShadowDOM",t,null);r=n.nextNode();)Ze("uponSanitizeShadowNode",r,null),et(r)||(r.content instanceof a&&e(r.content),rt(r));Ze("afterSanitizeShadowDOM",t,null)};return t.sanitize=function(n,i){var o=void 0,s=void 0,c=void 0,u=void 0,d=void 0;if(n||(n="\x3c!--\x3e"),"string"!=typeof n&&!Ye(n)){if("function"!=typeof n.toString)throw x("toString is not a function");if("string"!=typeof(n=n.toString()))throw x("dirty is not a string, aborting")}if(!t.isSupported){if("object"===G(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof n)return e.toStaticHTML(n);if(Ye(n))return e.toStaticHTML(n.outerHTML)}return n}if(Pe||qe(i),t.removed=[],"string"==typeof n&&(Me=!1),Me);else if(n instanceof l)1===(s=(o=Je("\x3c!--\x3e")).ownerDocument.importNode(n,!0)).nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?o=s:o.appendChild(s);else{if(!Ae&&!Ce&&!Ee&&-1===n.indexOf("<"))return te&&Be?te.createHTML(n):n;if(!(o=Je(n)))return Ae?null:re}o&&Te&&Ke(o.firstChild);for(var p=Qe(Me?n:o);c=p.nextNode();)3===c.nodeType&&c===u||et(c)||(c.content instanceof a&&nt(c.content),rt(c),u=c);if(u=null,Me)return n;if(Ae){if(De)for(d=ae.call(o.ownerDocument);o.firstChild;)d.appendChild(o.firstChild);else d=o;return Re&&(d=ce.call(r,d,!0)),d}var f=Ee?o.outerHTML:o.innerHTML;return Ce&&(f=b(f,ue," "),f=b(f,de," ")),te&&Be?te.createHTML(f):f},t.setConfig=function(e){qe(e),Pe=!0},t.clearConfig=function(){Ge=null,Pe=!1},t.isValidAttribute=function(e,t,r){Ge||qe({});var n=g(e),i=g(t);return tt(n,i,r)},t.addHook=function(e,t){"function"==typeof t&&(le[e]=le[e]||[],m(le[e],t))},t.removeHook=function(e){le[e]&&f(le[e])},t.removeHooks=function(e){le[e]&&(le[e]=[])},t.removeAllHooks=function(){le={}},t}return W()}()},"./node_modules/qs/lib/formats.js":function(e,t,r){"use strict";var n=String.prototype.replace,i=/%20/g,o=r("./node_modules/qs/lib/utils.js"),s={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=o.assign({default:s.RFC3986,formatters:{RFC1738:function(e){return n.call(e,i,"+")},RFC3986:function(e){return String(e)}}},s)},"./node_modules/qs/lib/index.js":function(e,t,r){"use strict";var n=r("./node_modules/qs/lib/stringify.js"),i=r("./node_modules/qs/lib/parse.js"),o=r("./node_modules/qs/lib/formats.js");e.exports={formats:o,parse:i,stringify:n}},"./node_modules/qs/lib/parse.js":function(e,t,r){"use strict";var n=r("./node_modules/qs/lib/utils.js"),i=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},a=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(n),a=s?n.slice(0,s.index):n,c=[];if(a){if(!r.plainObjects&&i.call(Object.prototype,a)&&!r.allowPrototypes)return;c.push(a)}for(var l=0;r.depth>0&&null!==(s=o.exec(n))&&l<r.depth;){if(l+=1,!r.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+n.slice(s.index)+"]"),function(e,t,r){for(var n=t,i=e.length-1;i>=0;--i){var o,s=e[i];if("[]"===s&&r.parseArrays)o=[].concat(n);else{o=r.plainObjects?Object.create(null):{};var a="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,c=parseInt(a,10);r.parseArrays||""!==a?!isNaN(c)&&s!==a&&String(c)===a&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(o=[])[c]=n:o[a]=n:o={0:n}}n=o}return n}(c,t,r)}};e.exports=function(e,t){var r=function(e){if(!e)return o;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?o.charset:e.charset;return{allowDots:void 0===e.allowDots?o.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:o.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:o.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:o.comma,decoder:"function"==typeof e.decoder?e.decoder:o.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:o.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:o.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:o.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:o.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var c="string"==typeof e?function(e,t){var r,a={},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,l=t.parameterLimit===1/0?void 0:t.parameterLimit,u=c.split(t.delimiter,l),d=-1,p=t.charset;if(t.charsetSentinel)for(r=0;r<u.length;++r)0===u[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===u[r]?p="utf-8":"utf8=%26%2310003%3B"===u[r]&&(p="iso-8859-1"),d=r,r=u.length);for(r=0;r<u.length;++r)if(r!==d){var f,m,h=u[r],g=h.indexOf("]="),v=-1===g?h.indexOf("="):g+1;-1===v?(f=t.decoder(h,o.decoder,p,"key"),m=t.strictNullHandling?null:""):(f=t.decoder(h.slice(0,v),o.decoder,p,"key"),m=t.decoder(h.slice(v+1),o.decoder,p,"value")),m&&t.interpretNumericEntities&&"iso-8859-1"===p&&(m=s(m)),m&&t.comma&&m.indexOf(",")>-1&&(m=m.split(",")),i.call(a,f)?a[f]=n.combine(a[f],m):a[f]=m}return a}(e,r):e,l=r.plainObjects?Object.create(null):{},u=Object.keys(c),d=0;d<u.length;++d){var p=u[d],f=a(p,c[p],r);l=n.merge(l,f,r)}return n.compact(l)}},"./node_modules/qs/lib/stringify.js":function(e,t,r){"use strict";var n=r("./node_modules/qs/lib/utils.js"),i=r("./node_modules/qs/lib/formats.js"),o=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},a=Array.isArray,c=Array.prototype.push,l=function(e,t){c.apply(e,a(t)?t:[t])},u=Date.prototype.toISOString,d=i.default,p={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:d,formatter:i.formatters[d],indices:!1,serializeDate:function(e){return u.call(e)},skipNulls:!1,strictNullHandling:!1},f=function e(t,r,i,o,s,c,u,d,f,m,h,g,v){var b,y=t;if("function"==typeof u?y=u(r,y):y instanceof Date?y=m(y):"comma"===i&&a(y)&&(y=y.join(",")),null===y){if(o)return c&&!g?c(r,p.encoder,v,"key"):r;y=""}if("string"==typeof(b=y)||"number"==typeof b||"boolean"==typeof b||"symbol"==typeof b||"bigint"==typeof b||n.isBuffer(y))return c?[h(g?r:c(r,p.encoder,v,"key"))+"="+h(c(y,p.encoder,v,"value"))]:[h(r)+"="+h(String(y))];var k,w=[];if(void 0===y)return w;if(a(u))k=u;else{var j=Object.keys(y);k=d?j.sort(d):j}for(var x=0;x<k.length;++x){var _=k[x];s&&null===y[_]||(a(y)?l(w,e(y[_],"function"==typeof i?i(r,_):r,i,o,s,c,u,d,f,m,h,g,v)):l(w,e(y[_],r+(f?"."+_:"["+_+"]"),i,o,s,c,u,d,f,m,h,g,v)))}return w};e.exports=function(e,t){var r,n=e,c=function(e){if(!e)return p;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=i.default;if(void 0!==e.format){if(!o.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=i.formatters[r],s=p.filter;return("function"==typeof e.filter||a(e.filter))&&(s=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:void 0===e.allowDots?p.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:s,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"==typeof c.filter?n=(0,c.filter)("",n):a(c.filter)&&(r=c.filter);var u,d=[];if("object"!=typeof n||null===n)return"";u=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var m=s[u];r||(r=Object.keys(n)),c.sort&&r.sort(c.sort);for(var h=0;h<r.length;++h){var g=r[h];c.skipNulls&&null===n[g]||l(d,f(n[g],g,m,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.formatter,c.encodeValuesOnly,c.charset))}var v=d.join(c.delimiter),b=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),v.length>0?b+v:""}},"./node_modules/qs/lib/utils.js":function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i=Array.isArray,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],s=o.obj[o.prop],a=Object.keys(s),c=0;c<a.length;++c){var l=a[c],u=s[l];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:s,prop:l}),r.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(i(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r){if(0===e.length)return e;var n=e;if("symbol"==typeof e?n=Symbol.prototype.toString.call(e):"string"!=typeof e&&(n=String(e)),"iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var i="",s=0;s<n.length;++s){var a=n.charCodeAt(s);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?i+=n.charAt(s):a<128?i+=o[a]:a<2048?i+=o[192|a>>6]+o[128|63&a]:a<55296||a>=57344?i+=o[224|a>>12]+o[128|a>>6&63]+o[128|63&a]:(s+=1,a=65536+((1023&a)<<10|1023&n.charCodeAt(s)),i+=o[240|a>>18]+o[128|a>>12&63]+o[128|a>>6&63]+o[128|63&a])}return i},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,r,o){if(!r)return t;if("object"!=typeof r){if(i(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(o&&(o.plainObjects||o.allowPrototypes)||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var a=t;return i(t)&&!i(r)&&(a=s(t,o)),i(t)&&i(r)?(r.forEach((function(r,i){if(n.call(t,i)){var s=t[i];s&&"object"==typeof s&&r&&"object"==typeof r?t[i]=e(s,r,o):t.push(r)}else t[i]=r})),t):Object.keys(r).reduce((function(t,i){var s=r[i];return n.call(t,i)?t[i]=e(t[i],s,o):t[i]=s,t}),a)}}},"./packages/giphy/index.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"getGiphyApi",(function(){return o})),r.d(t,"giphyStickersToTrelloStickers",(function(){return s})),r.d(t,"mapTrelloLocaleToGiphyLocale",(function(){return c}));var n=r("./node_modules/@giphy/js-fetch-api/dist/index.js"),i=r("./node_modules/memoize-one/dist/memoize-one.esm.js"),o=Object(i.a)((function(){return new n.GiphyFetch("DOl4PIGDk4srrYJzMgI0KiTrL2qM2IG4")})),s=function(e,t){return e.map((function(e){var r=e.images.fixed_width_small,n=r.url;t&&e.images.preview.webp&&(n=e.images.preview.webp);var i=e.images.fixed_width_small_still,o=parseInt(r.width,10),s=parseInt(r.height,10);if(o>s){if(s/o<.75)return null}else if(o/s<.75)return null;return{url:r.url,scaled:[{url:n,width:o,height:s}],stillUrl:i.url,stillScaled:[{url:i.url,width:o,height:s}]}})).filter((function(e){return!!e}))},a={"en-AU":"en","en-GB":"en","en-US":"en","pt-BR":"pt","zh-Hans":"zh-CN","zh-Hant":"zh-TW"},c=function(e){return a[e]?a[e]:e}},"./packages/nachos/icons/copy.tsx":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("./node_modules/react/index.js"),i=r.n(n),o=r("./packages/nachos/src/components/Icon/index.ts"),s=function(){return i.a.createElement("svg",{width:"24",height:"24",role:"presentation",focusable:"false",viewBox:"0 0 24 24"},i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 16V4.992C5 3.892 5.902 3 7.009 3H15v2H7v11H5zm3 3a2 2 0 002 2h8a2 2 0 002-2V8a2 2 0 00-2-2h-8a2 2 0 00-2 2v11zm2-11v11h8V8h-8z",fill:"currentColor"}))},a=function(e){var t=e.testId,r=e.dangerous_className,n=e.size,a=e.color,c=e.label,l=e.block;return i.a.createElement(o.a,{testId:t,size:n,dangerous_className:r,color:a,block:l,label:c||"CopyIcon",glyph:s})}},"./resources/images/cc.png":function(e,t,r){e.exports=r.p+"images/cc.d906fe5c1274c56c5571.png"},"./resources/images/collections/business-class-feature-roadmap.png":function(e,t,r){e.exports=r.p+"images/collections/business-class-feature-roadmap.04c368f4479f478b6705.png"},"./resources/images/stickers/check.png":function(e,t,r){e.exports=r.p+"images/stickers/check.90e26477b42f93cf816e.png"},"./resources/images/stickers/check@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/check@2x.5168d92437a5fc166632.png"},"./resources/images/stickers/clock.png":function(e,t,r){e.exports=r.p+"images/stickers/clock.5bd7338f370c3fd7238d.png"},"./resources/images/stickers/clock@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/clock@2x.b678287abafc2d8c99f3.png"},"./resources/images/stickers/frown.png":function(e,t,r){e.exports=r.p+"images/stickers/frown.49afc75f79a5719a3871.png"},"./resources/images/stickers/frown@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/frown@2x.c414ef32894f9c987314.png"},"./resources/images/stickers/heart.png":function(e,t,r){e.exports=r.p+"images/stickers/heart.cc9d955a9ae38ff99b64.png"},"./resources/images/stickers/heart@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/heart@2x.51a19b35bc5092e9e276.png"},"./resources/images/stickers/huh.png":function(e,t,r){e.exports=r.p+"images/stickers/huh.405fd9e6997ac365e4da.png"},"./resources/images/stickers/huh@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/huh@2x.4a513d5705f0f89b365f.png"},"./resources/images/stickers/laugh.png":function(e,t,r){e.exports=r.p+"images/stickers/laugh.31ce444242a6f930b521.png"},"./resources/images/stickers/laugh@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/laugh@2x.6a4570e57d1e3df87014.png"},"./resources/images/stickers/pete-alert.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-alert.90e3c39fb39d5d79e8e2.png"},"./resources/images/stickers/pete-alert@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-alert@2x.3453c1a26ddd1187e564.png"},"./resources/images/stickers/pete-award.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-award.eb0782174fdd08d4c76a.png"},"./resources/images/stickers/pete-award@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-award@2x.43dd35d5e48a876a50fc.png"},"./resources/images/stickers/pete-broken.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-broken.e0c1fadd8cdf3173a4cf.png"},"./resources/images/stickers/pete-broken@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-broken@2x.6d84909328bf960bdfca.png"},"./resources/images/stickers/pete-busy.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-busy.ef0eb59b05378f25bb0c.png"},"./resources/images/stickers/pete-busy@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-busy@2x.35503951628d67da2c8a.png"},"./resources/images/stickers/pete-completed.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-completed.213df9ec14509a7f0628.png"},"./resources/images/stickers/pete-completed@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-completed@2x.3197b9305f52b722df47.png"},"./resources/images/stickers/pete-confused.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-confused.0d52a88328d4c0196564.png"},"./resources/images/stickers/pete-confused@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-confused@2x.7ff61659ad2cd4837aac.png"},"./resources/images/stickers/pete-ghost.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-ghost.fcb349d429bbaaf873ee.png"},"./resources/images/stickers/pete-ghost@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-ghost@2x.4a28ad313694864c5a66.png"},"./resources/images/stickers/pete-happy.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-happy.ad61d60483a6bdbea532.png"},"./resources/images/stickers/pete-happy@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-happy@2x.0663bc183a0cf0d03949.png"},"./resources/images/stickers/pete-love.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-love.e226d3edc2bc1c9439bc.png"},"./resources/images/stickers/pete-love@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-love@2x.6e461f2c1917d10063fb.png"},"./resources/images/stickers/pete-music.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-music.49ddddf5af19ae49ccc9.png"},"./resources/images/stickers/pete-music@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-music@2x.df6a7a7b952e8826916f.png"},"./resources/images/stickers/pete-shipped.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-shipped.13b817ebec2282c5a7ab.png"},"./resources/images/stickers/pete-shipped@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-shipped@2x.0d9ff936d513aae5a67c.png"},"./resources/images/stickers/pete-sketch.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-sketch.6e17baf06870f4bd1c30.png"},"./resources/images/stickers/pete-sketch@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-sketch@2x.3808b148cca5b1ed3da0.png"},"./resources/images/stickers/pete-space.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-space.ee70c40e8a7906f3adf2.png"},"./resources/images/stickers/pete-space@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-space@2x.aa9cb8354739fb355a4a.png"},"./resources/images/stickers/pete-talk.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-talk.ca098514ef3b83d1e5a7.png"},"./resources/images/stickers/pete-talk@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-talk@2x.217a5d2b04a6dea23726.png"},"./resources/images/stickers/pete-vacation.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-vacation.c50c5371bb78862a587a.png"},"./resources/images/stickers/pete-vacation@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/pete-vacation@2x.060295310e437200bf33.png"},"./resources/images/stickers/rocketship.png":function(e,t,r){e.exports=r.p+"images/stickers/rocketship.484099c2f7dfcfe5fef9.png"},"./resources/images/stickers/rocketship@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/rocketship@2x.5bd888e40e6e27bd733d.png"},"./resources/images/stickers/smile.png":function(e,t,r){e.exports=r.p+"images/stickers/smile.90a8856b7465d57b1ac3.png"},"./resources/images/stickers/smile@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/smile@2x.fa6754c4dd9625bdce76.png"},"./resources/images/stickers/star.png":function(e,t,r){e.exports=r.p+"images/stickers/star.4c68ea50e4ffeeb97df5.png"},"./resources/images/stickers/star@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/star@2x.27460fa90f9753396db3.png"},"./resources/images/stickers/taco-active.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-active.e027fa08f49b43a503a1.png"},"./resources/images/stickers/taco-active@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-active@2x.afe6f31288619ede4f82.png"},"./resources/images/stickers/taco-alert.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-alert.ccbcd6ce73f50359e71a.png"},"./resources/images/stickers/taco-alert@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-alert@2x.60cf2c2b89c387f8c1ed.png"},"./resources/images/stickers/taco-angry.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-angry.0787bf33623b40f2263d.png"},"./resources/images/stickers/taco-angry@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-angry@2x.88141aecd4c8fbdc3ff1.png"},"./resources/images/stickers/taco-celebrate.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-celebrate.20b0c2f6c78ca34d7c3d.png"},"./resources/images/stickers/taco-celebrate@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-celebrate@2x.905a89b9fb1f86774713.png"},"./resources/images/stickers/taco-clean.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-clean.e6462e51e766dbf494e3.png"},"./resources/images/stickers/taco-clean@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-clean@2x.7c593a77fe481b61a2ca.png"},"./resources/images/stickers/taco-confused.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-confused.511723ee0c932684ca39.png"},"./resources/images/stickers/taco-confused@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-confused@2x.06668f130b632bf4ba0d.png"},"./resources/images/stickers/taco-cool.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-cool.f41573409925dd066cb5.png"},"./resources/images/stickers/taco-cool@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-cool@2x.8f4ac7820629d5aac2e2.png"},"./resources/images/stickers/taco-embarrassed.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-embarrassed.b84cc7c1ff4c870a78af.png"},"./resources/images/stickers/taco-embarrassed@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-embarrassed@2x.02663f87e33a2c798280.png"},"./resources/images/stickers/taco-love.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-love.c17c5bf93797d71527ee.png"},"./resources/images/stickers/taco-love@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-love@2x.06ddf78e10598774b89e.png"},"./resources/images/stickers/taco-money.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-money.60cee75a249b57889293.png"},"./resources/images/stickers/taco-money@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-money@2x.f0130dd81ed48f6e4626.png"},"./resources/images/stickers/taco-pixel.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-pixel.9044b8e8153407d9c351.png"},"./resources/images/stickers/taco-pixel@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-pixel@2x.3751a48869a42911093b.png"},"./resources/images/stickers/taco-proto.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-proto.2e050937d34005636192.png"},"./resources/images/stickers/taco-proto@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-proto@2x.51def85cdcf3c1a58cb1.png"},"./resources/images/stickers/taco-reading.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-reading.d38e25e615cbc0d15bea.png"},"./resources/images/stickers/taco-reading@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-reading@2x.0c3110a4622a680fd4a9.png"},"./resources/images/stickers/taco-robot.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-robot.c695266748c83f796b9a.png"},"./resources/images/stickers/taco-robot@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-robot@2x.e1ac5a98088053a8b1ae.png"},"./resources/images/stickers/taco-sleeping.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-sleeping.42698e61c8b85ce46dd0.png"},"./resources/images/stickers/taco-sleeping@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-sleeping@2x.9a51d634e8521dc0e19c.png"},"./resources/images/stickers/taco-trophy.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-trophy.77785938bb3566b20d1e.png"},"./resources/images/stickers/taco-trophy@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/taco-trophy@2x.9143546ce5c8a3e43736.png"},"./resources/images/stickers/thumbsdown.png":function(e,t,r){e.exports=r.p+"images/stickers/thumbsdown.8accff79fb0229cb8940.png"},"./resources/images/stickers/thumbsdown@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/thumbsdown@2x.79d155c5163ee1a67509.png"},"./resources/images/stickers/thumbsup.png":function(e,t,r){e.exports=r.p+"images/stickers/thumbsup.ebab8d33a9e50bfb9272.png"},"./resources/images/stickers/thumbsup@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/thumbsup@2x.6f6cea3566b6fbbc0067.png"},"./resources/images/stickers/warning.png":function(e,t,r){e.exports=r.p+"images/stickers/warning.f8832dabce0aabd9a3b5.png"},"./resources/images/stickers/warning@2x.png":function(e,t,r){e.exports=r.p+"images/stickers/warning@2x.e0197b2fb0cbd4a389d4.png"},"./resources/images/template-create-popover-icon.svg":function(e,t,r){e.exports=r.p+"images/template-create-popover-icon.345574dca58c7c6ceda0.svg"}}]);
//# sourceMappingURL=board-sidebar-view.bb875ada4035bc6a808a.js.map