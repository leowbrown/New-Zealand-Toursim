(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"./app/scripts/controller/boardPage.js":function(e,t,r){function n(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=r("./node_modules/react/index.js"),i=r("./packages/use-lazy-component/index.ts").importWithRetry,s=r("./node_modules/bluebird/js/browser/bluebird.js"),c=r("./app/scripts/lib/recents.js"),l=r("./packages/jquery/index.js"),u=r("./node_modules/moment/moment.js"),d=r("./node_modules/effing/lib/index.js"),f=r("./app/scripts/network/api-error.js"),p=r("./app/scripts/db/auth.js"),m=r("./app/scripts/views/onboarding/constants.js").verticals,h=r("./packages/feature-flag-client/index.ts").featureFlagClient,g=r("./app/scripts/controller/navigate.js").navigate,b=r("./app/src/getSpinner.ts").getSpinner,v=r("./app/scripts/controller/currentModelManager.ts").currentModelManager,y=r("./app/src/components/CardDetailLoading/index.ts").CardDetailLoading,w=r("./app/src/components/CardDetailLoadingError/index.ts").CardDetailLoadingError,j=r("./packages/error-reporting/index.ts").sendErrorEvent,C=r("./app/scripts/debug/constants.ts").Feature,k=function(e){var t=parseInt(e,10);return isNaN(t)?void 0:t};e.exports={boardReferralPage(e,t,r){return this.boardPage(e,"",r)},boardPage(e,t,r){null==t&&(t="");var a=n(Array.from(t.split("?")[0].split("/"))),o=a[1],i=a.slice(2),s={idBoard:e,referrerUsername:r};if("calendar"===o){var c=u().startOf("day");c.year(k(i[0])),c.month(function(e,t){return null!=t?e(t):void 0}(d.sub(1),k(i[1]))),c.date(k(i[2])),c.isValid()&&(s.calendarDate=c.toDate())}if("map"===o&&null!=i[0]&&null!=i[1]){var l=parseFloat(i[0]),f=parseFloat(i[1]),p=parseInt(i[2],10);l&&f&&(s.mapCenterTo={lat:l,lng:f}),p&&(s.zoom=p)}return"member"===o&&null!=i[0]&&(s.usernameBoardProfile=i[0]),"power-ups"===o&&null!=i[0]&&(s.directorySection=i[0],null!=i[1]&&(s.directoryCategory=i[1])),"power-up"===o&&null!=i[0]&&(s.directoryIdPowerUp=i[0],null!=i[1]&&"enable"===i[1]&&(s.directoryIsEnabling=!0)),["calendar","member","power-up","power-ups","map","butler","timeline","calendar-view","dashboard"].includes(o)&&(s.section=o),this.displayBoard(s).done()},oldBoardPage(e){var t={},r=e.split("/");return 1===r.length?t.idBoard=r[0]:t.idBoard=r[1],3===r.length?t.section=r[2]:4===r.length&&(t.usernameBoardProfile=r[3]),this.displayBoard(t).done()},cardPage(e,t){var r=location.hash.length>1?location.hash.substr(1):null,n=this.getQueryParamByKey("replyToComment");return this.displayBoard({idCard:e,highlight:r,replyToComment:n}).done()},oldCardPage(e,t,n){var a=this;return(/^\d+$/.test(n)?r("./app/scripts/db/model-loader.js").for("top-level","loadCardId",t,n).catch(f,(function(){return null})):s.resolve(n)).then((function(e){return a.displayBoard({idBoard:t,idCard:e}).done()}))},showCardDetail(e,t){var n=this;null==t&&(t={});var a=t,s=a.highlight,l=a.runMethod,u=a.isNavigating,d=a.replyToComment,f=a.onHide;if(null!=e){if(v.onBoardView((p=e.getBoard(),m=function(e){return e.id},null!=p?m(p):void 0))&&e.modelCache===this.getCurrentModelCache()){var p,m,b=e.getBoard();return i((function(){return r.e(40).then(r.t.bind(null,"./app/scripts/views/board/board-view.js",7))})).then((function(t){var a,p=t.default,m=!1,v=e.getBoard()&&n.applicationView.existingSubviewOrUndefined(p,e.getBoard()),k=n.showingCalendar(v),x=n.showingMap(v),S=r("./app/scripts/views/lib/dialog.js"),_="";if(k&&(_="calendar"),x){_="map",v.mapReturnCard=null;var O=v.mapView;O.mapCenterTo&&O.zoom&&(a=[O.mapCenterTo.lat,O.mapCenterTo.lng,O.zoom])}return n.showingTimeline()&&(_="timeline"),n.showingAdvancedCalendar()&&(_="calendar-view"),S.show({reactElement:o.createElement(y,null),hide:function(){m=!0,f&&f()}}),i((function(){return r.e(46).then(r.t.bind(null,"./app/scripts/views/card/card-detail-view.js",7))})).then((function(t){var o=t.default;if(!m){var i=new o({modelCache:n.getCurrentModelCache(),model:e});S.show({view:i,hide:function(e){r("./app/scripts/views/internal/attachment-viewer.js").clear(),e||(n.setBoardLocation(b.id,_,a),n.title(b.get("name")));var t="onBoardView"===h.get("ecosystem.auto-enable-calendar-popover","none");if(b.shouldRenderAutoEnableCalendarPopover()&&t)return v.renderAutoEnableCalendarPopover();f&&f()},isNavigating:u}),n.waitForId(e,(function(){return g(n.getCardUrl(e,s,d),{replace:n.onCardView(),trigger:!1}),c.add("card",e.id)})),null!=l&&i[l](),null!=s&&i.highlight(s,!0),null!=d&&i.replyToComment(d)}})).catch((function(e){S.show({reactElement:o.createElement(w,null),hide:function(){f&&f()}}),j(e,{tags:{ownershipArea:"trello-nusku",feature:C.CardDetailDialog}})}))}))}g(this.getCardUrl(e,s,d),{trigger:!0})}},createFirstBoardPage(){var e=this;return s.using(b(),(function(){return r("./app/scripts/db/model-loader.js").await("boardsData").then((function(){var t=p.me();if(!t.isLoggedIn())return window.location="/login";if(h.get("activation.onboarding_v2",!1)){var n=new URLSearchParams(window.location.search).get("selectedVertical");if(!m[n]&&"default"!==n)return g("welcome",{trigger:!0})}else{if(t.boardList.length>0||t.isDismissed("create-first-board"))return g("/",{trigger:!0})}e.clearPreviousView(),e.setViewType("create-first-board"),e.title("Create Your Board");var a=r("./app/scripts/views/onboarding/create-first-board-view.js"),o=e.topLevelView(a,t);return l('[data-js-id="header-container"]').hide(),l("#content").html(o.render().el)}))})).done()},onboardingPage(){var e=this;return s.using(b(),(function(){return r("./app/scripts/db/model-loader.js").await("boardsData").then((function(){var t=p.me();if(!t.isLoggedIn())return window.location="/login";if(!h.get("activation.onboarding_v2",!1))return g("/",{trigger:!0});e.clearPreviousView(),e.setViewType("onboarding-welcome"),e.title("Welcome To Trello");var n=r("./app/scripts/views/onboarding/welcome-view.js"),a=e.topLevelView(n,t);return l('[data-js-id="header-container"]').hide(),l("#content").html(a.render().el)}))})).done()}}},"./app/scripts/lib/recents.js":function(e,t,r){function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r("./packages/storage/index.ts").TrelloStorage,s=r("./node_modules/underscore/underscore.js"),c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"_getKey",value:function(e){return"recent_".concat(e)}},{key:"add",value:function(e,t){var r=this.get(e),a=s.chain([t].concat(n(Array.from(r)))).uniq().first(10).value();return i.set(this._getKey(e),a)}},{key:"get",value:function(e,t){var r;return null==t&&(t=10),s.chain(null!=(r=i.get(this._getKey(e)))?r:[]).compact().first(t).value()}}])&&o(t.prototype,r),a&&o(t,a),e}();e.exports=new c},"./app/scripts/views/onboarding/create-first-board-view.js":function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=r("./app/scripts/views/lib/alerts.js"),h=r("./app/scripts/db/auth.js"),g=r("./app/scripts/controller/index.js"),b=r("./app/scripts/views/internal/view.js"),v=r("./node_modules/underscore/underscore.js"),y=r("./app/scripts/views/internal/teacup-with-helpers.js")("onboarding"),w=r("./node_modules/react/index.js"),j=r("./packages/react-dom-wrapper/index.ts"),C=r("./app/scripts/views/onboarding/create-first-board.js"),k=r("./app/src/components/ErrorBoundary/index.ts").ErrorBoundary,x=r("./app/scripts/debug/constants.ts").Feature,S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(b,e);var t,r,n,o,s=(t=b,function(){var e,r=p(t);if(f()){var n=p(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return d(this,e)});function b(){return c(this,b),s.apply(this,arguments)}return r=b,o=[{key:"initClass",value:function(){this.prototype.tagName="div",this.prototype.className="first-board-wrapper"}}],(n=[{key:"render",value:function(){var e=this;return this.$el.html(y.renderable((function(){return y.div(".first-board-wrapper.js-create-first-board")}))),j.render(w.createElement(k,{tags:{ownershipArea:"trello-bizteam",feature:x.Madlibs}},w.createElement(C,{onSubmit:function(t){return e.createBoard(t)}})),this.$(".js-create-first-board")[0]),this}},{key:"createCollection",value:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];var s=Array.from(n.slice(0,n.length-0)),c=i(s,1),l=c[0];return e.filter((function(e){return""!==e.name})).map((function(e,r){var n=e.name;return t.create(a({name:n,pos:r+1,creationMethod:"assisted"},l))}))}},{key:"createBoard",value:function(e){var t=this,r={name:e.name},n=v.extend({prefs_permissionLevel:"private",prefs_selfJoin:!0,prefs_background:"lime",creationMethod:"assisted",defaultLists:!1},r),a=h.me().boardList.create(r,{requestData:n,success:function(e){var t,r;if(r=e.id,!Array.from(t=h.me().get("idBoards")).includes(r))return h.me().set("idBoards",t.concat(e.id))},error:function(){return m.flash("could not create board","error","create error")}});return this.listenTo(this.model.boardList,"sync",(function(){var r=t.createCollection(e.lists,a.listList);return t.listenTo(r[0],"sync",(function(){var n=t.createCollection(e.lists[0].cards,r[0].cardList),o=e.checkItem;return v.isEmpty(o)?t.navigateToNewBoard(a):t.listenTo(n[0],"sync",(function(){var e=t.createCollection(["Checklist"],n[0].checklistList,{idCard:n[0].id})[0];return t.listenTo(e,"sync",(function(){var r=t.createCollection([{name:o}],e.checkItemList)[0];return t.listenTo(r,"sync",(function(){return t.navigateToNewBoard(a)}))}))}))}))}))}},{key:"navigateToNewBoard",value:function(e){return h.me().dismiss("create-first-board"),g.displayBoard({idBoard:e.id,openListComposer:!1,openCardComposerInFirstList:!0}).done()}}])&&l(r.prototype,n),o&&l(r,o),b}(b);S.initClass(),e.exports=S},"./app/scripts/views/onboarding/create-first-board.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=r("./packages/browser/index.ts"),f=r("./node_modules/react/index.js"),p=r("./app/scripts/views/internal/recup-with-helpers.js")("onboarding"),m=r("./app/scripts/lib/localize.js"),h=r("./packages/analytics/index.ts").trackUe,g=r("./packages/feature-flag-client/index.ts").featureFlagClient,b=r("./app/scripts/views/onboarding/constants.js"),v=b.BOARD_NAME,y=b.LIST_NAME,w=b.CARD_NAME,j=b.CHECKITEM_NAME,C=b.CARD_DRAG,k=b.getInitialData,x=b.translatedCardDragFileMap,S=b.translatedCardBackFileMap,_=r("./app/scripts/views/onboarding/helpers.js").getTranslatedFile,O=r("./packages/test-ids/index.ts").CreateFirstBoardIds,L=r("./packages/locale/index.ts"),E=r("./node_modules/uuid/v4.js"),P=d.isIE()||d.isEdge(),D=E(),B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,e);var t,r=(t=a,function(){var e,r=u(t);if(l()){var n=u(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function a(e){var t;n(this,a),(t=r.apply(this,arguments)).steps=[v,y,w,j,C];var o=new URLSearchParams(window.location.search),i=o.get("selectedVertical");return i||(i="default"),t.state={currentStep:v,board:k(i),saving:!1,hasStarted:!1,selectedVertical:i},t.handleClickBack=t.handleClickBack.bind(c(t)),t}return o(a,null,[{key:"initClass",value:function(){this.prototype.render=p.renderable((function(){var e=this,t=this.state,r=t.currentStep,n=t.hasStarted;return p.div(".first-board-container",(function(){return g.get("activation.onboarding_v2",!1)&&!n&&p.button(".button.first-board-back-button",{onClick:function(){return e.handleClickBack()}},(function(){return p.format("go-back")})),p.div(".first-board-column.first-board-image.board-name-background",{role:"presentation","aria-hidden":!0},(function(){return p.div(".first-board-image-wrapper",(function(){return p.div(".first-board-image-base",{className:p.classify({"first-board-image-base--mod-card-drag":r===C,"first-board-image-base--mod-ie":r===j&&P})},(function(){return e.renderPreview()}))}))})),p.div(".first-board-column.first-board-content-wrapper",(function(){return p.div(".first-board-content",(function(){return p.nav(".first-board-navigation",(function(){return p.a(".skip-nav",{href:"#".concat(D),ref:function(t){return e.skipRef=t}},(function(){return p.format("skip-nav")})),e.steps.map((function(t,n){return p.createElement("button",{key:"nav".concat(n),className:p.classify({"current-step":t===r}),onClick:function(){return e.goToStep(t,"by clicking navigation dot")},"aria-label":p.l("go-to-step:".concat(t))})}))})),p.div(".first-board-text-wrapper",{"aria-live":"polite"},(function(){return p.div(".first-board-text",{id:D},(function(){return e.renderStepChildren(),e.renderFooter()}))}))}))}))}))}))}}]),o(a,[{key:"skipToContent",value:function(){return null!=this.skipRef?this.skipRef.click():void 0}},{key:"validate",value:function(){var e=this.state,t=e.currentStep,r=e.board,n=e.selectedVertical,a=k(n);return t===v?""!==r.name:t===y?r.lists.filter((function(e){return""!==e.name})).length===a.lists.length:t!==w||""!==r.lists[0].cards[0].name}},{key:"continue",value:function(){return this.isLastStep()?this.submit():this.goToStep(this.steps[this.steps.indexOf(this.state.currentStep)+1],"by clicking on continue footer")}},{key:"submit",value:function(e){var t,r=this;null==e&&(e=!1);var n=k(this.state.selectedVertical);if(!this.state.saving){var a=this.state.board;for(""===a.name.trim()&&(a.name=n.defaultValue),t=0;t<a.lists.length;t++){var o=a.lists[t];""===o.name.trim()&&(o.name=n.lists[t].name)}for(t=0;t<a.lists[0].cards.length;t++){var i=a.lists[0].cards[t];""===i.name.trim()&&(i.name=n.lists[0].cards[t].defaultValue||"")}return""===a.checkItem.trim()&&(a.checkItem=""),h("create first board view","creates","board","","",e?"by clicking skip":"by clicking on the submit footer",{currentStep:this.state.currentStep,stepCompleted:this.validate(),vertical:this.state.selectedVertical}),this.setState({saving:!0},(function(){return r.props.onSubmit(a)}))}}},{key:"isLastStep",value:function(){return this.steps.indexOf(this.state.currentStep)===this.steps.length-1}},{key:"goToStep",value:function(e,t){h("create first board view","navigates","","","to new step",t,{currentStep:this.state.currentStep,nextStep:e,stepCompleted:this.validate(),vertical:this.state.selectedVertical});var r=this.state,n=k(this.state.selectedVertical);return e!==v&&e!==y?(r.board.lists[1].cards=[],r.board.lists[2].cards=[]):(r.board.lists[1].cards=n.lists[1].cards,r.board.lists[2].cards=n.lists[2].cards),r.currentStep=e,r.hasStarted=!0,this.setState(r),this.skipToContent()}},{key:"handleClickBack",value:function(){return window.history.back()}},{key:"updateBoard",value:function(e){return this.setState({board:Object.assign(this.state.board,{name:e})})}},{key:"updateList",value:function(e,t){var r=this,n=this.state;return this.setState((function(){return n.board.lists[e]={name:t,cards:r.state.board.lists[e].cards},n}))}},{key:"updateCard",value:function(e,t){var r=this.state;return this.setState((function(){return r.board.lists[0].cards[e]={name:t},r}))}},{key:"updateCheckItem",value:function(e){var t=this.state;return this.setState((function(){return t.board.checkItem=e,t}))}},{key:"handleClickFooter",value:function(e){if(0!==e.detail)return this.continue()}},{key:"handleKeyPressSubmit",value:function(e){if(this.validate()&&"Enter"===e.key)return this.continue()}},{key:"handleListKeyPress",value:function(e,t){if(this.validate()&&"Enter"===e.key)return[0,1].includes(t)?this["listInputRef".concat(t+1)].select():this.continue()}},{key:"renderStepChildren",value:function(){var e=this,t=this.state,r=t.currentStep,n=t.board,a=t.selectedVertical;return r===v?p.section(".".concat(v),(function(){return p.h1((function(){return p.format("".concat(v,":").concat(a,":title"))})),p.p((function(){return p.format("".concat(v,":").concat(a,":description")),p.span(".show-point-right",{role:"presentation","aria-hidden":!0},(function(){return p.format("that-thing-over-there")})),p.span(".show-point-up",{role:"presentation","aria-hidden":!0},(function(){return p.format("that-thing-up-there")}))})),p.p((function(){return p.format("".concat(v,":").concat(a,":instructions"))})),p.input({type:"text",placeholder:p.l("".concat(v,":").concat(a,":placeholder:0")),maxLength:"32",value:n.name,onChange:function(t){return e.updateBoard(t.target.value)},onKeyPress:function(t){return e.handleKeyPressSubmit(t)},"data-test-id":O.BoardNameInput,ref:function(t){return e.ref0=t},"aria-label":p.l("board-name")})})):r===y?p.section(".".concat(y),(function(){return p.h1((function(){return p.format("".concat(y,":").concat(a,":title"))})),p.p((function(){return p.format("".concat(y,":").concat(a,":description"))})),p.p((function(){return p.format("".concat(y,":").concat(a,":instructions"))})),p.input({type:"text",value:n.lists[0].name,maxLength:"16",onChange:function(t){return e.updateList(0,t.target.value)},onKeyPress:function(t){return e.handleListKeyPress(t,0)},"data-test-id":O.ListNameInput,ref:function(t){return e.listInputRef0=t},"aria-label":p.l("list-name",{list_number:1})}),p.input({type:"text",value:n.lists[1].name,maxLength:"16",onChange:function(t){return e.updateList(1,t.target.value)},onKeyPress:function(t){return e.handleListKeyPress(t,1)},ref:function(t){return e.listInputRef1=t},"aria-label":p.l("list-name",{list_number:2})}),p.div(".third-input",(function(){return p.span((function(){return p.format("and")})),p.input({type:"text",maxLength:"16",value:n.lists[2].name,onChange:function(t){return e.updateList(2,t.target.value)},onKeyPress:function(t){return e.handleListKeyPress(t,2)},ref:function(t){return e.listInputRef2=t},"aria-label":p.l("list-name",{list_number:3})})})),p.p(".post-input",(function(){return p.format("go-ahead-and-rename-your-lists-if-youd-like-a11y")}))})):r===w?p.section(".".concat(w),(function(){return p.h1((function(){return p.format("".concat(w,":").concat(a,":title"))})),p.p((function(){return p.format("".concat(w,":").concat(a,":description"))})),p.p((function(){return p.span({dangerouslySetInnerHTML:{__html:p.l("".concat(w,":").concat(a,":instructions"),{listName:n.lists[0].name})}})})),p.input({type:"text",placeholder:p.l("".concat(w,":").concat(a,":placeholder:0")),maxLength:"32",value:n.lists[0].cards[0].name,onChange:function(t){return e.updateCard(0,t.target.value)},onKeyPress:function(t){return e.handleKeyPressSubmit(t)},"data-test-id":O.CardNameInput,ref:function(t){return e.ref0=t},"aria-label":p.l("card-name",{card_number:1})}),p.input({type:"text",placeholder:p.l("".concat(w,":").concat(a,":placeholder:1")),maxLength:"32",value:n.lists[0].cards[1].name,onChange:function(t){return e.updateCard(1,t.target.value)},onKeyPress:function(t){return e.handleKeyPressSubmit(t)},"aria-label":p.l("card-name",{card_number:2})}),p.div(".third-input",(function(){return p.span((function(){return p.format("and")})),p.input({type:"text",placeholder:p.l("".concat(w,":").concat(a,":placeholder:2")),maxLength:"32",value:n.lists[0].cards[2].name,onChange:function(t){return e.updateCard(2,t.target.value)},onKeyPress:function(t){return e.handleKeyPressSubmit(t)},"aria-label":p.l("card-name",{card_number:3})})}))})):r===j?p.section(".".concat(j),(function(){return p.h1((function(){return p.format("".concat(j,":").concat(a,":title"))})),p.p((function(){return p.format("".concat(j,":").concat(a,":description"))})),p.p({dangerouslySetInnerHTML:{__html:p.l("".concat(j,":").concat(a,":instructions"),{cardName:n.lists[0].cards[0].name})}}),p.div(".checklist-item",(function(){return p.div(".checklist-box"),p.input({type:"text",placeholder:p.l("".concat(j,":").concat(a,":placeholder:0")),maxLength:"28",value:n.checkItem,onChange:function(t){return e.updateCheckItem(t.target.value)},onKeyPress:function(t){return e.handleKeyPressSubmit(t)},"data-test-id":O.ChecklistInput,ref:function(t){return e.ref0=t},"aria-label":p.l("checklist-name")})}))})):r===C?p.section(".".concat(C),(function(){return p.h1((function(){return p.format("".concat(C,":default:title"))})),p.p((function(){return p.format("".concat(C,":default:description"))}))})):void 0}},{key:"renderPreview",value:function(){var e=this.state,t=e.currentStep,r=e.board,n=e.hasStarted,a=r.lists[0].cards[0];return t===C?(p.img({src:_(x,L.currentLocale)}),p.div((function(){return p.h2((function(){return p.format("one-last-tip")})),p.p((function(){return p.format("get-those-cards-moving")}))}))):(p.div(".board-name-display",(function(){return p.p({className:p.classify({"is-active":!!r.name}),"data-test-id":O.BoardNameDisplay},(function(){return p.text(r.name)}))})),p.div(".first-board-image-list-container",(function(){return function(){var e=[],t=function(t){var a=r.lists[t];e.push(p.div(".first-board-image-list.list-name-display",{className:p.classify({"first-board-image-list-empty":0===a.cards.length})},(function(){return p.p({className:p.classify({"is-active":n&&""!==a.name}),"data-test-id":"0"===t?O.ListNameDisplay:void 0},(function(){if(n)return p.text(a.name)})),function(){var e=[],r=function(r){var n=a.cards[r];e.push(p.div(".first-board-image-card.card-name-display",{className:p.classify({large:!!n.large})},(function(){return p.p({className:p.classify({"is-active":!!n.name}),"data-test-id":"0"===t&&"0"===r?O.CardNameDisplay:void 0},(function(){return p.text(n.name)}))})))};for(var n in a.cards)r(n);return e}()})))};for(var a in r.lists)t(a);return e}()})),t===j?p.div(".first-board-card-back",(function(){return p.img({src:_(S,L.currentLocale),className:"check-name-image"}),p.div(".check-name-display",(function(){return p.p((function(){return p.text(a.name||m("untitled card"))})),r.checkItem?p.p({"data-test-id":O.ChecklistDisplay},(function(){return p.text(r.checkItem)})):p.p(".check-name-placeholder",(function(){return p.format("add-an-item")}))}))})):void 0)}},{key:"renderFooter",value:function(){var e=this,t=this.state,r=t.currentStep,n=t.saving;return p.button({key:"next-button:".concat(r),className:p.classify({"first-board-continue-footer":!0,"is-active":this.validate()&&!n,"submit-footer":this.isLastStep(),disabled:!this.validate()||n}),onClick:function(t){return e.handleClickFooter(t)},onKeyDown:function(t){return e.handleKeyPressSubmit(t)},"data-test-id":O.ContinueButton,disabled:!this.validate()||n,ref:function(t){return e.footer=t},"aria-label":this.isLastStep()?p.l("go-to-my-board"):p.l("next-step")},(function(){return e.isLastStep()?p.format("now-youre-a-pro-keep-building-your-board"):p.icon("down",{role:"presentation","aria-hidden":!0})}))}}]),a}(f.Component);B.initClass(),e.exports=B},"./app/scripts/views/onboarding/welcome-view.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r("./app/scripts/views/internal/view.js"),u=r("./app/scripts/views/internal/teacup-with-helpers.js")("onboarding"),d=r("./node_modules/react/index.js"),f=r("./packages/react-dom-wrapper/index.ts"),p=r("./app/scripts/views/onboarding/welcome.js"),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(g,e);var t,r,l,m,h=(t=g,function(){var e,r=c(t);if(s()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return i(this,e)});function g(){return n(this,g),h.apply(this,arguments)}return r=g,m=[{key:"initClass",value:function(){this.prototype.tagName="div",this.prototype.className="welcome-wrapper"}}],(l=[{key:"render",value:function(){return this.$el.html(u.renderable((function(){return u.div(".js-welcome")}))),f.render(d.createElement(p,null),this.$(".js-welcome")[0]),this}}])&&a(r.prototype,l),m&&a(r,m),g}(l);m.initClass(),e.exports=m},"./app/scripts/views/onboarding/welcome.js":function(e,t,r){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=r("./node_modules/underscore/underscore.js"),p=r("./app/scripts/models/board.js"),m=r("./app/scripts/controller/index.js"),h=r("./node_modules/react/index.js"),g=r("./app/scripts/db/auth.js"),b=r("./packages/error-reporting/index.ts").sendErrorEvent,v=r("./app/scripts/views/internal/recup-with-helpers.js")("onboarding"),y=r("./packages/analytics/index.ts").trackUe,w=r("./app/scripts/views/onboarding/constants.js").verticals,j=r("./app/scripts/views/onboarding/helpers.js"),C=j.copyBoardFromVertical,k=j.getLocale,x=j.getBoardDataForVertical,S=r("./app/scripts/controller/navigate.js").navigate,_=r("./packages/nachos/icons/down.tsx").DownIcon,O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(i,e);var t,a=(t=i,function(){var e,r=d(t);if(u()){var n=d(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return l(this,e)});function i(){var e;o(this,i),e=a.apply(this,arguments);var t=Object.keys(w).map((function(e){return Object.assign(w[e],{key:e})})),r=Array.from(f.partition(t,(function(e){return!isNaN(e.sortId)}))),s=n(r,2),c=s[0],l=s[1];return e.verticals=c.sort((function(e,t){return e.sortId-t.sortId})).concat(f.shuffle(l)),e.locale=k(),e.state={selectedVertical:null,saving:!1},e}return s(i,null,[{key:"initClass",value:function(){this.prototype.render=v.renderable((function(){var e=this,t=this.state,n=t.selectedVertical,a=t.saving,o=g.me().attributes.fullName;return v.div(".welcome",(function(){if(v.div(".welcome--logo",(function(){return v.img({src:r("./resources/images/trello-logo-gray.svg")})})),v.div(".welcome--intro",(function(){return v.h1((function(){return v.format("welcome")})),v.h1((function(){return v.format("what-brings-you-to-trello")})),v.p((function(){return v.format("let-us-know-personalize")}))})),v.div(".welcome--card",(function(){return v.div(".welcome--card-text-small",(function(){return v.format("hello-my-name-is")})),v.h1((function(){return v.text(o)})),v.div(".welcome--card-text-small",(function(){return v.format("and-i-am-interested-in-trello-for")})),v.div(".welcome--select",(function(){return v.addElement(h.createElement(_,{block:!0})),v.select({class:v.classify({"welcome--select-placeholder":null===n}),onChange:function(t){return e.handleChangeSelect(t)}},(function(){return v.option(".welcome--select-option.welcome--select-option--default",{value:"choose-something"},(function(){return v.text(v.l("choose-something"))})),function(){for(var t=[],r=function(){var e=a[n].key;t.push(v.option(".welcome--select-option",{value:e},(function(){return v.text(v.l(e))})))},n=0,a=Array.from(e.verticals);n<a.length;n++)r();return t}()}))}))})),null!==n)return v.div(".welcome--cta-container",(function(){})),w[n].inspirationBoards[e.locale]&&"other"!==n?(v.button(".welcome--cta-container--button.welcome--cta-container--button-blue",{onClick:function(t){return e.handleDiveIn(t)},disabled:a,class:v.classify({disabled:a})},(function(){return v.format("dive-right-in")})),v.button(".welcome--cta-container--button",{onClick:function(t){return e.handleGetStarted(t)},disabled:a,class:v.classify({disabled:a}),ref:function(t){return e.ctaButton=t}},(function(){return v.format("help-me-get-started")}))):v.button(".welcome--cta-container--button.welcome--cta-container--button-blue",{onClick:function(t){return e.handleGetStarted(t)},disabled:a,class:v.classify({disabled:a}),ref:function(t){return e.ctaButton=t}},(function(){return v.format("get-started")}))}))}))}}]),s(i,[{key:"handleChangeSelect",value:function(e){var t=this;return y("Welcome Screen","changes vertical",e.target.value,"","","",{lastVertical:this.state.selectedVertical,nextVertical:e.target.value}),"choose-something"===e.target.value?this.setState({selectedVertical:null}):this.setState({selectedVertical:e.target.value},(function(){return t.ctaButton.scrollIntoView({behavior:"smooth"})}))}},{key:"handleGetStarted",value:function(e){y("Welcome Screen","clicks","get started","","","",{vertical:this.state.selectedVertical});var t="other"===this.state.selectedVertical?"default":this.state.selectedVertical;return S("/create-first-board?selectedVertical=".concat(t),{trigger:!0})}},{key:"handleDiveIn",value:function(){var e=this,t=this.state.selectedVertical;return y("Welcome Screen","clicks","dive in","","","",{vertical:t}),this.setState({saving:!0}),C(this.modelCache,t).catch((function(){b(new Error("Error copying board"),{extraData:{url:"welcome.js",line:"58",col:"58",source:"Welcome Screen",vertical:t},tags:{feature:"Personalized Onboarding"}});var e=x(t).name;return p.assistedCreate(e)})).then((function(e){return m.displayBoard({idBoard:e.id,openListComposer:!1})})).catch((function(){return m.displayErrorPage()})).finally((function(){return e.setState({saving:!1})}))}}]),i}(h.Component);O.initClass(),e.exports=O},"./app/src/components/CardDetailLoading/CardDetailLoading.less":function(e,t,r){var n=r("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),a=r("./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/CardDetailLoading/CardDetailLoading.less");"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},"./app/src/components/CardDetailLoading/index.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"CardDetailLoading",(function(){return c}));var n=r("./node_modules/react/index.js"),a=r.n(n),o=r("./app/src/components/CardDetailLoading/CardDetailLoading.less"),i=r.n(o),s=r("./packages/nachos/src/components/Spinner/index.ts"),c=function(){return a.a.createElement("div",{className:"".concat(i.a.cardDetailLoading)},a.a.createElement(s.a,{centered:!0}))}},"./app/src/components/CardDetailLoadingError/CardDetailLoadingError.less":function(e,t,r){var n=r("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),a=r("./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/CardDetailLoadingError/CardDetailLoadingError.less");"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},"./app/src/components/CardDetailLoadingError/index.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"CardDetailLoadingError",(function(){return f}));var n=r("./node_modules/react/index.js"),a=r.n(n),o=r("./packages/nachos/button.ts"),i=r("./app/common/lib/util/i18n/index.ts"),s=r("./app/src/components/CardDetailLoadingError/CardDetailLoadingError.less"),c=r.n(s),l=Object(i.forTemplate)("error"),u=Object(i.forTemplate)("connect_failed"),d=function(){return window.location.reload()},f=function(e){return Object(n.useEffect)((function(){var e=document.querySelector(".window");return null!==e&&(e.style.display="block",document.body.classList.add("window-up")),function(){null!==e&&(e.style.display="none",document.body.classList.remove("window-up"))}})),a.a.createElement("div",{className:"".concat(c.a.errorMessage)},a.a.createElement("button",{className:"icon-md icon-close dialog-close-button js-close-window",onClick:e.onClose}),a.a.createElement("div",{className:"u-clearfix"},a.a.createElement("img",{alt:"Taco",src:r("./resources/images/taco-sleep.svg")}),a.a.createElement("h4",null,l("card-detail-loading-error")),a.a.createElement("p",null,l("reload-call-to-action")),a.a.createElement(o.Button,{appearance:"primary",onClick:d},u("reload-page"))))}},"./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/CardDetailLoading/CardDetailLoading.less":function(e,t,r){(t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,"._1E2dwEIz8DJf4P{display:flex;align-items:center;justify-content:center;min-height:600px}",""]),t.locals={cardDetailLoading:"_1E2dwEIz8DJf4P"}},"./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/CardDetailLoadingError/CardDetailLoadingError.less":function(e,t,r){(t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,".ORBhG_kqL7C6b3{flex-direction:column;min-height:600px}.ORBhG_kqL7C6b3,.ORBhG_kqL7C6b3>button{display:flex;align-items:center;justify-content:center}.ORBhG_kqL7C6b3>button{background:transparent}.ORBhG_kqL7C6b3 div{display:block;text-align:center;height:100%}.ORBhG_kqL7C6b3 div h4{font-size:20px;margin:20px 16px 24px}.ORBhG_kqL7C6b3 div p{font-size:16px;margin:0 0 16px}",""]),t.locals={errorMessage:"ORBhG_kqL7C6b3"}},"./resources/images/trello-logo-gray.svg":function(e,t,r){e.exports=r.p+"images/trello-logo-gray.bf59a46c61cdd54c4626.svg"}}]);
//# sourceMappingURL=board-page.9843b750d5e0d79f4861.js.map